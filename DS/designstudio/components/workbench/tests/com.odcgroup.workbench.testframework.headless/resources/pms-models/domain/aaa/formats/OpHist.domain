# UTF-8
Domain AAAFormatsOpHist 
	@java:Package (value=com.odcgroup.aaa.formats) 
namespace "http://www.odcgroup.com/aaa-formats-op-hist" 
metamodelVersion 4.3.0.20110527 
Classes { 
	/* PCK_DS_OPHIST */ 
	PCK_DS_OPHIST 
		@aaa:FormatFunction (value="Operation History") 
		@sql:SQLName (value=PCK_DS_OPHIST) 
		@aaa:TripleA (EntitySQLName=extended_pos, FinFuncName="Operation History", FinFuncProcName=op_hist, FormatName=PCK_DS_OPHIST) 
	{ 
		/* ACCOUNT_BALANCE */ 
		ACCOUNT_BALANCE : AAABusinessTypes:Amount 
			@i18n:Label (de=Kontosaldo, en="Account Balance", fr="Solde du compte") 
			@sql:SQLName (value=ACCOUNT_BALANCE) 
			@aaa:TripleA (FormatEltName=ACCOUNT_BALANCE, Rank=432, ScriptDef="{This format element computes the account balance for each account and portfolio, cash movement per cash movement. It is based on the addition of 2 scripted parts.} {----------------------------------------------} IF (@CASHVIEW_FILTER = 1, {Cash Balance before the first flow} TOT_STAT (quantity_n, @CASHVIEW_FILTER_INIT = 1, CONCAT(portfolio_id.code,IF (nature_e = 1 AND instr_id.nature_e=7,open_oper_id.acc_instr_id.code,instr.code) ),).minimum + {flows} @DEBIT_CREDIT + {******** Sum of the flows since Domain from date and till the treated flows ********* No BP flows *******} SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"extended_pos\"), &portfolio_id = portfolio_id AND &instr_id = instr_id AND &bal_pos_type_id = NULL , &quantity_n, {**Filter definition**} ( &nature_e = 2 {flow} AND ( ( &main_f=1) {to process operation with cash account as instrument} OR ( &pos_nat_e IN (0,6,7,8,26) {to take only cash flows => only cash account impacts} AND &bal_pos_type_id = NULL {exlcude cash Balance position} AND ({to exclude Future flows that are technical cash movements} NOT(&main_ext_pos_id.instr_id.nature_e = 6 AND (&ref_nat_e<>0 OR &adjustment_nat_e <>0 OR (&pos_nat_e = 0 AND &open_oper_nat_e=7))) ) ) ) ) AND { dates selection} ( ( ( &operation_d < operation_d ) OR ( &operation_d = operation_d AND &quantity_n < quantity_n AND &id <> id ) ) ) , 0, 1)) + {******** Sum of the flows since Domain from date and till the treated flows ********* Only BP flows (invest & withdraw*******} SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"extended_pos\"), &portfolio_id = portfolio_id AND &instr_id = instr_id AND &bal_pos_type_id <> NULL , (&quantity_n* (-&price_n)), {**Filter definition**} ( &nature_e = 2 {flow} AND &main_f=1 {to process operation with cash account as instrument} AND { dates selection} ( ( &operation_d < operation_d ) OR ( &operation_d = operation_d AND &quantity_n < quantity_n AND &id <> id ) ) ) , 0, 1)) {In case of a forward position open before from date and closed after the from date } +SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"extended_pos\"), &portfolio_id = portfolio_id AND &open_oper_id.acc_instr_id = instr_id AND &bal_pos_type_id = NULL AND &instr_id.nature_e = 7 ,( &pos_net_amount_m * -1), {**Filter definition**} ( &value_d > DOMAIN().calc_from_d AND &nature_e =1 {init pos} AND &id <> id ) , 0, 1)) , 0)") 
			@aaa:scpt (value="{This format element computes the account balance for each account and portfolio, cash movement per cash movement. It is based on the addition of 2 scripted parts.} {----------------------------------------------} IF (@CASHVIEW_FILTER = 1, {Cash Balance before the first flow} TOT_STAT (quantity_n, @CASHVIEW_FILTER_INIT = 1, CONCAT(portfolio_id.code,IF (nature_e = 1 AND instr_id.nature_e=7,open_oper_id.acc_instr_id.code,instr.code) ),).minimum + {flows} @DEBIT_CREDIT + {******** Sum of the flows since Domain from date and till the treated flows ********* No BP flows *******} SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"extended_pos\"), &portfolio_id = portfolio_id AND &instr_id = instr_id AND &bal_pos_type_id = NULL , &quantity_n, {**Filter definition**} ( &nature_e = 2 {flow} AND ( ( &main_f=1) {to process operation with cash account as instrument} OR ( &pos_nat_e IN (0,6,7,8,26) {to take only cash flows => only cash account impacts} AND &bal_pos_type_id = NULL {exlcude cash Balance position} AND ({to exclude Future flows that are technical cash movements} NOT(&main_ext_pos_id.instr_id.nature_e = 6 AND (&ref_nat_e<>0 OR &adjustment_nat_e <>0 OR (&pos_nat_e = 0 AND &open_oper_nat_e=7))) ) ) ) ) AND { dates selection} ( ( ( &operation_d < operation_d ) OR ( &operation_d = operation_d AND &quantity_n < quantity_n AND &id <> id ) ) ) , 0, 1)) + {******** Sum of the flows since Domain from date and till the treated flows ********* Only BP flows (invest & withdraw*******} SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"extended_pos\"), &portfolio_id = portfolio_id AND &instr_id = instr_id AND &bal_pos_type_id <> NULL , (&quantity_n* (-&price_n)), {**Filter definition**} ( &nature_e = 2 {flow} AND &main_f=1 {to process operation with cash account as instrument} AND { dates selection} ( ( &operation_d < operation_d ) OR ( &operation_d = operation_d AND &quantity_n < quantity_n AND &id <> id ) ) ) , 0, 1)) {In case of a forward position open before from date and closed after the from date } +SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"extended_pos\"), &portfolio_id = portfolio_id AND &open_oper_id.acc_instr_id = instr_id AND &bal_pos_type_id = NULL AND &instr_id.nature_e = 7 ,( &pos_net_amount_m * -1), {**Filter definition**} ( &value_d > DOMAIN().calc_from_d AND &nature_e =1 {init pos} AND &id <> id ) , 0, 1)) , 0)") 
		
		/* ACCOUNT_CODE */ 
		ACCOUNT_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Kontonummer, en="Account Code", fr="Code du compte") 
			@sql:SQLName (value=ACCOUNT_CODE) 
			@aaa:TripleA (FormatEltName=ACCOUNT_CODE, Rank=287, ScriptDef="IF( instr_id.nature_e = 4 {Cash Account}, instr_id.code, NULL )", SortingRank=1) 
			@aaa:scpt (value="IF( instr_id.nature_e = 4 {Cash Account}, instr_id.code, NULL )") 
		
		/* ACCOUNT_DENOM */ 
		ACCOUNT_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Konto, en=Account, fr=Compte) 
			@sql:SQLName (value=ACCOUNT_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=ACCOUNT_DENOM, Rank=60, ScriptDef="IF (nature_e = 1 AND @CASHVIEW_FILTER = 1 AND instr_id.nature_e=7, {Period of domain does not include the open operation of Forward, but include the closing operation, the initial position is transform on a cash flow} IF( open_oper_id.acc_instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.acc_instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.acc_instr_id.name) , IF( instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name) )") 
			@aaa:scpt (value="IF (nature_e = 1 AND @CASHVIEW_FILTER = 1 AND instr_id.nature_e=7, {Period of domain does not include the open operation of Forward, but include the closing operation, the initial position is transform on a cash flow} IF( open_oper_id.acc_instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.acc_instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.acc_instr_id.name) , IF( instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name) )") 
		
		/* ACCOUNT_DENOM */ 
		ACCOUNT_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=ACCOUNT_DENOM_de) 
			@aaa:TripleA (FormatEltName=ACCOUNT_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* ACCOUNT_DENOM */ 
		ACCOUNT_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=ACCOUNT_DENOM_en) 
			@aaa:TripleA (FormatEltName=ACCOUNT_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* ACCOUNT_DENOM */ 
		ACCOUNT_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=ACCOUNT_DENOM_fr) 
			@aaa:TripleA (FormatEltName=ACCOUNT_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* account_id */ 
		account_id : AAABusinessTypes:Id 
			@sql:SQLName (value=account_id) 
			@aaa:TripleA (FormatEltName=account_id, Rank=6, ScriptDef="IF( instr_id.nature_e = 4, instr_id, NULL)") 
			@aaa:scpt (value="IF( instr_id.nature_e = 4, instr_id, NULL)") 
		
		/* ACCOUNTING_DATE */ 
		ACCOUNTING_DATE : AAABusinessTypes:Datetime 
			@i18n:Label (de=Buchungsdatum, en="Accounting Date", fr="Date de comptabilisation") 
			@sql:SQLName (value=ACCOUNTING_DATE) 
			@aaa:TripleA (FormatEltName=ACCOUNTING_DATE, Rank=442, ScriptDef=account_d) 
			@aaa:scpt (value=account_d) 
		
		/* BEGIN_DATE */ 
		BEGIN_DATE : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Anfangsdatum, en="Begin Date", fr="Date de début") 
			@sql:SQLName (value=BEGIN_DATE) 
			@aaa:TripleA (FormatEltName=BEGIN_DATE, Rank=604, ScriptDef="IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e IN (5, 7) {Money Market, Forward} AND open_oper_id.instr_id.generic_f = 1, DATESTR(GET_EXT_OP(open_oper_id.ref_oper_code).operation_d), {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e IN (5, 7) AND open_oper_id.instr_id.generic_f = 1, DATESTR(operation_d), {ELSE} IF( open_oper_id.instr_id.nature_e IN (2, 11, 18, 19) {Fixed Income, Discount Instrument, Option Bond, Convertible Bond}, RIGHT(DATESTR(open_oper_id.instr_id.begin_d), 4), {ELSE} DATESTR(open_oper_id.instr_id.begin_d) ) ) )") 
			@aaa:scpt (value="IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e IN (5, 7) {Money Market, Forward} AND open_oper_id.instr_id.generic_f = 1, DATESTR(GET_EXT_OP(open_oper_id.ref_oper_code).operation_d), {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e IN (5, 7) AND open_oper_id.instr_id.generic_f = 1, DATESTR(operation_d), {ELSE} IF( open_oper_id.instr_id.nature_e IN (2, 11, 18, 19) {Fixed Income, Discount Instrument, Option Bond, Convertible Bond}, RIGHT(DATESTR(open_oper_id.instr_id.begin_d), 4), {ELSE} DATESTR(open_oper_id.instr_id.begin_d) ) ) )") 
		
		/* BUY_FILTER */ 
		BUY_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=BUY_FILTER) 
			@aaa:TripleA (FormatEltName=BUY_FILTER, Rank=36, ScriptDef="@TRANSVIEW_FILTER = 1 {Transaction} AND open_oper_nat_e = 1 {Buy operation}") 
			@aaa:scpt (value="@TRANSVIEW_FILTER = 1 {Transaction} AND open_oper_nat_e = 1 {Buy operation}") 
		
		/* BUY_NET_AMT_REF_CURR */ 
		BUY_NET_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Netto-Kaufbetrag (Ref. Währung)", en="Buy Net Amount (Ref. Ccy.)", fr="Montant net de l\'achat (devise de réf.)") 
			@sql:SQLName (value=BUY_NET_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=BUY_NET_AMT_REF_CURR, Rank=420, ScriptDef="{This format element displays the net amount of a buy operation in the domain currency} {----------------------------------------------} IF( @BUY_FILTER = 1, ref_net_amount_m )") 
			@aaa:scpt (value="{This format element displays the net amount of a buy operation in the domain currency} {----------------------------------------------} IF( @BUY_FILTER = 1, ref_net_amount_m )") 
		
		/* CASHMVTSCUR_FILTER */ 
		CASHMVTSCUR_FILTER : AAABusinessTypes:Int 
			@sql:SQLName (value=CASHMVTSCUR_FILTER) 
			@aaa:TripleA (FormatEltName=CASHMVTSCUR_FILTER, Rank=55, ScriptDef="{This filter provides to filter the operations for cash mouvements view and to class the cash mouvement pers currency according to the class rank defined. The value provided is equal to the currency class rank and below to 10000 for cash movements } @CURR_CLASS_RANK") 
			@aaa:scpt (value="{This filter provides to filter the operations for cash mouvements view and to class the cash mouvement pers currency according to the class rank defined. The value provided is equal to the currency class rank and below to 10000 for cash movements } @CURR_CLASS_RANK") 
		
		/* CASHVIEW_FILTER */ 
		CASHVIEW_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=CASHVIEW_FILTER) 
			@aaa:TripleA (FormatEltName=CASHVIEW_FILTER, Rank=30, ScriptDef="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {We load only cash flows generated by an operation: it concerns cash flows paid/received through the account of the operation, and through the instrument of the operation if the instrument is a cash account as for fx spot and investment/withdrawal/transfer... in cash} {to take only flows} (nature_e=2 AND ( ({to take only cash flows => only cash account impacts} pos_nat_e IN (0,6,7,8,26) AND (NOT (pos_nat_e = 0 AND cash_portfolio_id=NULL)) AND bal_pos_type_id=NULL AND {cash account impact from an operation} main_f=0 AND quantity_n!=0 AND ({to exclude future flows that are technical cash movements} NOT(main_ext_pos_id.instr_id.nature_e = 6 AND (ref_nat_e<>0 OR adjustment_nat_e <>0 OR (pos_nat_e = 0 AND open_oper_nat_e=7))) AND {to exclude forward as cash movements if not closed and value date of cash movement not being within function domain start and reference date } (NOT(main_ext_pos_id.instr_id.nature_e = 7 AND close_oper_id = NULL) AND DATEDIFF(DOMAIN().calc_from_d, value_d, DAY) >= 0 AND DATEDIFF(value_d, DOMAIN().calc_till_d, DAY) >= 0 ) ) ) OR ({to process operation with cash account as instrument} instr_id.nature_e IN (4) AND main_f=1) )) OR {Period of domain does not include the open operation of Forward, but include the closing operation, the initial position is transform on a cash flow} ( nature_e=1 AND instr_id.nature_e = 7 AND close_oper_id <> NULL AND DATEDIFF(DOMAIN().calc_from_d, value_d, DAY) >= 0 AND DATEDIFF(value_d, DOMAIN().calc_till_d, DAY) >= 0 )") 
			@aaa:scpt (value="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {We load only cash flows generated by an operation: it concerns cash flows paid/received through the account of the operation, and through the instrument of the operation if the instrument is a cash account as for fx spot and investment/withdrawal/transfer... in cash} {to take only flows} (nature_e=2 AND ( ({to take only cash flows => only cash account impacts} pos_nat_e IN (0,6,7,8,26) AND (NOT (pos_nat_e = 0 AND cash_portfolio_id=NULL)) AND bal_pos_type_id=NULL AND {cash account impact from an operation} main_f=0 AND quantity_n!=0 AND ({to exclude future flows that are technical cash movements} NOT(main_ext_pos_id.instr_id.nature_e = 6 AND (ref_nat_e<>0 OR adjustment_nat_e <>0 OR (pos_nat_e = 0 AND open_oper_nat_e=7))) AND {to exclude forward as cash movements if not closed and value date of cash movement not being within function domain start and reference date } (NOT(main_ext_pos_id.instr_id.nature_e = 7 AND close_oper_id = NULL) AND DATEDIFF(DOMAIN().calc_from_d, value_d, DAY) >= 0 AND DATEDIFF(value_d, DOMAIN().calc_till_d, DAY) >= 0 ) ) ) OR ({to process operation with cash account as instrument} instr_id.nature_e IN (4) AND main_f=1) )) OR {Period of domain does not include the open operation of Forward, but include the closing operation, the initial position is transform on a cash flow} ( nature_e=1 AND instr_id.nature_e = 7 AND close_oper_id <> NULL AND DATEDIFF(DOMAIN().calc_from_d, value_d, DAY) >= 0 AND DATEDIFF(value_d, DOMAIN().calc_till_d, DAY) >= 0 )") 
		
		/* CASHVIEW_FILTER_INIT */ 
		CASHVIEW_FILTER_INIT : AAABusinessTypes:Flag 
			@sql:SQLName (value=CASHVIEW_FILTER_INIT) 
			@aaa:TripleA (FormatEltName=CASHVIEW_FILTER_INIT, Rank=28, ScriptDef="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial position} AND instr_id.nature_e IN (4, 11) {related instrument is a Cash Account or a Discount Instrument} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND NOT (value_d > DOMAIN().calc_from_d) {Exclude opened forward position } AND NOT (ref_nat_e IN (7,8,10,21)) {Exclude future cash flow position} AND pos_nat_e <> 29 {technical flow for fees managed in foreign currency}", SortingRank=2) 
			@aaa:scpt (value="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial position} AND instr_id.nature_e IN (4, 11) {related instrument is a Cash Account or a Discount Instrument} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND NOT (value_d > DOMAIN().calc_from_d) {Exclude opened forward position } AND NOT (ref_nat_e IN (7,8,10,21)) {Exclude future cash flow position} AND pos_nat_e <> 29 {technical flow for fees managed in foreign currency}") 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=4, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.third_id, portfolio_id.third_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.third_id, portfolio_id.third_id )") 
		
		/* CONTRACT_SIZE */ 
		CONTRACT_SIZE : AAABusinessTypes:Number 
			@i18n:Label (de="Kontraktgrösse", en="Contract Size", fr="Taille du contrat") 
			@sql:SQLName (value=CONTRACT_SIZE) 
			@aaa:TripleA (FormatEltName=CONTRACT_SIZE, Rank=338, ScriptDef="IF( open_oper_id.instr_id.contract_size_n <> NULL AND open_oper_id.instr_id.contract_size_n <> 0, open_oper_id.instr_id.contract_size_n, 1 )") 
			@aaa:scpt (value="IF( open_oper_id.instr_id.contract_size_n <> NULL AND open_oper_id.instr_id.contract_size_n <> 0, open_oper_id.instr_id.contract_size_n, 1 )") 
		
		/* COST_PRICE */ 
		COST_PRICE : AAABusinessTypes:Number 
			@i18n:Label (de=Einstandspreis, en="Cost Price", fr="Prix d\'achat") 
			@sql:SQLName (value=COST_PRICE) 
			@aaa:TripleA (FormatEltName=COST_PRICE, Rank=603, ScriptDef="IF(open_oper_nat_e IN (4, 10, 13), IF(pos_nat_e=2,quote_n, instr_ext_pos_id.quote_n), IF(open_oper_nat_e = 5, IF(pos_nat_e=2,-1*quote_n, -1*instr_ext_pos_id.quote_n), IF(open_oper_nat_e IN (3, 6), IF(pos_nat_e=1,-1*quote_n, -1*main_ext_pos_id.quote_n), IF(pos_nat_e=1,quote_n, main_ext_pos_id.quote_n))))") 
			@aaa:scpt (value="IF(open_oper_nat_e IN (4, 10, 13), IF(pos_nat_e=2,quote_n, instr_ext_pos_id.quote_n), IF(open_oper_nat_e = 5, IF(pos_nat_e=2,-1*quote_n, -1*instr_ext_pos_id.quote_n), IF(open_oper_nat_e IN (3, 6), IF(pos_nat_e=1,-1*quote_n, -1*main_ext_pos_id.quote_n), IF(pos_nat_e=1,quote_n, main_ext_pos_id.quote_n))))") 
		
		/* CURR_CLASS_RANK */ 
		CURR_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Währungsklassifikation", en="Currency Classification", fr="Classification de la devise") 
			@sql:SQLName (value=CURR_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=CURR_CLASS_RANK, Rank=40, ScriptDef="{This format element is used to classify the operations based on the currency of their related position. The classification PCK_DS_CURRENCY (defined in the packaging parameter DS_CLASSIF_CURRENCY) on Currency entity is used for the computation. } {--------------------------------------------------} IF(@CASHVIEW_FILTER=1, pos_currency_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_CURRENCY\")].rank_n)") 
			@aaa:scpt (value="{This format element is used to classify the operations based on the currency of their related position. The classification PCK_DS_CURRENCY (defined in the packaging parameter DS_CLASSIF_CURRENCY) on Currency entity is used for the computation. } {--------------------------------------------------} IF(@CASHVIEW_FILTER=1, pos_currency_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_CURRENCY\")].rank_n)") 
		
		/* data_secu_prof_id */ 
		data_secu_prof_id : AAABusinessTypes:Id 
			@sql:SQLName (value=data_secu_prof_id) 
			@aaa:TripleA (FormatEltName=data_secu_prof_id, Rank=1, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} IF( child_ptf_id <> NULL, child_ptf_id.data_secu_prof_id, portfolio_id.data_secu_prof_id ))") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} IF( child_ptf_id <> NULL, child_ptf_id.data_secu_prof_id, portfolio_id.data_secu_prof_id ))") 
		
		/* DEBIT_CREDIT */ 
		DEBIT_CREDIT : AAABusinessTypes:Amount 
			@i18n:Label (de=Belastung/Gutschrift, en=Debit/Credit, fr="Débit/crédit") 
			@sql:SQLName (value=DEBIT_CREDIT) 
			@aaa:TripleA (FormatEltName=DEBIT_CREDIT, Rank=430, ScriptDef="IF(@CASHVIEW_FILTER = 1, IF ( bal_pos_type_id = NULL, IF ( nature_e = 1 AND instr_id.nature_e = 7{forward}, pos_net_amount_m * -1, quantity_n ), (quantity_n* -(price_n)) ) )") 
			@aaa:scpt (value="IF(@CASHVIEW_FILTER = 1, IF ( bal_pos_type_id = NULL, IF ( nature_e = 1 AND instr_id.nature_e = 7{forward}, pos_net_amount_m * -1, quantity_n ), (quantity_n* -(price_n)) ) )") 
		
		/* DEBIT_CREDIT_FILTER */ 
		DEBIT_CREDIT_FILTER : AAABusinessTypes:Int 
			@sql:SQLName (value=DEBIT_CREDIT_FILTER) 
			@aaa:TripleA (FormatEltName=DEBIT_CREDIT_FILTER, Rank=35, ScriptDef="{This format element is used to extract operations related to debit and credit.} {-----------------------------------------------------------} {The operations are extracted if} IF( IF( @TRANSVIEW_FILTER = 1, -1 * pos_net_amount_m, pos_net_amount_m ) < 0, 0 {it is a debit}, 1 {it is a credit} )") 
			@aaa:scpt (value="{This format element is used to extract operations related to debit and credit.} {-----------------------------------------------------------} {The operations are extracted if} IF( IF( @TRANSVIEW_FILTER = 1, -1 * pos_net_amount_m, pos_net_amount_m ) < 0, 0 {it is a debit}, 1 {it is a credit} )") 
		
		/* DEPOSIT_NAME */ 
		DEPOSIT_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Lagerstelle, en=Deposit, fr="Dépositaire") 
			@sql:SQLName (value=DEPOSIT_NAME) 
			@aaa:TripleA (FormatEltName=DEPOSIT_NAME, Rank=3001, ScriptDef=deposit_id.name) 
			@aaa:scpt (value=deposit_id.name) 
		
		/* EXPIRATION */ 
		EXPIRATION : AAABusinessTypes:Date 
			@i18n:Label (de=Verfalldatum, en="Expiration Date", fr="Date d\'expiration") 
			@sql:SQLName (value=EXPIRATION) 
			@aaa:TripleA (FormatEltName=EXPIRATION, Rank=606, ScriptDef="IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e = 5 AND open_oper_id.instr_id.generic_f = 1, GET_EXT_OP(open_oper_id.ref_oper_code).expiration_d, {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e = 5 AND open_oper_id.instr_id.generic_f = 1, expiration_d, {ELSE} IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e = 7 AND open_oper_id.instr_id.generic_f = 1, GET_EXT_OP(open_oper_id.ref_oper_code).value_d, {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e = 7 AND open_oper_id.instr_id.generic_f = 1, value_d, {ELSE} IF( open_oper_id.instr_id.nature_e IN (2,3,6,11,18,19), open_oper_id.instr_id.end_d, {ELSE} NULL ) ) ) ) )") 
			@aaa:scpt (value="IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e = 5 AND open_oper_id.instr_id.generic_f = 1, GET_EXT_OP(open_oper_id.ref_oper_code).expiration_d, {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e = 5 AND open_oper_id.instr_id.generic_f = 1, expiration_d, {ELSE} IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e = 7 AND open_oper_id.instr_id.generic_f = 1, GET_EXT_OP(open_oper_id.ref_oper_code).value_d, {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e = 7 AND open_oper_id.instr_id.generic_f = 1, value_d, {ELSE} IF( open_oper_id.instr_id.nature_e IN (2,3,6,11,18,19), open_oper_id.instr_id.end_d, {ELSE} NULL ) ) ) ) )") 
		
		/* FEES_AMOUNT_OPER_CUR */ 
		FEES_AMOUNT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern (Op. Währung)", en="Fees And Taxes (Op. Ccy.)", fr="Frais et taxes (devise de l\'op.)") 
			@sql:SQLName (value=FEES_AMOUNT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=FEES_AMOUNT_OPER_CUR, Rank=402, ScriptDef="{This format element displays the fees and taxes of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(@NET_AMOUNT_OPER_CURR - @GROSS_AMOUNT_OPER_CURR), ABS(@NET_AMOUNT_OPER_CURR - @GROSS_AMOUNT_OPER_CURR) ), NULL )") 
			@aaa:scpt (value="{This format element displays the fees and taxes of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(@NET_AMOUNT_OPER_CURR - @GROSS_AMOUNT_OPER_CURR), ABS(@NET_AMOUNT_OPER_CURR - @GROSS_AMOUNT_OPER_CURR) ), NULL )") 
		
		/* FEES_AMOUNT_REF_CURR */ 
		FEES_AMOUNT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern (Ref. Währung)", en="Fees And Taxes (Ref. Ccy.)", fr="Frais et taxes (devise de réf.)") 
			@sql:SQLName (value=FEES_AMOUNT_REF_CURR) 
			@aaa:TripleA (FormatEltName=FEES_AMOUNT_REF_CURR, Rank=412, ScriptDef="{This format element displays the fees and taxes of an operation in reference (domain) currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(@NET_AMOUNT_REF_CURR - @GROSS_AMOUNT_REF_CURR), ABS(@NET_AMOUNT_REF_CURR - @GROSS_AMOUNT_REF_CURR) ), NULL )") 
			@aaa:scpt (value="{This format element displays the fees and taxes of an operation in reference (domain) currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(@NET_AMOUNT_REF_CURR - @GROSS_AMOUNT_REF_CURR), ABS(@NET_AMOUNT_REF_CURR - @GROSS_AMOUNT_REF_CURR) ), NULL )") 
		
		/* FEES_AMT_OPER_CURR */ 
		FEES_AMT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern (Op. Währung)", en="Fees And Taxes (Op. Ccy.)", fr="Frais et taxes (devise de l\'op.)") 
			@sql:SQLName (value=FEES_AMT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=FEES_AMT_OPER_CURR, Rank=362, ScriptDef="{This format element displays the fees and taxes of an operation with sign in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} @NET_AMT_OPER_CURR - @GROSS_AMT_OPER_CURR") 
			@aaa:scpt (value="{This format element displays the fees and taxes of an operation with sign in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} @NET_AMT_OPER_CURR - @GROSS_AMT_OPER_CURR") 
		
		/* FEES_AMT_REF_CURR */ 
		FEES_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern (Ref. Währung)", en="Fees And Taxes (Ref. Ccy.)", fr="Frais et taxes (devise de réf.)") 
			@sql:SQLName (value=FEES_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=FEES_AMT_REF_CURR, Rank=372, ScriptDef="{This format element displays the fees and taxes of an operation in reference (domain) currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} @NET_AMT_REF_CURR - @GROSS_AMT_REF_CURR") 
			@aaa:scpt (value="{This format element displays the fees and taxes of an operation in reference (domain) currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} @NET_AMT_REF_CURR - @GROSS_AMT_REF_CURR") 
		
		/* first_operation_id */ 
		first_operation_id : AAABusinessTypes:Id 
			@sql:SQLName (value=first_operation_id) 
			@aaa:TripleA (FormatEltName=first_operation_id, Rank=7, ScriptDef="{This format element displays the first identifier of a security transaction. If no security transactions exists, then the NULL value is returned. The filter to extract the first identifier is exactly the same as the one used in the format element TRANSVIEW_FILTER.} {------------------------------------------------------} TOT_FIRST( id, (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation}) OR (nature_e = 2 {Flow operation} AND open_oper_id.instr_id.nature_e = 4 {related instrument is a Cash Account} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND open_oper_id.instr_id = instr_id {to select only the main operation} AND CLASSIFY( GET_ENTITY(\"extended_pos\"), id, \"PCK_DS_OPER_CLASS\").rank_n = 5 {operations related to buy/sell of cash}) , nature_e, @portfolio_id )") 
			@aaa:scpt (value="{This format element displays the first identifier of a security transaction. If no security transactions exists, then the NULL value is returned. The filter to extract the first identifier is exactly the same as the one used in the format element TRANSVIEW_FILTER.} {------------------------------------------------------} TOT_FIRST( id, (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation}) OR (nature_e = 2 {Flow operation} AND open_oper_id.instr_id.nature_e = 4 {related instrument is a Cash Account} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND open_oper_id.instr_id = instr_id {to select only the main operation} AND CLASSIFY( GET_ENTITY(\"extended_pos\"), id, \"PCK_DS_OPER_CLASS\").rank_n = 5 {operations related to buy/sell of cash}) , nature_e, @portfolio_id )") 
		
		/* GROSS_AMOUNT_OPER_CU */ 
		GROSS_AMOUNT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Bruttobetrag (Op. Währung)", en="Gross Amount (Op. Ccy.)", fr="Montant brut (devise de l\'op.)") 
			@sql:SQLName (value=GROSS_AMOUNT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=GROSS_AMOUNT_OPER_CU, Rank=401, ScriptDef="{This format element displays the gross amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_gross_amount_m), ABS(pos_gross_amount_m) )") 
			@aaa:scpt (value="{This format element displays the gross amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_gross_amount_m), ABS(pos_gross_amount_m) )") 
		
		/* GROSS_AMOUNT_REF_CUR */ 
		GROSS_AMOUNT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Bruttobetrag (Ref. Währung)", en="Gross Amount (Ref. Ccy.)", fr="Montant brut (devise de réf.)") 
			@sql:SQLName (value=GROSS_AMOUNT_REF_CURR) 
			@aaa:TripleA (FormatEltName=GROSS_AMOUNT_REF_CUR, Rank=411, ScriptDef="{This format element displays the gross amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_gross_amount_m), ABS(ref_gross_amount_m) )") 
			@aaa:scpt (value="{This format element displays the gross amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_gross_amount_m), ABS(ref_gross_amount_m) )") 
		
		/* GROSS_AMT_OPER_CURR */ 
		GROSS_AMT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Bruttobetrag (Op. Währung)", en="Gross Amount (Op. Ccy.)", fr="Montant brut (devise de l\'op.)") 
			@sql:SQLName (value=GROSS_AMT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=GROSS_AMT_OPER_CURR, Rank=361, ScriptDef="{This format element displays the gross amount with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} -pos_net_amount_m") 
			@aaa:scpt (value="{This format element displays the gross amount with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} -pos_net_amount_m") 
		
		/* GROSS_AMT_REF_CURR */ 
		GROSS_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Bruttobetrag (Ref. Währung)", en="Gross Amount (Ref. Ccy.)", fr="Montant brut (devise de réf.)") 
			@sql:SQLName (value=GROSS_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=GROSS_AMT_REF_CURR, Rank=371, ScriptDef="{This format element displays the gross amount with of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} -ref_gross_amount_m") 
			@aaa:scpt (value="{This format element displays the gross amount with of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} -ref_gross_amount_m") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hierarchy Head", fr="Tête de la hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_de : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_de) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef) 
			@aaa:scpt (value) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_en : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_en) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef) 
			@aaa:scpt (value) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_fr : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_fr) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef) 
			@aaa:scpt (value) 
		
		/* id */ 
		id : AAABusinessTypes:Id 
			@sql:SQLName (value=id) 
			@aaa:TripleA (FormatEltName=id, Rank=5, ScriptDef=id) 
			@aaa:scpt (value=id) 
		
		/* INSTR_CODE */ 
		INSTR_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Instrument, en="Instrument Code", fr="Code de l\'instrument") 
			@sql:SQLName (value=INSTR_CODE) 
			@aaa:TripleA (FormatEltName=INSTR_CODE, Rank=290, ScriptDef=open_oper_id.instr_id.code) 
			@aaa:scpt (value=open_oper_id.instr_id.code) 
		
		/* INSTR_CURR_CLASS_COD */ 
		INSTR_CURR_CLASS_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de="Instr. Whrg", en="Instr. Ccy", fr="Dev instr.") 
			@sql:SQLName (value=INSTR_CURR_CLASS_CODE) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=INSTR_CURR_CLASS_COD, Rank=15, ScriptDef="{This format element is used to classify the instruments used in operation. The classification is based on the reference currency of the instrument. The classification PCK_DS_CURRENCY (defined in the packaging parameter DS_CLASSIF_CURRENCY) on Currency entity is used for the classification. } {--------------------------------------------------} open_oper_id.instr_id.ref_curr_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_CURRENCY\")].list_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom") 
			@aaa:scpt (value="{This format element is used to classify the instruments used in operation. The classification is based on the reference currency of the instrument. The classification PCK_DS_CURRENCY (defined in the packaging parameter DS_CLASSIF_CURRENCY) on Currency entity is used for the classification. } {--------------------------------------------------} open_oper_id.instr_id.ref_curr_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_CURRENCY\")].list_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom") 
		
		/* INSTR_CURR_CLASS_COD */ 
		INSTR_CURR_CLASS_CODE_de : AAABusinessTypes:UniCode 
			@sql:SQLName (value=INSTR_CURR_CLASS_CODE_de) 
			@aaa:TripleA (FormatEltName=INSTR_CURR_CLASS_COD, Rank=15, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_CURR_CLASS_COD */ 
		INSTR_CURR_CLASS_CODE_en : AAABusinessTypes:UniCode 
			@sql:SQLName (value=INSTR_CURR_CLASS_CODE_en) 
			@aaa:TripleA (FormatEltName=INSTR_CURR_CLASS_COD, Rank=15, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_CURR_CLASS_COD */ 
		INSTR_CURR_CLASS_CODE_fr : AAABusinessTypes:UniCode 
			@sql:SQLName (value=INSTR_CURR_CLASS_CODE_fr) 
			@aaa:TripleA (FormatEltName=INSTR_CURR_CLASS_COD, Rank=15, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM : AAABusinessTypes:UniNote 
			@i18n:Label (de=Instrument, en=Instrument, fr=Instrument) 
			@sql:SQLName (value=INSTR_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=INSTR_DENOM, Rank=500, ScriptDef="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
			@aaa:scpt (value="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_de : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_de) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_en : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_en) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_fr : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_fr) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* instr_id */ 
		instr_id : AAABusinessTypes:Id 
			@sql:SQLName (value=instr_id) 
			@aaa:TripleA (FormatEltName=instr_id, Rank=12, ScriptDef="IF( @OPERATION_CLASS_RANK IN (1, 5, 20, 25, 30, 35, 45, 50, 55, 60, 65, 70), open_oper_id.instr_id, instr_id )") 
			@aaa:scpt (value="IF( @OPERATION_CLASS_RANK IN (1, 5, 20, 25, 30, 35, 45, 50, 55, 60, 65, 70), open_oper_id.instr_id, instr_id )") 
		
		/* INSTR_NATURE_VALUE */ 
		INSTR_NATURE_VALUE : AAABusinessTypes:Enum 
			@i18n:Label (de=Instrumentenart, en="Instrument Nature", fr="Nature de l\'instrument") 
			@sql:SQLName (value=INSTR_NATURE_VALUE) 
			@aaa:TripleA (FormatEltName=INSTR_NATURE_VALUE, Rank=295, ScriptDef=instr_id.nature_e) 
			@aaa:scpt (value=instr_id.nature_e) 
		
		/* INSTR_REF_CURRENCY */ 
		INSTR_REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=INSTR_REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=INSTR_REF_CURRENCY, Rank=601, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id,GET_APPL_PARAM(\"DS_CURRENCY_CODE\"),1).code, {ELSE} open_oper_id.instr_id.ref_curr_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id,GET_APPL_PARAM(\"DS_CURRENCY_CODE\"),1).code, {ELSE} open_oper_id.instr_id.ref_curr_id.code )") 
		
		/* INSTR_TYPE_DENOM */ 
		INSTR_TYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Instrument-Typ, en="Instrument Type", fr="Type d\'instrument") 
			@sql:SQLName (value=INSTR_TYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=INSTR_TYPE_DENOM, Rank=600, ScriptDef="open_oper_id.instr_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom") 
			@aaa:scpt (value="open_oper_id.instr_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom") 
		
		/* INSTR_TYPE_DENOM */ 
		INSTR_TYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=INSTR_TYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=INSTR_TYPE_DENOM, Rank=600, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_TYPE_DENOM */ 
		INSTR_TYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=INSTR_TYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=INSTR_TYPE_DENOM, Rank=600, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_TYPE_DENOM */ 
		INSTR_TYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=INSTR_TYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=INSTR_TYPE_DENOM, Rank=600, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_UNDERLY_DENOM */ 
		INSTR_UNDERLY_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Basiswert, en=Underlying, fr=Sous-jacent) 
			@sql:SQLName (value=INSTR_UNDERLY_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=INSTR_UNDERLY_DENOM, Rank=602, ScriptDef="IF(open_oper_id.instr_id.nature_e IN (3,6,7), IF(open_oper_id.instr_id.underly_instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.underly_instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, IF(open_oper_id.instr_id.underly_instr_id.denom<>NULL, open_oper_id.instr_id.underly_instr_id.denom, open_oper_id.instr_id.underly_instr_id.name)))") 
			@aaa:scpt (value="IF(open_oper_id.instr_id.nature_e IN (3,6,7), IF(open_oper_id.instr_id.underly_instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.underly_instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, IF(open_oper_id.instr_id.underly_instr_id.denom<>NULL, open_oper_id.instr_id.underly_instr_id.denom, open_oper_id.instr_id.underly_instr_id.name)))") 
		
		/* INSTR_UNDERLY_DENOM */ 
		INSTR_UNDERLY_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=INSTR_UNDERLY_DENOM_de) 
			@aaa:TripleA (FormatEltName=INSTR_UNDERLY_DENOM, Rank=602, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_UNDERLY_DENOM */ 
		INSTR_UNDERLY_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=INSTR_UNDERLY_DENOM_en) 
			@aaa:TripleA (FormatEltName=INSTR_UNDERLY_DENOM, Rank=602, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_UNDERLY_DENOM */ 
		INSTR_UNDERLY_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=INSTR_UNDERLY_DENOM_fr) 
			@aaa:TripleA (FormatEltName=INSTR_UNDERLY_DENOM, Rank=602, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INVEST_FILTER */ 
		INVEST_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=INVEST_FILTER) 
			@aaa:TripleA (FormatEltName=INVEST_FILTER, Rank=38, ScriptDef="@TRANSVIEW_FILTER = 1 {Transaction} AND open_oper_nat_e = 4 {Investment operation}") 
			@aaa:scpt (value="@TRANSVIEW_FILTER = 1 {Transaction} AND open_oper_nat_e = 4 {Investment operation}") 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=3, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.comm_mgr_id, portfolio_id.comm_mgr_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.comm_mgr_id, portfolio_id.comm_mgr_id )") 
		
		/* NET_AMOUNT_OPER_CURR */ 
		NET_AMOUNT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Op. Währung)", en="Net Amount (Op. Ccy.)", fr="Montant net (devise de l\'op.)") 
			@sql:SQLName (value=NET_AMOUNT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=NET_AMOUNT_OPER_CURR, Rank=400, ScriptDef="{This format element displays the net amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_net_amount_m), ABS(pos_net_amount_m) )") 
			@aaa:scpt (value="{This format element displays the net amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_net_amount_m), ABS(pos_net_amount_m) )") 
		
		/* NET_AMOUNT_REF_CURR */ 
		NET_AMOUNT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Ref. Währung)", en="Net Amount (Ref. Ccy.)", fr="Montant net (devise de réf.)") 
			@sql:SQLName (value=NET_AMOUNT_REF_CURR) 
			@aaa:TripleA (FormatEltName=NET_AMOUNT_REF_CURR, Rank=410, ScriptDef="{This format element displays the net amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_net_amount_m), ABS(ref_net_amount_m) )") 
			@aaa:scpt (value="{This format element displays the net amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_net_amount_m), ABS(ref_net_amount_m) )") 
		
		/* NET_AMT_OPER_CURR */ 
		NET_AMT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Op. Währung)", en="Net Amount (Op. Ccy.)", fr="Montant net (devise de l\'op.)") 
			@sql:SQLName (value=NET_AMT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=NET_AMT_OPER_CURR, Rank=360, ScriptDef="{This format element displays the net amount with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} -pos_net_amount_m") 
			@aaa:scpt (value="{This format element displays the net amount with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} -pos_net_amount_m") 
		
		/* NET_AMT_REF_CURR */ 
		NET_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Ref. Währung)", en="Net Amount (Ref. Ccy.)", fr="Montant net (devise de réf.)") 
			@sql:SQLName (value=NET_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=NET_AMT_REF_CURR, Rank=370, ScriptDef="{This format element displays the net amount with of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} -ref_net_amount_m") 
			@aaa:scpt (value="{This format element displays the net amount with of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} -ref_net_amount_m") 
		
		/* open_operation_id */ 
		open_operation_id : AAABusinessTypes:Id 
			@sql:SQLName (value=open_operation_id) 
			@aaa:TripleA (FormatEltName=open_operation_id, Rank=8, ScriptDef="{This format is used to retrieve the identifier of the operation from where the displayed operation (cash movements or security transaction) is depending.} {-----------------------------------------} open_oper_id", SortingRank=4) 
			@aaa:scpt (value="{This format is used to retrieve the identifier of the operation from where the displayed operation (cash movements or security transaction) is depending.} {-----------------------------------------} open_oper_id") 
		
		/* OPER_SUBTYPE_CODE */ 
		OPER_SUBTYPE_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de="Untertyp der Transaktion", en="Operation Sub-Type", fr="Sous-type de l\'opération") 
			@sql:SQLName (value=OPER_SUBTYPE_CODE) 
			@aaa:TripleA (FormatEltName=OPER_SUBTYPE_CODE, Rank=456, ScriptDef=open_oper_id.subtype_id.code) 
			@aaa:scpt (value=open_oper_id.subtype_id.code) 
		
		/* OPER_SUBTYPE_DENOM */ 
		OPER_SUBTYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de="Untertyp der Transaktion", en="Operation Sub-Type", fr="Sous-type de l\'opération") 
			@sql:SQLName (value=OPER_SUBTYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=OPER_SUBTYPE_DENOM, Rank=457, ScriptDef="IF( open_oper_id.subtype_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.subtype_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.subtype_id.name )") 
			@aaa:scpt (value="IF( open_oper_id.subtype_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.subtype_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.subtype_id.name )") 
		
		/* OPER_SUBTYPE_DENOM */ 
		OPER_SUBTYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPER_SUBTYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=OPER_SUBTYPE_DENOM, Rank=457, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPER_SUBTYPE_DENOM */ 
		OPER_SUBTYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPER_SUBTYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=OPER_SUBTYPE_DENOM, Rank=457, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPER_SUBTYPE_DENOM */ 
		OPER_SUBTYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPER_SUBTYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=OPER_SUBTYPE_DENOM, Rank=457, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_CLASS_RANK */ 
		OPERATION_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Klassifikation der Transaktion", en="Operation Classification", fr="Classification de l\'opération") 
			@sql:SQLName (value=OPERATION_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=OPERATION_CLASS_RANK, Rank=11, ScriptDef="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The classification PCK_DS_OPER_CLASS (defined in the packaging parameter DS_CLASSIF_OPER_CLASS) on Extended Position entity is used for the computation. The classification is the following: - Rank 1: Buy of Securities - Rank 2: Sell of Securities - Rank 6: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 16: Corporate Actions - Rank 11: Buy of Money Markets - Rank 12: Sell of Money Markets - Rank 21: Investments of Securities - Rank 22: Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 26: Investments of Cash - Rank 27: Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 28: Investment, Withdrawals, Transfers and Portfolio Transfers of Money Markets - Rank 31: Incomes (Dividends, Coupons, etc...) of instruments, which are not Money Markets - Rank 32: Incomes of Money Markets - Rank 36: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 37: Redemption of Money Markets - Rank 41: Management Fees - Rank 99: Other Operations } {--------------------------------------------------} CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n") 
			@aaa:scpt (value="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The classification PCK_DS_OPER_CLASS (defined in the packaging parameter DS_CLASSIF_OPER_CLASS) on Extended Position entity is used for the computation. The classification is the following: - Rank 1: Buy of Securities - Rank 2: Sell of Securities - Rank 6: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 16: Corporate Actions - Rank 11: Buy of Money Markets - Rank 12: Sell of Money Markets - Rank 21: Investments of Securities - Rank 22: Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 26: Investments of Cash - Rank 27: Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 28: Investment, Withdrawals, Transfers and Portfolio Transfers of Money Markets - Rank 31: Incomes (Dividends, Coupons, etc...) of instruments, which are not Money Markets - Rank 32: Incomes of Money Markets - Rank 36: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 37: Redemption of Money Markets - Rank 41: Management Fees - Rank 99: Other Operations } {--------------------------------------------------} CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n") 
		
		/* OPERATION_CODE */ 
		OPERATION_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Transaktionsnummer, en="Operation Code", fr="Code de l\'opération") 
			@sql:SQLName (value=OPERATION_CODE) 
			@aaa:TripleA (FormatEltName=OPERATION_CODE, Rank=321, ScriptDef=open_oper_code) 
			@aaa:scpt (value=open_oper_code) 
		
		/* OPERATION_DATE */ 
		OPERATION_DATE : AAABusinessTypes:Datetime 
			@i18n:Label (de="Ausführungsdatum", en="Execution Date", fr="Date d\'exécution") 
			@sql:SQLName (value=OPERATION_DATE) 
			@aaa:TripleA (FormatEltName=OPERATION_DATE, Rank=440, ScriptDef="IF ( @CASHVIEW_FILTER = 1 AND ( main_ext_pos_id.instr_id.nature_e = 7 OR instr_id.nature_e = 7){Forward instrument } AND ref_nat_e = 3{Forward Open} , value_d , operation_d )", SortingRank=3) 
			@aaa:scpt (value="IF ( @CASHVIEW_FILTER = 1 AND ( main_ext_pos_id.instr_id.nature_e = 7 OR instr_id.nature_e = 7){Forward instrument } AND ref_nat_e = 3{Forward Open} , value_d , operation_d )") 
		
		/* OPERATION_KEY */ 
		OPERATION_KEY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Transaktions-Schlüssel", en="Operation Key", fr="Clé de l\'opération") 
			@sql:SQLName (value=OPERATION_KEY) 
			@aaa:TripleA (FormatEltName=OPERATION_KEY, Rank=320, ScriptDef="IF( LEFT(GET_APPL_PARAM(\"AAA_VERSION\"), 2) = \"R3\", NUMSTR(open_oper_id), {ELSE} open_oper_code )") 
			@aaa:scpt (value="IF( LEFT(GET_APPL_PARAM(\"AAA_VERSION\"), 2) = \"R3\", NUMSTR(open_oper_id), {ELSE} open_oper_code )") 
		
		/* OPERATION_MAIN_CODE */ 
		OPERATION_MAIN_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Haupt-Transaktionsnummer, en="Main Operation Code", fr="Code de l\'opération principale") 
			@sql:SQLName (value=OPERATION_MAIN_CODE) 
			@aaa:TripleA (FormatEltName=OPERATION_MAIN_CODE, Rank=323, ScriptDef="{This format element can be used to regroup operations derived from a given previous operation. From exemple, a sell operation can be derived from a buy operation if the sell operation is due to a redemption} {------------------------------------------------------------} IF( open_oper_id.ref_oper_code <> NULL, open_oper_id.ref_oper_code, open_oper_code )") 
			@aaa:scpt (value="{This format element can be used to regroup operations derived from a given previous operation. From exemple, a sell operation can be derived from a buy operation if the sell operation is due to a redemption} {------------------------------------------------------------} IF( open_oper_id.ref_oper_code <> NULL, open_oper_id.ref_oper_code, open_oper_code )") 
		
		/* OPERATION_MERGED_CLA */ 
		OPERATION_MERGED_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Klassifikation für gruppierte Transaktionen", en="Operation Merged Classification", fr="Classification regroupée de l\'opération") 
			@sql:SQLName (value=OPERATION_MERGED_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=OPERATION_MERGED_CLA, Rank=56, ScriptDef="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The format OPERATION_CLASS_RANK is used for the computation. The classification is the following: Rank [1;5]:Securities -> 5 Rank [6;10]: Forex->10 Rank [11;15]: Money Market->15 Rank [16;20]: Corporate Action->20 Rank [21;25]: Securities Investment/Withdrawal/Transfer/Portfolio Transfer->25 Rank [26;30]: Cash Investment/Withdrawal/Transfer/Portfolio Transfer->30 Rank [31;35]: Income->35 Rank [36;40]: Redemptions->40 Rank [41;45]: Management Fees ->45 Rank =99: Others->99 } {--------------------------------------------------} IF(@TRANSVIEW_FILTER=1, IF(@OPERATION_CLASS_RANK>=1 AND @OPERATION_CLASS_RANK<=5,5, IF(@OPERATION_CLASS_RANK>5 AND @OPERATION_CLASS_RANK<=10,10, IF(@OPERATION_CLASS_RANK>10 AND @OPERATION_CLASS_RANK<=15,15, IF(@OPERATION_CLASS_RANK>15 AND @OPERATION_CLASS_RANK<=20,20, IF(@OPERATION_CLASS_RANK>20 AND @OPERATION_CLASS_RANK<=25,25, IF(@OPERATION_CLASS_RANK>25 AND @OPERATION_CLASS_RANK<=30,30, IF(@OPERATION_CLASS_RANK>30 AND @OPERATION_CLASS_RANK<=35,35, IF(@OPERATION_CLASS_RANK>35 AND @OPERATION_CLASS_RANK<=40,40, IF(@OPERATION_CLASS_RANK>40 AND @OPERATION_CLASS_RANK<=45,45, IF(@OPERATION_CLASS_RANK=99,99 ) ))))))))))") 
			@aaa:scpt (value="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The format OPERATION_CLASS_RANK is used for the computation. The classification is the following: Rank [1;5]:Securities -> 5 Rank [6;10]: Forex->10 Rank [11;15]: Money Market->15 Rank [16;20]: Corporate Action->20 Rank [21;25]: Securities Investment/Withdrawal/Transfer/Portfolio Transfer->25 Rank [26;30]: Cash Investment/Withdrawal/Transfer/Portfolio Transfer->30 Rank [31;35]: Income->35 Rank [36;40]: Redemptions->40 Rank [41;45]: Management Fees ->45 Rank =99: Others->99 } {--------------------------------------------------} IF(@TRANSVIEW_FILTER=1, IF(@OPERATION_CLASS_RANK>=1 AND @OPERATION_CLASS_RANK<=5,5, IF(@OPERATION_CLASS_RANK>5 AND @OPERATION_CLASS_RANK<=10,10, IF(@OPERATION_CLASS_RANK>10 AND @OPERATION_CLASS_RANK<=15,15, IF(@OPERATION_CLASS_RANK>15 AND @OPERATION_CLASS_RANK<=20,20, IF(@OPERATION_CLASS_RANK>20 AND @OPERATION_CLASS_RANK<=25,25, IF(@OPERATION_CLASS_RANK>25 AND @OPERATION_CLASS_RANK<=30,30, IF(@OPERATION_CLASS_RANK>30 AND @OPERATION_CLASS_RANK<=35,35, IF(@OPERATION_CLASS_RANK>35 AND @OPERATION_CLASS_RANK<=40,40, IF(@OPERATION_CLASS_RANK>40 AND @OPERATION_CLASS_RANK<=45,45, IF(@OPERATION_CLASS_RANK=99,99 ) ))))))))))") 
		
		/* OPERATION_NATURE */ 
		OPERATION_NATURE : AAABusinessTypes:UniName 
			@i18n:Label (de=Art, en=Nature, fr=Nature) 
			@sql:SQLName (value=OPERATION_NATURE) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=OPERATION_NATURE, Rank=608, ScriptDef="open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
			@aaa:scpt (value="open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
		
		/* OPERATION_NATURE */ 
		OPERATION_NATURE_de : AAABusinessTypes:UniName 
			@sql:SQLName (value=OPERATION_NATURE_de) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE, Rank=608, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE */ 
		OPERATION_NATURE_en : AAABusinessTypes:UniName 
			@sql:SQLName (value=OPERATION_NATURE_en) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE, Rank=608, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE */ 
		OPERATION_NATURE_fr : AAABusinessTypes:UniName 
			@sql:SQLName (value=OPERATION_NATURE_fr) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE, Rank=608, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE_LAB */ 
		OPERATION_NATURE_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Transaktionsart, en="Operation Nature", fr="Nature de l\'opération") 
			@sql:SQLName (value=OPERATION_NATURE_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=OPERATION_NATURE_LAB, Rank=331, ScriptDef="open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
			@aaa:scpt (value="open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
		
		/* OPERATION_NATURE_LAB */ 
		OPERATION_NATURE_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=OPERATION_NATURE_LABEL_de) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE_LAB, Rank=331, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE_LAB */ 
		OPERATION_NATURE_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=OPERATION_NATURE_LABEL_en) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE_LAB, Rank=331, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE_LAB */ 
		OPERATION_NATURE_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=OPERATION_NATURE_LABEL_fr) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE_LAB, Rank=331, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE_VAL */ 
		OPERATION_NATURE_VALUE : AAABusinessTypes:Enum 
			@i18n:Label (de=Transaktionsart, en="Operation Nature", fr="Nature de l\'opération") 
			@sql:SQLName (value=OPERATION_NATURE_VALUE) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE_VAL, Rank=330, ScriptDef=open_oper_nat_e) 
			@aaa:scpt (value=open_oper_nat_e) 
		
		/* OPERATION_REF_CODE */ 
		OPERATION_REF_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Referenzierung, en="Ref. Operation Code", fr="Code de l\'opération de réf.") 
			@sql:SQLName (value=OPERATION_REF_CODE) 
			@aaa:TripleA (FormatEltName=OPERATION_REF_CODE, Rank=322, ScriptDef=open_oper_id.ref_oper_code) 
			@aaa:scpt (value=open_oper_id.ref_oper_code) 
		
		/* OPERATION_TYPE_CODE */ 
		OPERATION_TYPE_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Transaktions-Typ, en="Operation Type Code", fr="Code du type d\'opération") 
			@sql:SQLName (value=OPERATION_TYPE_CODE) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_CODE, Rank=300, ScriptDef=open_oper_id.type_id.code) 
			@aaa:scpt (value=open_oper_id.type_id.code) 
		
		/* OPERATION_TYPE_DENOM */ 
		OPERATION_TYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Transkations-Typ, en="Operation Type", fr="Type d\'opération") 
			@sql:SQLName (value=OPERATION_TYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=OPERATION_TYPE_DENOM, Rank=301, ScriptDef="IF( open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.type_id.name )") 
			@aaa:scpt (value="IF( open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.type_id.name )") 
		
		/* OPERATION_TYPE_DENOM */ 
		OPERATION_TYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPERATION_TYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_DENOM, Rank=301, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_TYPE_DENOM */ 
		OPERATION_TYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPERATION_TYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_DENOM, Rank=301, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_TYPE_DENOM */ 
		OPERATION_TYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPERATION_TYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_DENOM, Rank=301, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_TYPE_ID */ 
		OPERATION_TYPE_ID : AAABusinessTypes:Id 
			@i18n:Label (de=Transaktions-Typ, en="Operation Type Identifier", fr="Identifiant du type d\'opération") 
			@sql:SQLName (value=OPERATION_TYPE_ID) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_ID, Rank=299, ScriptDef=open_oper_id.type_id) 
			@aaa:scpt (value=open_oper_id.type_id) 
		
		/* PORTFOLIO_CODE */ 
		PORTFOLIO_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Portfolio-Code, en="Portfolio Code", fr="Code du portefeuille") 
			@sql:SQLName (value=PORTFOLIO_CODE) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CODE, Rank=266, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.code, portfolio_id.code )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.code, portfolio_id.code )") 
		
		/* PORTFOLIO_CURRENCY */ 
		PORTFOLIO_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=PORTFOLIO_CURRENCY) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CURRENCY, Rank=311, ScriptDef="IF( child_ptf_id <> NULL, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", child_ptf_id.currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, child_ptf_id.currency_id.code ), {ELSE} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", portfolio_id.currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, portfolio_id.currency_id.code ) )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", child_ptf_id.currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, child_ptf_id.currency_id.code ), {ELSE} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", portfolio_id.currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, portfolio_id.currency_id.code ) )") 
		
		/* PORTFOLIO_FULL_NAME */ 
		PORTFOLIO_FULL_NAME : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_FULL_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_FULL_NAME, Rank=268, ScriptDef="IF( child_ptf_id <> NULL, IF( child_ptf_id.denom <> NULL, child_ptf_id.denom, child_ptf_id.name ), IF( portfolio_id.denom <> NULL, portfolio_id.denom, portfolio_id.name ) )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, IF( child_ptf_id.denom <> NULL, child_ptf_id.denom, child_ptf_id.name ), IF( portfolio_id.denom <> NULL, portfolio_id.denom, portfolio_id.name ) )") 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=2, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id, portfolio_id)") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id, portfolio_id)") 
		
		/* PORTFOLIO_NAME */ 
		PORTFOLIO_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_NAME, Rank=267, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.name, portfolio_id.name )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.name, portfolio_id.name )") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Portfoliotyp, en="Portfolio Type", fr="Type de portefeuille") 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=275, ScriptDef="IF(child_ptf_id <> NULL, child_ptf_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom)") 
			@aaa:scpt (value="IF(child_ptf_id <> NULL, child_ptf_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom)") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=275, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=275, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=275, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POS_CURRENCY */ 
		POS_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=POS_CURRENCY) 
			@aaa:TripleA (FormatEltName=POS_CURRENCY, Rank=200, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\",pos_currency_id,GET_APPL_PARAM(\"DS_CURRENCY_CODE\"),1).code, {ELSE} pos_currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\",pos_currency_id,GET_APPL_PARAM(\"DS_CURRENCY_CODE\"),1).code, {ELSE} pos_currency_id.code )") 
		
		/* POS_FILTER */ 
		POS_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=POS_FILTER) 
			@aaa:TripleA (FormatEltName=POS_FILTER, Rank=32, ScriptDef="{This format element is used to extract operations related to initial positions} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial Position} AND pos_nat_e = 1 {Main Position}") 
			@aaa:scpt (value="{This format element is used to extract operations related to initial positions} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial Position} AND pos_nat_e = 1 {Main Position}") 
		
		/* POSITION_NATURE_LABE */ 
		POSITION_NATURE_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Positionsart, en="Position Nature", fr="Nature de la position") 
			@sql:SQLName (value=POSITION_NATURE_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=POSITION_NATURE_LABE, Rank=461, ScriptDef="pos_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
			@aaa:scpt (value="pos_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
		
		/* POSITION_NATURE_LABE */ 
		POSITION_NATURE_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_NATURE_LABEL_de) 
			@aaa:TripleA (FormatEltName=POSITION_NATURE_LABE, Rank=461, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POSITION_NATURE_LABE */ 
		POSITION_NATURE_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_NATURE_LABEL_en) 
			@aaa:TripleA (FormatEltName=POSITION_NATURE_LABE, Rank=461, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POSITION_NATURE_LABE */ 
		POSITION_NATURE_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_NATURE_LABEL_fr) 
			@aaa:TripleA (FormatEltName=POSITION_NATURE_LABE, Rank=461, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PRICE */ 
		PRICE : AAABusinessTypes:Number 
			@i18n:Label (de=Preis, en=Price, fr=Prix) 
			@sql:SQLName (value=PRICE) 
			@aaa:TripleA (FormatEltName=PRICE, Rank=350, ScriptDef="{This format element displays the price of the instrument in the operation.} {---------------------------------------------------------} IF( pos_nat_e = 1 {Main Position}, ABS(quote_n), IF( pos_nat_e = 17 {To Instrument Position} AND @CASHVIEW_FILTER = 1, 1, IF( pos_nat_e = 17 {To Instrument Position}, ABS(instr_ext_pos_id.quote_n), {ELSE} ABS(main_ext_pos_id.quote_n) ) ) )") 
			@aaa:scpt (value="{This format element displays the price of the instrument in the operation.} {---------------------------------------------------------} IF( pos_nat_e = 1 {Main Position}, ABS(quote_n), IF( pos_nat_e = 17 {To Instrument Position} AND @CASHVIEW_FILTER = 1, 1, IF( pos_nat_e = 17 {To Instrument Position}, ABS(instr_ext_pos_id.quote_n), {ELSE} ABS(main_ext_pos_id.quote_n) ) ) )") 
		
		/* PRICE_DEFINITION_CUR */ 
		PRICE_DEFINITION_CURR : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=PRICE_DEFINITION_CURR) 
			@aaa:TripleA (FormatEltName=PRICE_DEFINITION_CUR, Rank=352, ScriptDef="{This format element displays the quotation currency of the instrument used in the operation.} {--------------------------------------------------------} IF( open_oper_id.instr_id <> NULL AND open_oper_id.instr_id.nature_e IN (2, 18, 19) {Instrument is a bond, an option bond or a convertible bond}, NULL, @POS_CURRENCY )") 
			@aaa:scpt (value="{This format element displays the quotation currency of the instrument used in the operation.} {--------------------------------------------------------} IF( open_oper_id.instr_id <> NULL AND open_oper_id.instr_id.nature_e IN (2, 18, 19) {Instrument is a bond, an option bond or a convertible bond}, NULL, @POS_CURRENCY )") 
		
		/* PRICE_DEFINITION_PER */ 
		PRICE_DEFINITION_PERCENT : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=PRICE_DEFINITION_PERCENT) 
			@aaa:TripleA (FormatEltName=PRICE_DEFINITION_PER, Rank=351, ScriptDef="{This format element displays the quotation symbol of bonds and equivalent used in the operation.} {--------------------------------------------------------} IF( open_oper_id.instr_id <> NULL AND open_oper_id.instr_id.nature_e IN (2, 18, 19) {Instrument is a bond, an option bond or a convertible bond}, \"%\", NULL )") 
			@aaa:scpt (value="{This format element displays the quotation symbol of bonds and equivalent used in the operation.} {--------------------------------------------------------} IF( open_oper_id.instr_id <> NULL AND open_oper_id.instr_id.nature_e IN (2, 18, 19) {Instrument is a bond, an option bond or a convertible bond}, \"%\", NULL )") 
		
		/* PTF_HIER_STRING */ 
		PTF_HIER_STRING : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en=Hierarchy, fr="Hiérarchie") 
			@sql:SQLName (value=PTF_HIER_STRING) 
			@aaa:TripleA (FormatEltName=PTF_HIER_STRING, Rank=269, ScriptDef="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {----------------------------------------------------} IF( DOMAIN().port_cons_rule_e IN (1, 6), @HIERARCHY_HEAD, IF( portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\",portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ) )") 
			@aaa:scpt (value="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {----------------------------------------------------} IF( DOMAIN().port_cons_rule_e IN (1, 6), @HIERARCHY_HEAD, IF( portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\",portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ) )") 
		
		/* QUANTITY */ 
		QUANTITY : AAABusinessTypes:Number 
			@i18n:Label (de=Menge, en=Quantity, fr="Quantité") 
			@sql:SQLName (value=QUANTITY) 
			@aaa:TripleA (FormatEltName=QUANTITY, Rank=340, ScriptDef="{This format element displays the quantity of instrument defined in the operation. As some instruments are in fact submitted to contract size (options, futures, ...), it is important not to forget to divide the quantity returned by the system with the contract size. Reversals must also be taken into account.} {--------------------------------------------------------------------------------------------------------} IF ( main_ext_pos_id = NULL, ABS(quantity_n/@CONTRACT_SIZE), ABS(main_ext_pos_id.quantity_n/@CONTRACT_SIZE) )") 
			@aaa:scpt (value="{This format element displays the quantity of instrument defined in the operation. As some instruments are in fact submitted to contract size (options, futures, ...), it is important not to forget to divide the quantity returned by the system with the contract size. Reversals must also be taken into account.} {--------------------------------------------------------------------------------------------------------} IF ( main_ext_pos_id = NULL, ABS(quantity_n/@CONTRACT_SIZE), ABS(main_ext_pos_id.quantity_n/@CONTRACT_SIZE) )") 
		
		/* QUANTITY_CURR */ 
		QUANTITY_CURR : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=QUANTITY_CURR) 
			@aaa:TripleA (FormatEltName=QUANTITY_CURR, Rank=341, ScriptDef="{This format element displays the reference currency for bonds and equivalent used in the operation.} {--------------------------------------------------------} IF( open_oper_id.instr_id.nature_e IN (2, 4, 5, 18, 19) {instrument is a bond, a cash account, a money market, an option bond or a convertible bond}, IF(GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL,SYNONYM(\"currency\",open_oper_id.instr_id.ref_curr_id,GET_APPL_PARAM(\"DS_CURRENCY_CODE\"),1).code,open_oper_id.instr_id.ref_curr_id.code), {ELSE} IF( open_oper_id.instr_id = NULL, @POS_CURRENCY, {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the reference currency for bonds and equivalent used in the operation.} {--------------------------------------------------------} IF( open_oper_id.instr_id.nature_e IN (2, 4, 5, 18, 19) {instrument is a bond, a cash account, a money market, an option bond or a convertible bond}, IF(GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL,SYNONYM(\"currency\",open_oper_id.instr_id.ref_curr_id,GET_APPL_PARAM(\"DS_CURRENCY_CODE\"),1).code,open_oper_id.instr_id.ref_curr_id.code), {ELSE} IF( open_oper_id.instr_id = NULL, @POS_CURRENCY, {ELSE} NULL ) )") 
		
		/* REF_CURRENCY */ 
		REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=REF_CURRENCY, Rank=310, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} ref_currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} ref_currency_id.code )") 
		
		/* REVERSAL_LABEL */ 
		REVERSAL_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Stornierung, en=Reversal, fr=Extourne) 
			@sql:SQLName (value=REVERSAL_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=REVERSAL_LABEL, Rank=455, ScriptDef="{This format element indicates if the operation is reversed, if it is the reverse of a reversed one or if it is just a single operation. The available values are: - Reverse: the operation is the reverse of a reversed operation - Reversed: the operation is reversed (cancelled) and another one with opposite signs is create (the reverse operation) } {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 0 {reverse nature is <None>}, NULL, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()] )") 
			@aaa:scpt (value="{This format element indicates if the operation is reversed, if it is the reverse of a reversed one or if it is just a single operation. The available values are: - Reverse: the operation is the reverse of a reversed operation - Reversed: the operation is reversed (cancelled) and another one with opposite signs is create (the reverse operation) } {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 0 {reverse nature is <None>}, NULL, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()] )") 
		
		/* REVERSAL_LABEL */ 
		REVERSAL_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=REVERSAL_LABEL_de) 
			@aaa:TripleA (FormatEltName=REVERSAL_LABEL, Rank=455, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REVERSAL_LABEL */ 
		REVERSAL_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=REVERSAL_LABEL_en) 
			@aaa:TripleA (FormatEltName=REVERSAL_LABEL, Rank=455, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REVERSAL_LABEL */ 
		REVERSAL_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=REVERSAL_LABEL_fr) 
			@aaa:TripleA (FormatEltName=REVERSAL_LABEL, Rank=455, ScriptDef) 
			@aaa:scpt (value) 
		
		/* SELL_FILTER */ 
		SELL_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=SELL_FILTER) 
			@aaa:TripleA (FormatEltName=SELL_FILTER, Rank=37, ScriptDef="@TRANSVIEW_FILTER = 1 {Transaction} AND open_oper_nat_e = 2 {Sell operation}") 
			@aaa:scpt (value="@TRANSVIEW_FILTER = 1 {Transaction} AND open_oper_nat_e = 2 {Sell operation}") 
		
		/* SELL_NET_AMT_REF_CUR */ 
		SELL_NET_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Netto Verkaufsbetrag (Ref. Währung)", en="Sell Net Amount (Ref. Ccy.)", fr="Montant net de la vente (devise de réf.)") 
			@sql:SQLName (value=SELL_NET_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=SELL_NET_AMT_REF_CUR, Rank=425, ScriptDef="{This format element displays the net amount of a sell operation in the domain currency} {----------------------------------------------} IF( @SELL_FILTER = 1, -ref_net_amount_m )") 
			@aaa:scpt (value="{This format element displays the net amount of a sell operation in the domain currency} {----------------------------------------------} IF( @SELL_FILTER = 1, -ref_net_amount_m )") 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
		
		/* SERVER_FILTER */ 
		SERVER_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=SERVER_FILTER) 
			@aaa:TripleA (FormatEltName=SERVER_FILTER, Rank=34, ScriptDef="{This format element is used as a filter for the format to define the data which are going to be transmitted to UDP and available for display in the WUI} {------------------------------------------------------------} @CASHVIEW_FILTER = 1 OR @TRANSVIEW_FILTER = 1 OR @POS_FILTER = 1") 
			@aaa:scpt (value="{This format element is used as a filter for the format to define the data which are going to be transmitted to UDP and available for display in the WUI} {------------------------------------------------------------} @CASHVIEW_FILTER = 1 OR @TRANSVIEW_FILTER = 1 OR @POS_FILTER = 1") 
		
		/* SIGNED_QUANTITY */ 
		SIGNED_QUANTITY : AAABusinessTypes:Number 
			@i18n:Label (de=Menge, en=Quantity, fr="Quantité") 
			@sql:SQLName (value=SIGNED_QUANTITY) 
			@aaa:TripleA (FormatEltName=SIGNED_QUANTITY, Rank=339, ScriptDef="{This format element displays the quantity with sign of instrument defined in the operation. As some instruments are in fact submitted to contract size (options, futures, ...), it is important not to forget to divide the quantity returned by the system with the contract size. Reversals must also be taken into account.} {--------------------------------------------------------------------------------------------------------} IF ( main_ext_pos_id = NULL, quantity_n/@CONTRACT_SIZE, main_ext_pos_id.quantity_n/@CONTRACT_SIZE )") 
			@aaa:scpt (value="{This format element displays the quantity with sign of instrument defined in the operation. As some instruments are in fact submitted to contract size (options, futures, ...), it is important not to forget to divide the quantity returned by the system with the contract size. Reversals must also be taken into account.} {--------------------------------------------------------------------------------------------------------} IF ( main_ext_pos_id = NULL, quantity_n/@CONTRACT_SIZE, main_ext_pos_id.quantity_n/@CONTRACT_SIZE )") 
		
		/* STATUS_LABEL */ 
		STATUS_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Status, en=Status, fr=Statut) 
			@sql:SQLName (value=STATUS_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=STATUS_LABEL, Rank=451, ScriptDef="status_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
			@aaa:scpt (value="status_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
		
		/* STATUS_LABEL */ 
		STATUS_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=STATUS_LABEL_de) 
			@aaa:TripleA (FormatEltName=STATUS_LABEL, Rank=451, ScriptDef) 
			@aaa:scpt (value) 
		
		/* STATUS_LABEL */ 
		STATUS_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=STATUS_LABEL_en) 
			@aaa:TripleA (FormatEltName=STATUS_LABEL, Rank=451, ScriptDef) 
			@aaa:scpt (value) 
		
		/* STATUS_LABEL */ 
		STATUS_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=STATUS_LABEL_fr) 
			@aaa:TripleA (FormatEltName=STATUS_LABEL, Rank=451, ScriptDef) 
			@aaa:scpt (value) 
		
		/* SUMMARY_FILTER */ 
		SUMMARY_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=SUMMARY_FILTER) 
			@aaa:TripleA (FormatEltName=SUMMARY_FILTER, Rank=33, ScriptDef="{This format element is used to extract only 1 row per portfolio of the portfolio hierarchy. It is necessary to be sure that the string to build the hierarchy in the WUI is unique when no aggregations are requested} {----------------------------------------------------------} IF( @first_operation_id = id, 1, 0 )") 
			@aaa:scpt (value="{This format element is used to extract only 1 row per portfolio of the portfolio hierarchy. It is necessary to be sure that the string to build the hierarchy in the WUI is unique when no aggregations are requested} {----------------------------------------------------------} IF( @first_operation_id = id, 1, 0 )") 
		
		/* TRANSACTION_NATURE */ 
		TRANSACTION_NATURE : AAABusinessTypes:Int 
			@i18n:Label (de=Transaktionsart, en="Transaction Nature", fr="Nature de transaction") 
			@sql:SQLName (value=TRANSACTION_NATURE) 
			@aaa:TripleA (FormatEltName=TRANSACTION_NATURE, Rank=141, ScriptDef="instr_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_ORDER\")].rank_n") 
			@aaa:scpt (value="instr_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_ORDER\")].rank_n") 
		
		/* TRANSVIEW_FILTER */ 
		TRANSVIEW_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=TRANSVIEW_FILTER) 
			@aaa:TripleA (FormatEltName=TRANSVIEW_FILTER, Rank=31, ScriptDef="{This format element is used to extract operations related to security transactions} {-------------------------------------------} {We load the extended position representing the position keeping of the operation whatever the nature of the asset (security, money market, cash,...) and the nature of the operation} (nature_e = 2 {Flow operation} AND (main_f = 1 {Main operation} OR (main_f=0 AND pos_nat_e IN (17) {portfolio transfer with portfolio=to portfolio})))") 
			@aaa:scpt (value="{This format element is used to extract operations related to security transactions} {-------------------------------------------} {We load the extended position representing the position keeping of the operation whatever the nature of the asset (security, money market, cash,...) and the nature of the operation} (nature_e = 2 {Flow operation} AND (main_f = 1 {Main operation} OR (main_f=0 AND pos_nat_e IN (17) {portfolio transfer with portfolio=to portfolio})))") 
		
		/* UNDERLYING_INSTR_CD */ 
		UNDERLYING_INSTR_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Basispapier-Code, en="Underlying Code", fr="Code du sous-jacent") 
			@sql:SQLName (value=UNDERLYING_INSTR_CODE) 
			@aaa:TripleA (FormatEltName=UNDERLYING_INSTR_CD, Rank=453, ScriptDef=open_oper_id.instr_id.code) 
			@aaa:scpt (value=open_oper_id.instr_id.code) 
		
		/* UNDERLYING_INSTR_DEN */ 
		UNDERLYING_INSTR_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Basispapier, en=Underlying, fr=Sous-jacent) 
			@sql:SQLName (value=UNDERLYING_INSTR_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=UNDERLYING_INSTR_DEN, Rank=452, ScriptDef="IF( open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.instr_id.name )") 
			@aaa:scpt (value="IF( open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.instr_id.name )") 
		
		/* UNDERLYING_INSTR_DEN */ 
		UNDERLYING_INSTR_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=UNDERLYING_INSTR_DENOM_de) 
			@aaa:TripleA (FormatEltName=UNDERLYING_INSTR_DEN, Rank=452, ScriptDef) 
			@aaa:scpt (value) 
		
		/* UNDERLYING_INSTR_DEN */ 
		UNDERLYING_INSTR_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=UNDERLYING_INSTR_DENOM_en) 
			@aaa:TripleA (FormatEltName=UNDERLYING_INSTR_DEN, Rank=452, ScriptDef) 
			@aaa:scpt (value) 
		
		/* UNDERLYING_INSTR_DEN */ 
		UNDERLYING_INSTR_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=UNDERLYING_INSTR_DENOM_fr) 
			@aaa:TripleA (FormatEltName=UNDERLYING_INSTR_DEN, Rank=452, ScriptDef) 
			@aaa:scpt (value) 
		
		/* VALUE_DATE */ 
		VALUE_DATE : AAABusinessTypes:Datetime 
			@i18n:Label (de=Valutadatum, en="Value Date", fr="Date de valeur") 
			@sql:SQLName (value=VALUE_DATE) 
			@aaa:TripleA (FormatEltName=VALUE_DATE, Rank=441, ScriptDef=value_d) 
			@aaa:scpt (value=value_d) 
		
		/* WITHDR_FILTER */ 
		WITHDR_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=WITHDR_FILTER) 
			@aaa:TripleA (FormatEltName=WITHDR_FILTER, Rank=39, ScriptDef="@TRANSVIEW_FILTER = 1 {Transaction} AND open_oper_nat_e = 5 {Withdrawal operation}") 
			@aaa:scpt (value="@TRANSVIEW_FILTER = 1 {Transaction} AND open_oper_nat_e = 5 {Withdrawal operation}") 
	} 
	/* PCK_DS_OPHIST_SUM */ 
	PCK_DS_OPHIST_SUM 
		@aaa:FormatColumnFilter (value=SERVER_FILTER) 
		@aaa:FormatFunction (value="Operation History") 
		@sql:SQLName (value=PCK_DS_OPHIST_SUM) 
		@aaa:TripleA (ColumnFilter=SERVER_FILTER, EntitySQLName=extended_pos, FinFuncName="Operation History", FinFuncProcName=op_hist, FormatName=PCK_DS_OPHIST_SUM) 
	{ 
		/* account_id */ 
		account_id : AAABusinessTypes:Id 
			@sql:SQLName (value=account_id) 
			@aaa:TripleA (FormatEltName=account_id, Rank=7, ScriptDef="IF( instr_id.nature_e = 4, instr_id, NULL)") 
			@aaa:scpt (value="IF( instr_id.nature_e = 4, instr_id, NULL)") 
		
		/* ADMIN_MGR_NAME */ 
		ADMIN_MGR_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Vermögensverwalter", en=Manager, fr=Gestionnaire) 
			@sql:SQLName (value=ADMIN_MGR_NAME) 
			@aaa:TripleA (FormatEltName=ADMIN_MGR_NAME, Rank=810, ScriptDef="IF(child_ptf_id<>NULL, child_ptf_id.admin_mgr_id.name, {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).admin_mgr_id.name, {else} portfolio_id.admin_mgr_id.name))") 
			@aaa:scpt (value="IF(child_ptf_id<>NULL, child_ptf_id.admin_mgr_id.name, {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).admin_mgr_id.name, {else} portfolio_id.admin_mgr_id.name))") 
		
		/* ADV_PTF_TURN_OVER */ 
		ADV_PTF_TURN_OVER : AAABusinessTypes:Number 
			@i18n:Label (de=Umsatz, en="Advanced Turn-over", fr="Turn-over évolué") 
			@sql:SQLName (value=ADV_PTF_TURN_OVER) 
			@aaa:TripleA (FormatEltName=ADV_PTF_TURN_OVER, Rank=259, ScriptDef="{This format element computes the turn-over, using an advanced method. With this method, the turn-over is calculated as following: Advanced Turn-Over = [ ABS( SUM(net amount of security buy) ) + ABS( SUM(net amount of security sell) ) ] / [ SUM(initial cost values) + SUM(time pondered net amount of cash investment) - SUM(time pondered net amount of cash withdrawal) ] The time pondered net amount is the net amount multiplied by a ponderation factor based on the From Date and Till Date of the context (domain) and the operation execution (operation) date. With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this factor is calculated as following: Ponderation factor = [ TD - ED ] / [ TD - FD ] This ponderation factor gives more importance of cash investments and withdrawals which have occured at the beginning of the period covered by the From Date and Till Date of the context. Remarks: The SUM of time pondered net amounts is already computed in the format elements TOT_AMT_PONDERED_INVEST_CASH and TOT_AMT_PONDERED_WITHDR_CASH.} {------------------------------------------------------} IF( @TOT_AMT_COST_VALUE = 0 {Impossible to compute turn-over}, NULL, {ELSE} ( @TOT_AMT_BUY_SECURITY + @TOT_AMT_SELL_SECURITY ) / ( @TOT_AMT_COST_VALUE + @TOT_AMT_PONDERED_INVEST_CASH - @TOT_AMT_PONDERED_WITHDR_CASH ) )") 
			@aaa:scpt (value="{This format element computes the turn-over, using an advanced method. With this method, the turn-over is calculated as following: Advanced Turn-Over = [ ABS( SUM(net amount of security buy) ) + ABS( SUM(net amount of security sell) ) ] / [ SUM(initial cost values) + SUM(time pondered net amount of cash investment) - SUM(time pondered net amount of cash withdrawal) ] The time pondered net amount is the net amount multiplied by a ponderation factor based on the From Date and Till Date of the context (domain) and the operation execution (operation) date. With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this factor is calculated as following: Ponderation factor = [ TD - ED ] / [ TD - FD ] This ponderation factor gives more importance of cash investments and withdrawals which have occured at the beginning of the period covered by the From Date and Till Date of the context. Remarks: The SUM of time pondered net amounts is already computed in the format elements TOT_AMT_PONDERED_INVEST_CASH and TOT_AMT_PONDERED_WITHDR_CASH.} {------------------------------------------------------} IF( @TOT_AMT_COST_VALUE = 0 {Impossible to compute turn-over}, NULL, {ELSE} ( @TOT_AMT_BUY_SECURITY + @TOT_AMT_SELL_SECURITY ) / ( @TOT_AMT_COST_VALUE + @TOT_AMT_PONDERED_INVEST_CASH - @TOT_AMT_PONDERED_WITHDR_CASH ) )") 
		
		/* BASIC_PTF_TURN_OVER */ 
		BASIC_PTF_TURN_OVER : AAABusinessTypes:Number 
			@i18n:Label (de=Umsatz, en="Basic Turn-over", fr="Turn-over de base") 
			@sql:SQLName (value=BASIC_PTF_TURN_OVER) 
			@aaa:TripleA (FormatEltName=BASIC_PTF_TURN_OVER, Rank=258, ScriptDef="{This format element computes the turn-over, using a basic method. With this method, the turn-over is calculated as following: Basic Turn-Over = [ ABS( SUM(net amount of security buy) ) + ABS( SUM(net amount of security sell) ) ] / [ SUM(initial cost values) + SUM(net amount of cash investment) - SUM(net amount of cash withdrawal) ] } {------------------------------------------------------} IF( @TOT_AMT_COST_VALUE = 0 {Impossible to compute turn-over}, NULL, {ELSE} ( @TOT_AMT_BUY_SECURITY + @TOT_AMT_SELL_SECURITY ) / ( @TOT_AMT_COST_VALUE + @TOT_AMT_INVEST_CASH - @TOT_AMT_WITHDR_CASH ) )") 
			@aaa:scpt (value="{This format element computes the turn-over, using a basic method. With this method, the turn-over is calculated as following: Basic Turn-Over = [ ABS( SUM(net amount of security buy) ) + ABS( SUM(net amount of security sell) ) ] / [ SUM(initial cost values) + SUM(net amount of cash investment) - SUM(net amount of cash withdrawal) ] } {------------------------------------------------------} IF( @TOT_AMT_COST_VALUE = 0 {Impossible to compute turn-over}, NULL, {ELSE} ( @TOT_AMT_BUY_SECURITY + @TOT_AMT_SELL_SECURITY ) / ( @TOT_AMT_COST_VALUE + @TOT_AMT_INVEST_CASH - @TOT_AMT_WITHDR_CASH ) )") 
		
		/* CASHVIEW_FILTER */ 
		CASHVIEW_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=CASHVIEW_FILTER) 
			@aaa:TripleA (FormatEltName=CASHVIEW_FILTER, Rank=30, ScriptDef="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 2 AND bal_pos_type_id = NULL AND (pos_nat_e IN (6,7,8) OR instr_id.nature_e IN (4))") 
			@aaa:scpt (value="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 2 AND bal_pos_type_id = NULL AND (pos_nat_e IN (6,7,8) OR instr_id.nature_e IN (4))") 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=4, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.third_id, portfolio_id.third_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.third_id, portfolio_id.third_id )") 
		
		/* CLIENT_NAME */ 
		CLIENT_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Name des Kunden", en="Client Name", fr="Nom du client") 
			@sql:SQLName (value=CLIENT_NAME) 
			@aaa:TripleA (FormatEltName=CLIENT_NAME, Rank=60, ScriptDef="IF (DOMAIN().dim_port_dict_id = 600, IF(child_ptf_id<>NULL, child_ptf_id.third_id.name, portfolio_id.third_id.name), {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).third_id.name, {else} IF(child_ptf_id<>NULL, child_ptf_id.third_id.name, portfolio_id.third_id.name)))") 
			@aaa:scpt (value="IF (DOMAIN().dim_port_dict_id = 600, IF(child_ptf_id<>NULL, child_ptf_id.third_id.name, portfolio_id.third_id.name), {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).third_id.name, {else} IF(child_ptf_id<>NULL, child_ptf_id.third_id.name, portfolio_id.third_id.name)))") 
		
		/* COM_MGR_NAME */ 
		COM_MGR_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Kundenberater, en=Advisor, fr=Conseiller) 
			@sql:SQLName (value=COM_MGR_NAME) 
			@aaa:TripleA (FormatEltName=COM_MGR_NAME, Rank=800, ScriptDef="IF(child_ptf_id<>NULL, child_ptf_id.comm_mgr_id.name, {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).comm_mgr_id.name, {else} portfolio_id.comm_mgr_id.name))") 
			@aaa:scpt (value="IF(child_ptf_id<>NULL, child_ptf_id.comm_mgr_id.name, {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).comm_mgr_id.name, {else} portfolio_id.comm_mgr_id.name))") 
		
		/* data_secu_prof_id */ 
		data_secu_prof_id : AAABusinessTypes:Id 
			@sql:SQLName (value=data_secu_prof_id) 
			@aaa:TripleA (FormatEltName=data_secu_prof_id, Rank=1, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} IF( child_ptf_id <> NULL, child_ptf_id.data_secu_prof_id, portfolio_id.data_secu_prof_id ))") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} IF( child_ptf_id <> NULL, child_ptf_id.data_secu_prof_id, portfolio_id.data_secu_prof_id ))") 
		
		/* domain_client_id */ 
		domain_client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=domain_client_id) 
			@aaa:TripleA (FormatEltName=domain_client_id, Rank=3000, ScriptDef="IF(DOMAIN().dim_port_dict_id=600 AND DOMAIN().third_compo_e<>1 ,DOMAIN().port_object_id,NULL)") 
			@aaa:scpt (value="IF(DOMAIN().dim_port_dict_id=600 AND DOMAIN().third_compo_e<>1 ,DOMAIN().port_object_id,NULL)") 
		
		/* expiration_d */ 
		expiration_d : AAABusinessTypes:Datetime 
			@sql:SQLName (value=expiration_d) 
			@aaa:TripleA (FormatEltName=expiration_d, Rank=2000, ScriptDef=expiration_d) 
			@aaa:scpt (value=expiration_d) 
		
		/* first_operation_id */ 
		first_operation_id : AAABusinessTypes:Id 
			@sql:SQLName (value=first_operation_id) 
			@aaa:TripleA (FormatEltName=first_operation_id, Rank=8, ScriptDef="{This format element displays the first identifier of a security transaction. If no security transactions exists, then the NULL value is returned. The filter to extract the first identifier is exactly the same as the one used in the format element TRANSVIEW_FILTER.} {------------------------------------------------------} TOT_FIRST( id, (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation}) OR (nature_e = 2 {Flow operation} AND open_oper_id.instr_id.nature_e = 4 {related instrument is a Cash Account} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND open_oper_id.instr_id = instr_id {to select only the main operation} AND CLASSIFY( GET_ENTITY(\"extended_pos\"), id, \"PCK_DS_OPER_CLASS\").rank_n = 5 {operations related to buy/sell of cash}) , nature_e, @portfolio_id )") 
			@aaa:scpt (value="{This format element displays the first identifier of a security transaction. If no security transactions exists, then the NULL value is returned. The filter to extract the first identifier is exactly the same as the one used in the format element TRANSVIEW_FILTER.} {------------------------------------------------------} TOT_FIRST( id, (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation}) OR (nature_e = 2 {Flow operation} AND open_oper_id.instr_id.nature_e = 4 {related instrument is a Cash Account} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND open_oper_id.instr_id = instr_id {to select only the main operation} AND CLASSIFY( GET_ENTITY(\"extended_pos\"), id, \"PCK_DS_OPER_CLASS\").rank_n = 5 {operations related to buy/sell of cash}) , nature_e, @portfolio_id )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hierarchy Head", fr="Tête de la hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_de : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_de) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef) 
			@aaa:scpt (value) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_en : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_en) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef) 
			@aaa:scpt (value) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_fr : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_fr) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef) 
			@aaa:scpt (value) 
		
		/* id */ 
		id : AAABusinessTypes:Id 
			@sql:SQLName (value=id) 
			@aaa:TripleA (FormatEltName=id, Rank=5, ScriptDef=id) 
			@aaa:scpt (value=id) 
		
		/* INSTR_CODE */ 
		INSTR_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Instrument, en="Instrument Code", fr="Code de l\'instrument") 
			@sql:SQLName (value=INSTR_CODE) 
			@aaa:TripleA (FormatEltName=INSTR_CODE, Rank=290, ScriptDef=open_oper_id.instr_id.code) 
			@aaa:scpt (value=open_oper_id.instr_id.code) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM : AAABusinessTypes:UniNote 
			@i18n:Label (de=Instrument, en=Instrument, fr=Instrument) 
			@sql:SQLName (value=INSTR_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=INSTR_DENOM, Rank=500, ScriptDef="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
			@aaa:scpt (value="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_de : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_de) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_en : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_en) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_fr : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_fr) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* instr_id */ 
		instr_id : AAABusinessTypes:Id 
			@sql:SQLName (value=instr_id) 
			@aaa:TripleA (FormatEltName=instr_id, Rank=13, ScriptDef="IF( @OPERATION_CLASS_RANK IN (1, 5, 20, 25, 30, 35, 45, 50, 55, 60, 65, 70), open_oper_id.instr_id, instr_id )") 
			@aaa:scpt (value="IF( @OPERATION_CLASS_RANK IN (1, 5, 20, 25, 30, 35, 45, 50, 55, 60, 65, 70), open_oper_id.instr_id, instr_id )") 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=3, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.comm_mgr_id, portfolio_id.comm_mgr_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.comm_mgr_id, portfolio_id.comm_mgr_id )") 
		
		/* NB_TRANSACTION */ 
		NB_TRANSACTION : AAABusinessTypes:Int 
			@i18n:Label (de="Anzahl Transaktionen", en="No of Transactions", fr="Nb de transactions") 
			@sql:SQLName (value=NB_TRANSACTION) 
			@aaa:TripleA (FormatEltName=NB_TRANSACTION, Rank=199, ScriptDef="{This format element calculates, for each portfolio (in hierarchy or not), the number of transactions.} {--------------------------------------------} 1 * TOT_SUM( 1, @TRANSVIEW_FILTER, @portfolio_id)") 
			@aaa:scpt (value="{This format element calculates, for each portfolio (in hierarchy or not), the number of transactions.} {--------------------------------------------} 1 * TOT_SUM( 1, @TRANSVIEW_FILTER, @portfolio_id)") 
		
		/* NET_AMOUNT_OPER_CURR */ 
		NET_AMOUNT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Op. Währung)", en="Net Amount (Op. Ccy.)", fr="Montant net (devise de l\'op.)") 
			@sql:SQLName (value=NET_AMOUNT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=NET_AMOUNT_OPER_CURR, Rank=51, ScriptDef="{This format element displays the net amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_net_amount_m), ABS(pos_net_amount_m) )") 
			@aaa:scpt (value="{This format element displays the net amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_net_amount_m), ABS(pos_net_amount_m) )") 
		
		/* NET_AMOUNT_REF_CURR */ 
		NET_AMOUNT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Ref. Währung)", en="Net Amount (Ref. Ccy.)", fr="Montant net (devise de réf.)") 
			@sql:SQLName (value=NET_AMOUNT_REF_CURR) 
			@aaa:TripleA (FormatEltName=NET_AMOUNT_REF_CURR, Rank=50, ScriptDef="{This format element displays the net amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_net_amount_m), ABS(ref_net_amount_m) )") 
			@aaa:scpt (value="{This format element displays the net amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_net_amount_m), ABS(ref_net_amount_m) )") 
		
		/* OPERATION_CLASS_RANK */ 
		OPERATION_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Klassifikation der Transaktion", en="Operation Classification", fr="Classification de l\'opération") 
			@sql:SQLName (value=OPERATION_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=OPERATION_CLASS_RANK, Rank=12, ScriptDef="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The classification PCK_DS_OPER_CLASS (defined in the packaging parameter DS_CLASSIF_OPER_CLASS) on Extended Position entity is used for the computation. The classification is the following: - Rank 1: Buy of Securities - Rank 2: Sell of Securities - Rank 6: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 11: Buy of Money Markets - Rank 12: Sell of Money Markets - Rank 16: Corporate Actions - Rank 21: Investments of Securities - Rank 22: Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 26: Investments of Cash - Rank 27: Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 28: Investment, Withdrawals, Transfers and Portfolio Transfers of Money Markets - Rank 31: Incomes (Dividends, Coupons, etc...) of instruments, which are not Money Markets - Rank 32: Incomes of Money Markets - Rank 36: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 37: Redemption of Money Markets - Rank 41: Management Fees - Rank 99: Other Operations } {--------------------------------------------------} CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n") 
			@aaa:scpt (value="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The classification PCK_DS_OPER_CLASS (defined in the packaging parameter DS_CLASSIF_OPER_CLASS) on Extended Position entity is used for the computation. The classification is the following: - Rank 1: Buy of Securities - Rank 2: Sell of Securities - Rank 6: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 11: Buy of Money Markets - Rank 12: Sell of Money Markets - Rank 16: Corporate Actions - Rank 21: Investments of Securities - Rank 22: Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 26: Investments of Cash - Rank 27: Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 28: Investment, Withdrawals, Transfers and Portfolio Transfers of Money Markets - Rank 31: Incomes (Dividends, Coupons, etc...) of instruments, which are not Money Markets - Rank 32: Incomes of Money Markets - Rank 36: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 37: Redemption of Money Markets - Rank 41: Management Fees - Rank 99: Other Operations } {--------------------------------------------------} CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n") 
		
		/* OPERATION_DATE */ 
		OPERATION_DATE : AAABusinessTypes:Datetime 
			@i18n:Label (de="Ausführungsdatum", en="Execution Date", fr="Date d\'exécution") 
			@sql:SQLName (value=OPERATION_DATE) 
			@aaa:TripleA (FormatEltName=OPERATION_DATE, Rank=10, ScriptDef=operation_d, SortingRank=3) 
			@aaa:scpt (value=operation_d) 
		
		/* OPERATION_MERGED_CLA */ 
		OPERATION_MERGED_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Klassifikation für gruppierte Transaktionen", en="Operation Merged Classification", fr="Classification regroupée de l\'opération") 
			@sql:SQLName (value=OPERATION_MERGED_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=OPERATION_MERGED_CLA, Rank=35, ScriptDef="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The format OPERATION_CLASS_RANK is used for the computation. The classification is the following: Rank [1;5]:Securities -> 5 Rank [6;10]: Forex->10 Rank [11;15]: Money Market->15 Rank [16;20]: Corporate Action->20 Rank [21;25]: Securities Investment/Withdrawal/Transfer/Portfolio Transfer->25 Rank [26;30]: Cash Investment/Withdrawal/Transfer/Portfolio Transfer->30 Rank [31;35]: Income->35 Rank [36;40]: Redemptions->40 Rank [41;45]: Management Fees ->45 Rank =99: Others->99 } {--------------------------------------------------} IF(@TRANSVIEW_FILTER=1, IF(@OPERATION_CLASS_RANK>=1 AND @OPERATION_CLASS_RANK<=5,5, IF(@OPERATION_CLASS_RANK>5 AND @OPERATION_CLASS_RANK<=10,10, IF(@OPERATION_CLASS_RANK>10 AND @OPERATION_CLASS_RANK<=15,15, IF(@OPERATION_CLASS_RANK>15 AND @OPERATION_CLASS_RANK<=20,20, IF(@OPERATION_CLASS_RANK>20 AND @OPERATION_CLASS_RANK<=25,25, IF(@OPERATION_CLASS_RANK>25 AND @OPERATION_CLASS_RANK<=30,30, IF(@OPERATION_CLASS_RANK>30 AND @OPERATION_CLASS_RANK<=35,35, IF(@OPERATION_CLASS_RANK>35 AND @OPERATION_CLASS_RANK<=40,40, IF(@OPERATION_CLASS_RANK>40 AND @OPERATION_CLASS_RANK<=45,45, IF(@OPERATION_CLASS_RANK=99,99 ) ))))))))),-1)") 
			@aaa:scpt (value="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The format OPERATION_CLASS_RANK is used for the computation. The classification is the following: Rank [1;5]:Securities -> 5 Rank [6;10]: Forex->10 Rank [11;15]: Money Market->15 Rank [16;20]: Corporate Action->20 Rank [21;25]: Securities Investment/Withdrawal/Transfer/Portfolio Transfer->25 Rank [26;30]: Cash Investment/Withdrawal/Transfer/Portfolio Transfer->30 Rank [31;35]: Income->35 Rank [36;40]: Redemptions->40 Rank [41;45]: Management Fees ->45 Rank =99: Others->99 } {--------------------------------------------------} IF(@TRANSVIEW_FILTER=1, IF(@OPERATION_CLASS_RANK>=1 AND @OPERATION_CLASS_RANK<=5,5, IF(@OPERATION_CLASS_RANK>5 AND @OPERATION_CLASS_RANK<=10,10, IF(@OPERATION_CLASS_RANK>10 AND @OPERATION_CLASS_RANK<=15,15, IF(@OPERATION_CLASS_RANK>15 AND @OPERATION_CLASS_RANK<=20,20, IF(@OPERATION_CLASS_RANK>20 AND @OPERATION_CLASS_RANK<=25,25, IF(@OPERATION_CLASS_RANK>25 AND @OPERATION_CLASS_RANK<=30,30, IF(@OPERATION_CLASS_RANK>30 AND @OPERATION_CLASS_RANK<=35,35, IF(@OPERATION_CLASS_RANK>35 AND @OPERATION_CLASS_RANK<=40,40, IF(@OPERATION_CLASS_RANK>40 AND @OPERATION_CLASS_RANK<=45,45, IF(@OPERATION_CLASS_RANK=99,99 ) ))))))))),-1)") 
		
		/* PORTFOLIO_CODE */ 
		PORTFOLIO_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Portfolio-Code, en="Portfolio Code", fr="Code du portefeuille") 
			@sql:SQLName (value=PORTFOLIO_CODE) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CODE, Rank=266, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.code, portfolio_id.code )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.code, portfolio_id.code )") 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=2, ScriptDef="IF( child_ptf_id <> NULL, IF (GET_APPL_PARAM(\"CHILD_IN_PTF_CODE\") =\"1\", child_ptf_id, portfolio_id) , portfolio_id)") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, IF (GET_APPL_PARAM(\"CHILD_IN_PTF_CODE\") =\"1\", child_ptf_id, portfolio_id) , portfolio_id)") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=PORTFOLIO_INVEST_SER, Rank=61, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_de) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=61, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_en) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=61, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_fr) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=61, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_NAME */ 
		PORTFOLIO_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_NAME, Rank=267, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.name, portfolio_id.name )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.name, portfolio_id.name )") 
		
		/* POS_FILTER */ 
		POS_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=POS_FILTER) 
			@aaa:TripleA (FormatEltName=POS_FILTER, Rank=32, ScriptDef="{This format element is used to extract operations related to initial positions} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial Position} AND pos_nat_e = 1 {Main Position}") 
			@aaa:scpt (value="{This format element is used to extract operations related to initial positions} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial Position} AND pos_nat_e = 1 {Main Position}") 
		
		/* PTF_HIER_STRING */ 
		PTF_HIER_STRING : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en=Hierarchy, fr="Hiérarchie") 
			@sql:SQLName (value=PTF_HIER_STRING) 
			@aaa:TripleA (FormatEltName=PTF_HIER_STRING, Rank=269, ScriptDef="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {--------------------------------------------------------------} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
			@aaa:scpt (value="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {--------------------------------------------------------------} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
		
		/* REF_CURRENCY */ 
		REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=REF_CURRENCY, Rank=310, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, ref_currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, ref_currency_id.code )") 
		
		/* REMARKS */ 
		REMARKS : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Bemerkungen, en=Remarks, fr=Remarques) 
			@sql:SQLName (value=REMARKS) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=REMARKS, Rank=260, ScriptDef="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
		
		/* REMARKS */ 
		REMARKS_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=REMARKS_de) 
			@aaa:TripleA (FormatEltName=REMARKS, Rank=260, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REMARKS */ 
		REMARKS_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=REMARKS_en) 
			@aaa:TripleA (FormatEltName=REMARKS, Rank=260, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REMARKS */ 
		REMARKS_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=REMARKS_fr) 
			@aaa:TripleA (FormatEltName=REMARKS, Rank=260, ScriptDef) 
			@aaa:scpt (value) 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
		
		/* SERVER_FILTER */ 
		SERVER_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=SERVER_FILTER) 
			@aaa:TripleA (FormatEltName=SERVER_FILTER, Rank=34, ScriptDef="{This format element is used as a filter for the format to define the data which are going to be transmitted to UDP and available for display in the WUI} {------------------------------------------------------------} @CASHVIEW_FILTER = 1 OR @TRANSVIEW_FILTER = 1 OR @POS_FILTER = 1") 
			@aaa:scpt (value="{This format element is used as a filter for the format to define the data which are going to be transmitted to UDP and available for display in the WUI} {------------------------------------------------------------} @CASHVIEW_FILTER = 1 OR @TRANSVIEW_FILTER = 1 OR @POS_FILTER = 1") 
		
		/* SUMMARY_FILTER */ 
		SUMMARY_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=SUMMARY_FILTER) 
			@aaa:TripleA (FormatEltName=SUMMARY_FILTER, Rank=33, ScriptDef="{This format element is used to extract only 1 row per portfolio of the portfolio hierarchy. It is necessary to be sure that the string to build the hierarchy in the WUI is unique when no aggregations are requested} {----------------------------------------------------------} IF( @first_operation_id = id, 1, 0 )") 
			@aaa:scpt (value="{This format element is used to extract only 1 row per portfolio of the portfolio hierarchy. It is necessary to be sure that the string to build the hierarchy in the WUI is unique when no aggregations are requested} {----------------------------------------------------------} IF( @first_operation_id = id, 1, 0 )") 
		
		/* THIRD_COMP_RULE */ 
		THIRD_COMP_RULE : AAAEnumerations:DomainAAAThirdCompoE 
			@i18n:Label (de=Portfolio-Kunden-Zuordnung, en="Portfolio Link Nature", fr="Nature du lien avec le portefeuille") 
			@sql:SQLName (value=THIRD_COMP_RULE) 
			@aaa:TripleA (AttrSQLName=third_compo_e, FormatEltName=THIRD_COMP_RULE, Rank=3050, ScriptDef="{ --SQLFORMAT case when domain_client_id = NULL then NULL when client_id = domain_client_id then 1 when THIRD_PARTY_OWNERSHIP_RULE != NULL then 2 end }") 
			@aaa:scpt (value="{ --SQLFORMAT case when domain_client_id = NULL then NULL when client_id = domain_client_id then 1 when THIRD_PARTY_OWNERSHIP_RULE != NULL then 2 end }") 
		
		/* THIRD_PARTY_OWNERSHI */ 
		THIRD_PARTY_OWNERSHIP_RULE : AAAEnumerations:PortfolioThirdCompoOwnershipRuleE 
			@i18n:Label (de="Verfügungsgewalt", en="Ownership Rule", fr="Règle de propriété") 
			@sql:SQLName (value=THIRD_PARTY_OWNERSHIP_RULE) 
			@aaa:TripleA (AttrSQLName=ownership_rule_e, FormatEltName=THIRD_PARTY_OWNERSHI, Rank=3030, ScriptDef="{ --SQLFORMAT select max(ownership_rule_e) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
			@aaa:scpt (value="{ --SQLFORMAT select max(ownership_rule_e) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
		
		/* THIRD_PARTY_PERCT_OW */ 
		THIRD_PARTY_PERCT_OWNERSHIP : AAABusinessTypes:Number 
			@i18n:Label (de="Prozentsatz des Eigentums", en="Percentage of Ownership", fr="Pourcentage de la propriété") 
			@sql:SQLName (value=THIRD_PARTY_PERCT_OWNERSHIP) 
			@aaa:TripleA (FormatEltName=THIRD_PARTY_PERCT_OW, Rank=3040, ScriptDef="{ --SQLFORMAT select max(weight_n) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
			@aaa:scpt (value="{ --SQLFORMAT select max(weight_n) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
		
		/* third_party_portfoli */ 
		third_party_portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=third_party_portfolio_id) 
			@aaa:TripleA (FormatEltName=third_party_portfoli, Rank=3010, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
		
		/* TIME_RATIO_FACTOR */ 
		TIME_RATIO_FACTOR : AAABusinessTypes:Number 
			@i18n:Label (de=Zeitanteil, en="Time Ratio", fr="Tantième temporel") 
			@sql:SQLName (value=TIME_RATIO_FACTOR) 
			@aaa:TripleA (FormatEltName=TIME_RATIO_FACTOR, Rank=100, ScriptDef="{This format element computes a ratio based on the execution (operation) date of the operation and the From Date and Till Date of context (domain). } {------------------------------------------------------} DATEDIFF(@OPERATION_DATE, DOMAIN().calc_till_d, DAY) / DATEDIFF(DOMAIN().calc_from_d, DOMAIN().calc_till_d, DAY)") 
			@aaa:scpt (value="{This format element computes a ratio based on the execution (operation) date of the operation and the From Date and Till Date of context (domain). } {------------------------------------------------------} DATEDIFF(@OPERATION_DATE, DOMAIN().calc_till_d, DAY) / DATEDIFF(DOMAIN().calc_from_d, DOMAIN().calc_till_d, DAY)") 
		
		/* TOT_AMT_BUY_MONEY_MA */ 
		TOT_AMT_BUY_MONEY_MARKET : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Käufe Geldmarkt", en="Amount of Money Market Buy", fr="Montant des achats sur le marché monétaire") 
			@sql:SQLName (value=TOT_AMT_BUY_MONEY_MARKET) 
			@aaa:TripleA (FormatEltName=TOT_AMT_BUY_MONEY_MA, Rank=231, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of buy operations related to money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 11, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of buy operations related to money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 11, @portfolio_id )") 
		
		/* TOT_AMT_BUY_SECURITY */ 
		TOT_AMT_BUY_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Käufe", en="Amount of Buys Security", fr="Montant des achats de titre") 
			@sql:SQLName (value=TOT_AMT_BUY_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_AMT_BUY_SECURITY, Rank=226, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security buy.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 1, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security buy.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 1, @portfolio_id )") 
		
		/* TOT_AMT_COST_VALUE */ 
		TOT_AMT_COST_VALUE : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einstandswerte", en="Amount of Initial Values", fr="Montant des valeurs initiales") 
			@sql:SQLName (value=TOT_AMT_COST_VALUE) 
			@aaa:TripleA (FormatEltName=TOT_AMT_COST_VALUE, Rank=257, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total cost values in reference (domain) currency of initial positions. The objective is that the total cost values must reflect the total market values of initial positions. For this reason, only cash and security investments, cash and security withdrawals, management fees, incomes and incomes related to money market instrument will be taken into account. Besides, net amounts are taken into account rather instead of gross amounts because, the difference is in fact fees and taxes payed and which can be seen as a cash withdrawal. Remarks: This computation is only possible if the domain specifies that the positions must be included. Otherwise, the format element REMARKS will display a message to inform the user of that situation. } {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, 0, {ELSE} @TOT_INIT_AMT_INVEST_SECURITY - @TOT_INIT_AMT_WITHDR_SECURITY + @TOT_INIT_AMT_INVEST_CASH - @TOT_INIT_AMT_WITHDR_CASH + @TOT_INIT_AMT_INCOME + @TOT_INIT_AMT_INC_MONEY_MARKET - @TOT_INIT_AMT_MANAGEMENT_FEE )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total cost values in reference (domain) currency of initial positions. The objective is that the total cost values must reflect the total market values of initial positions. For this reason, only cash and security investments, cash and security withdrawals, management fees, incomes and incomes related to money market instrument will be taken into account. Besides, net amounts are taken into account rather instead of gross amounts because, the difference is in fact fees and taxes payed and which can be seen as a cash withdrawal. Remarks: This computation is only possible if the domain specifies that the positions must be included. Otherwise, the format element REMARKS will display a message to inform the user of that situation. } {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, 0, {ELSE} @TOT_INIT_AMT_INVEST_SECURITY - @TOT_INIT_AMT_WITHDR_SECURITY + @TOT_INIT_AMT_INVEST_CASH - @TOT_INIT_AMT_WITHDR_CASH + @TOT_INIT_AMT_INCOME + @TOT_INIT_AMT_INC_MONEY_MARKET - @TOT_INIT_AMT_MANAGEMENT_FEE )") 
		
		/* TOT_AMT_INC_MONEY_MA */ 
		TOT_AMT_INC_MONEY_MARKET : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einkommen aus Geldmarkt", en="Amount of Money Market Income", fr="Montant des revenus du marché monétaire") 
			@sql:SQLName (value=TOT_AMT_INC_MONEY_MARKET) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INC_MONEY_MA, Rank=230, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income of money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 32, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income of money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 32, @portfolio_id )") 
		
		/* TOT_AMT_INCOME */ 
		TOT_AMT_INCOME : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einkommen", en="Amount of Inc.", fr="Montant des revenus") 
			@sql:SQLName (value=TOT_AMT_INCOME) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INCOME, Rank=228, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income. Remarks: Incomes related to money market instruments are not included.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 31, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income. Remarks: Incomes related to money market instruments are not included.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 31, @portfolio_id )") 
		
		/* TOT_AMT_INSTR_IN */ 
		TOT_AMT_INSTR_IN : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag Zufluss", en="Received Amount", fr="Montant reçu") 
			@sql:SQLName (value=TOT_AMT_INSTR_IN) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INSTR_IN, Rank=243, ScriptDef="{This format element computes, for each instrument (in hierarchy or not), the total net amount in reference (domain) currency of incomings cash flows or amounts associated to operations impacting position of an instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (21,26,31,32,12,2,36,37) , open_oper_id.instr_id ) { OPERATION_CLASS_RANK = 21 => Security Investment operation OPERATION_CLASS_RANK = 26 => Cash Investment operation OPERATION_CLASS_RANK = 31 => Security Income operation OPERATION_CLASS_RANK = 32 => Money Market Income operation OPERATION_CLASS_RANK = 12 => Money Market Sell operation OPERATION_CLASS_RANK = 2 => Security Sell operation OPERATION_CLASS_RANK = 36 => Security Redemption operation OPERATION_CLASS_RANK = 37 => Money Market Redemption operation }") 
			@aaa:scpt (value="{This format element computes, for each instrument (in hierarchy or not), the total net amount in reference (domain) currency of incomings cash flows or amounts associated to operations impacting position of an instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (21,26,31,32,12,2,36,37) , open_oper_id.instr_id ) { OPERATION_CLASS_RANK = 21 => Security Investment operation OPERATION_CLASS_RANK = 26 => Cash Investment operation OPERATION_CLASS_RANK = 31 => Security Income operation OPERATION_CLASS_RANK = 32 => Money Market Income operation OPERATION_CLASS_RANK = 12 => Money Market Sell operation OPERATION_CLASS_RANK = 2 => Security Sell operation OPERATION_CLASS_RANK = 36 => Security Redemption operation OPERATION_CLASS_RANK = 37 => Money Market Redemption operation }") 
		
		/* TOT_AMT_INSTR_OUT */ 
		TOT_AMT_INSTR_OUT : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag Abfluss", en="Paid Amount", fr="Montant payé") 
			@sql:SQLName (value=TOT_AMT_INSTR_OUT) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INSTR_OUT, Rank=244, ScriptDef="{This format element computes, for each instrument (in hierarchy or not), the total net amount in reference (domain) currency of outgoings cash flows per operations.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (22,27,11,1),open_oper_id.instr_id )") 
			@aaa:scpt (value="{This format element computes, for each instrument (in hierarchy or not), the total net amount in reference (domain) currency of outgoings cash flows per operations.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (22,27,11,1),open_oper_id.instr_id )") 
		
		/* TOT_AMT_INVEST_CASH */ 
		TOT_AMT_INVEST_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Einzahlungen", en="Amount of Cash Investments", fr="Montant des apports de liquidités") 
			@sql:SQLName (value=TOT_AMT_INVEST_CASH) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INVEST_CASH, Rank=236, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash investment.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash investment.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
		
		/* TOT_AMT_INVEST_SECUR */ 
		TOT_AMT_INVEST_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Einlieferungen", en="Amount of Security Investments", fr="Montant des apports de titre") 
			@sql:SQLName (value=TOT_AMT_INVEST_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INVEST_SECUR, Rank=233, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security investment.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 21, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security investment.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 21, @portfolio_id )") 
		
		/* TOT_AMT_MANAGEMENT_F */ 
		TOT_AMT_MANAGEMENT_FEE : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Verwaltungskosten", en="Amount of Mgt. Fees", fr="Montant des frais de gestion") 
			@sql:SQLName (value=TOT_AMT_MANAGEMENT_FEE) 
			@aaa:TripleA (FormatEltName=TOT_AMT_MANAGEMENT_F, Rank=235, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to management fees.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 41, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to management fees.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 41, @portfolio_id )") 
		
		/* TOT_AMT_PONDERED_INV */ 
		TOT_AMT_PONDERED_INVEST_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Einzahlungen", en="Amount of Cash Investments", fr="Montant des apports de liquidités") 
			@sql:SQLName (value=TOT_AMT_PONDERED_INVEST_CASH) 
			@aaa:TripleA (FormatEltName=TOT_AMT_PONDERED_INV, Rank=237, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash investment. Each net amount is pondered by a time ratio giving more importance to operations which have occured at the beginning of the period covered by the From Date and Till Date of the context (domain). With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this ratio is calculated as following: Time ratio = [ TD - ED ] / [ TD - FD ] Remarks: The time ratio is already computed in the format element TIME_RATIO_FACTOR.} {------------------------------------------------------} 1 * TOT_SUM( @TIME_RATIO_FACTOR * @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash investment. Each net amount is pondered by a time ratio giving more importance to operations which have occured at the beginning of the period covered by the From Date and Till Date of the context (domain). With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this ratio is calculated as following: Time ratio = [ TD - ED ] / [ TD - FD ] Remarks: The time ratio is already computed in the format element TIME_RATIO_FACTOR.} {------------------------------------------------------} 1 * TOT_SUM( @TIME_RATIO_FACTOR * @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
		
		/* TOT_AMT_PONDERED_WIT */ 
		TOT_AMT_PONDERED_WITHDR_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Auszahlungen", en="Amount of Cash Withdrawals", fr="Montant des retraits de liquidités") 
			@sql:SQLName (value=TOT_AMT_PONDERED_WITHDR_CASH) 
			@aaa:TripleA (FormatEltName=TOT_AMT_PONDERED_WIT, Rank=239, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash withdrawal. Each net amount is pondered by a time ratio giving more importance to operations which have occured at the beginning of the period covered by the From Date and Till Date of the context (domain). With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this ratio is calculated as following: Time ratio = [ TD - ED ] / [ TD - FD ] Remarks: The time ratio is already computed in the format element TIME_RATIO_FACTOR. Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @TIME_RATIO_FACTOR * @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash withdrawal. Each net amount is pondered by a time ratio giving more importance to operations which have occured at the beginning of the period covered by the From Date and Till Date of the context (domain). With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this ratio is calculated as following: Time ratio = [ TD - ED ] / [ TD - FD ] Remarks: The time ratio is already computed in the format element TIME_RATIO_FACTOR. Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @TIME_RATIO_FACTOR * @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
		
		/* TOT_AMT_PTF_IN */ 
		TOT_AMT_PTF_IN : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag Zufluss", en="Received Amount", fr="Montant reçu") 
			@sql:SQLName (value=TOT_AMT_PTF_IN) 
			@aaa:TripleA (FormatEltName=TOT_AMT_PTF_IN, Rank=241, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of incomings.} {------------------------------------------------------} @TOT_AMT_INVEST_SECURITY + @TOT_AMT_INVEST_CASH + @TOT_AMT_INCOME + @TOT_AMT_INC_MONEY_MARKET + @TOT_AMT_SELL_MONEY_MARKET + @TOT_AMT_SELL_SECURITY + @TOT_AMT_REDEMPTION") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of incomings.} {------------------------------------------------------} @TOT_AMT_INVEST_SECURITY + @TOT_AMT_INVEST_CASH + @TOT_AMT_INCOME + @TOT_AMT_INC_MONEY_MARKET + @TOT_AMT_SELL_MONEY_MARKET + @TOT_AMT_SELL_SECURITY + @TOT_AMT_REDEMPTION") 
		
		/* TOT_AMT_PTF_OUT */ 
		TOT_AMT_PTF_OUT : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag Abfluss", en="Paid Amount", fr="Montant payé") 
			@sql:SQLName (value=TOT_AMT_PTF_OUT) 
			@aaa:TripleA (FormatEltName=TOT_AMT_PTF_OUT, Rank=242, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of outgoings.} {------------------------------------------------------} @TOT_AMT_WITHDR_SECURITY + @TOT_AMT_WITHDR_CASH + @TOT_AMT_MANAGEMENT_FEE + @TOT_AMT_BUY_MONEY_MARKET + @TOT_AMT_BUY_SECURITY") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of outgoings.} {------------------------------------------------------} @TOT_AMT_WITHDR_SECURITY + @TOT_AMT_WITHDR_CASH + @TOT_AMT_MANAGEMENT_FEE + @TOT_AMT_BUY_MONEY_MARKET + @TOT_AMT_BUY_SECURITY") 
		
		/* TOT_AMT_REDEMPTION */ 
		TOT_AMT_REDEMPTION : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Anleihetilgungen", en="Amount of Redemptions", fr="Montant des remboursement") 
			@sql:SQLName (value=TOT_AMT_REDEMPTION) 
			@aaa:TripleA (FormatEltName=TOT_AMT_REDEMPTION, Rank=240, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to redemptions of bonds and equivalent.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (36,37), @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to redemptions of bonds and equivalent.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (36,37), @portfolio_id )") 
		
		/* TOT_AMT_SELL_MONEY_M */ 
		TOT_AMT_SELL_MONEY_MARKET : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Verkäufe Geldmarkt", en="Amount of Money Market Sell", fr="Montant des ventes sur le marché monétaire") 
			@sql:SQLName (value=TOT_AMT_SELL_MONEY_MARKET) 
			@aaa:TripleA (FormatEltName=TOT_AMT_SELL_MONEY_M, Rank=232, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of sell operations related to money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (12), @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of sell operations related to money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (12), @portfolio_id )") 
		
		/* TOT_AMT_SELL_SECURIT */ 
		TOT_AMT_SELL_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Verkäufe", en="Amount of Sells Security", fr="Montant des ventes de titre") 
			@sql:SQLName (value=TOT_AMT_SELL_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_AMT_SELL_SECURIT, Rank=227, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security sell.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 2, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security sell.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 2, @portfolio_id )") 
		
		/* TOT_AMT_WITHDR_CASH */ 
		TOT_AMT_WITHDR_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Auszahlungen", en="Amount of Cash Withdrawals", fr="Montant des retraits de liquidités") 
			@sql:SQLName (value=TOT_AMT_WITHDR_CASH) 
			@aaa:TripleA (FormatEltName=TOT_AMT_WITHDR_CASH, Rank=238, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash withdrawal. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash withdrawal. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
		
		/* TOT_AMT_WITHDR_SECUR */ 
		TOT_AMT_WITHDR_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Auslieferungen", en="Amount of Security Withdrawals", fr="Montant des retraits de titre") 
			@sql:SQLName (value=TOT_AMT_WITHDR_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_AMT_WITHDR_SECUR, Rank=234, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security withdrawal. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 22, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security withdrawal. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 22, @portfolio_id )") 
		
		/* TOT_INIT_AMT_INC_MON */ 
		TOT_INIT_AMT_INC_MONEY_MARKET : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einkommen aus Geldmarkt", en="Amount of Money Market Income", fr="Montant des revenus du marché monétaire") 
			@sql:SQLName (value=TOT_INIT_AMT_INC_MONEY_MARKET) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_INC_MON, Rank=250, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to income of money market instrument. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 32, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to income of money market instrument. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 32, @portfolio_id )") 
		
		/* TOT_INIT_AMT_INCOME */ 
		TOT_INIT_AMT_INCOME : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einkommen", en="Amount of Inc.", fr="Montant des revenus") 
			@sql:SQLName (value=TOT_INIT_AMT_INCOME) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_INCOME, Rank=249, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income. It is in fact net amounts based on initial positions. Remarks: Incomes related to money market instruments are not included.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 31, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income. It is in fact net amounts based on initial positions. Remarks: Incomes related to money market instruments are not included.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 31, @portfolio_id )") 
		
		/* TOT_INIT_AMT_INVEST_ */ 
		TOT_INIT_AMT_INVEST_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Einzahlungen", en="Amount of Cash Investments", fr="Montant des apports de liquidités") 
			@sql:SQLName (value=TOT_INIT_AMT_INVEST_CASH) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_INVEST_, Rank=247, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to cash investment. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to cash investment. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
		
		/* TOT_INIT_AMT_INVEST_ */ 
		TOT_INIT_AMT_INVEST_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Einlieferungen", en="Amount of Security Investments", fr="Montant des apports de titre") 
			@sql:SQLName (value=TOT_INIT_AMT_INVEST_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_INVEST_, Rank=245, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to security investment. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 21, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to security investment. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 21, @portfolio_id )") 
		
		/* TOT_INIT_AMT_MANAGEM */ 
		TOT_INIT_AMT_MANAGEMENT_FEE : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Verwaltungskosten", en="Amount of Mgt. Fees", fr="Montant des frais de gestion") 
			@sql:SQLName (value=TOT_INIT_AMT_MANAGEMENT_FEE) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_MANAGEM, Rank=251, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to management fees. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 41, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to management fees. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 41, @portfolio_id )") 
		
		/* TOT_INIT_AMT_WITHDR_ */ 
		TOT_INIT_AMT_WITHDR_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Auszahlungen", en="Amount of Cash Withdrawals", fr="Montant des retraits de liquidités") 
			@sql:SQLName (value=TOT_INIT_AMT_WITHDR_CASH) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_WITHDR_, Rank=248, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to cash withdrawal. It is in fact net amounts based on initial positions. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to cash withdrawal. It is in fact net amounts based on initial positions. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
		
		/* TOT_INIT_AMT_WITHDR_ */ 
		TOT_INIT_AMT_WITHDR_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Auslieferungen", en="Amount of Security Withdrawals", fr="Montant des retraits de titre") 
			@sql:SQLName (value=TOT_INIT_AMT_WITHDR_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_WITHDR_, Rank=246, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to security withdrawal. It is in fact net amounts based on initial positions. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 22, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to security withdrawal. It is in fact net amounts based on initial positions. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 22, @portfolio_id )") 
		
		/* TRANSACTION_COUNTER */ 
		TRANSACTION_COUNTER : AAABusinessTypes:Int 
			@i18n:Label (de=Transaktionsanzahl, en="No of Transactions", fr="Nb de transactions") 
			@sql:SQLName (value=TRANSACTION_COUNTER) 
			@aaa:TripleA (FormatEltName=TRANSACTION_COUNTER, Rank=198, ScriptDef="{This format element indicates whether the operation is to security movements or not.} {---------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, 1, 0 )") 
			@aaa:scpt (value="{This format element indicates whether the operation is to security movements or not.} {---------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, 1, 0 )") 
		
		/* TRANSVIEW_FILTER */ 
		TRANSVIEW_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=TRANSVIEW_FILTER) 
			@aaa:TripleA (FormatEltName=TRANSVIEW_FILTER, Rank=31, ScriptDef="{This format element is used to extract operations related to security transactions} {-------------------------------------------} {The operations are extracted if} {It is a \"real\" transaction ==>} (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation})") 
			@aaa:scpt (value="{This format element is used to extract operations related to security transactions} {-------------------------------------------} {The operations are extracted if} {It is a \"real\" transaction ==>} (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation})") 
	} 
	/* PCK_RMT_OPLIST_DATE */ 
	PCK_RMT_OPLIST_DATE 
		@aaa:FormatColumnFilter (value=operation_f) 
		@aaa:FormatFunction (value="Operation History") 
		@sql:SQLName (value=PCK_RMT_OPLIST_DATE) 
		@aaa:TripleA (ColumnFilter=operation_f, EntitySQLName=extended_pos, FinFuncName="Operation History", FinFuncProcName=op_hist, FormatName=PCK_RMT_OPLIST_DATE) 
	{ 
		/* Acc_date */ 
		Acc_date : AAABusinessTypes:Datetime 
			@sql:SQLName (value=Acc_date) 
			@aaa:TripleA (FormatEltName=Acc_date, Rank=32, ScriptDef=account_d) 
			@aaa:scpt (value=account_d) 
		
		/* Account */ 
		account : AAABusinessTypes:Code 
			@sql:SQLName (value=account) 
			@aaa:TripleA (FormatEltName=Account, Rank=38, ScriptDef=acct_ext_pos_id.instr_id.code) 
			@aaa:scpt (value=acct_ext_pos_id.instr_id.code) 
		
		/* Debit/Credit */ 
		acct_amount : AAABusinessTypes:Amount 
			@sql:SQLName (value=acct_amount) 
			@aaa:TripleA (FormatEltName=Debit/Credit, Rank=36, ScriptDef=acct_ext_pos_id.pos_net_amount_m) 
			@aaa:scpt (value=acct_ext_pos_id.pos_net_amount_m) 
		
		/* Acc. Curr */ 
		acct_curr_code : AAABusinessTypes:Code 
			@sql:SQLName (value=acct_curr_code) 
			@aaa:TripleA (FormatEltName="Acc. Curr", Rank=37, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", acct_ext_pos_id.pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} acct_ext_pos_id.pos_currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", acct_ext_pos_id.pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} acct_ext_pos_id.pos_currency_id.code )") 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=127, ScriptDef=portfolio_id.third_id) 
			@aaa:scpt (value=portfolio_id.third_id) 
		
		/* Exch. Rate */ 
		cost_exch_rate : AAABusinessTypes:Exchange 
			@sql:SQLName (value=cost_exch_rate) 
			@aaa:TripleA (FormatEltName="Exch. Rate", Rank=33, ScriptDef=pos_exch_rate) 
			@aaa:scpt (value=pos_exch_rate) 
		
		/* Instrument Code */ 
		instrument_code : AAABusinessTypes:Code 
			@sql:SQLName (value=instrument_code) 
			@aaa:TripleA (FormatEltName="Instrument Code", Rank=3, ScriptDef=instr_id.code, SortingRank=3) 
			@aaa:scpt (value=instr_id.code) 
		
		/* instrument Denom */ 
		instrument_denom : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=instrument_denom) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName="instrument Denom", Rank=4, ScriptDef="IF(instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name)", SortingRank=3) 
			@aaa:scpt (value="IF(instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name)") 
		
		/* instrument Denom */ 
		instrument_denom_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=instrument_denom_de) 
			@aaa:TripleA (FormatEltName="instrument Denom", Rank=4, ScriptDef="IF(instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name)", SortingRank=3) 
			@aaa:scpt (value="IF(instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name)") 
		
		/* instrument Denom */ 
		instrument_denom_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=instrument_denom_en) 
			@aaa:TripleA (FormatEltName="instrument Denom", Rank=4, ScriptDef="IF(instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name)", SortingRank=3) 
			@aaa:scpt (value="IF(instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name)") 
		
		/* instrument Denom */ 
		instrument_denom_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=instrument_denom_fr) 
			@aaa:TripleA (FormatEltName="instrument Denom", Rank=4, ScriptDef="IF(instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name)", SortingRank=3) 
			@aaa:scpt (value="IF(instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, instr_id.name)") 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=128, ScriptDef=portfolio_id.comm_mgr_id) 
			@aaa:scpt (value=portfolio_id.comm_mgr_id) 
		
		/* Operation Code */ 
		open_oper_code : AAABusinessTypes:Code 
			@sql:SQLName (value=open_oper_code) 
			@aaa:TripleA (FormatEltName="Operation Code", Rank=15, ScriptDef=open_oper_code) 
			@aaa:scpt (value=open_oper_code) 
		
		/* Op. Nature */ 
		oper_nature : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=oper_nature) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName="Op. Nature", Rank=14, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], open_oper_nat_e.LABEL[])", SortingRank=4) 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], open_oper_nat_e.LABEL[])") 
		
		/* Op. Nature */ 
		oper_nature_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=oper_nature_de) 
			@aaa:TripleA (FormatEltName="Op. Nature", Rank=14, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], open_oper_nat_e.LABEL[])", SortingRank=4) 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], open_oper_nat_e.LABEL[])") 
		
		/* Op. Nature */ 
		oper_nature_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=oper_nature_en) 
			@aaa:TripleA (FormatEltName="Op. Nature", Rank=14, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], open_oper_nat_e.LABEL[])", SortingRank=4) 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], open_oper_nat_e.LABEL[])") 
		
		/* Op. Nature */ 
		oper_nature_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=oper_nature_fr) 
			@aaa:TripleA (FormatEltName="Op. Nature", Rank=14, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], open_oper_nat_e.LABEL[])", SortingRank=4) 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], open_oper_nat_e.LABEL[])") 
		
		/* oper_type */ 
		oper_type : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=oper_type) 
			@aaa:TripleA (FormatEltName=oper_type, Rank=16, ScriptDef="IF(open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.type_id.name)") 
			@aaa:scpt (value="IF(open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.type_id.name)") 
		
		/* Op Fl */ 
		operation_f : AAABusinessTypes:Flag 
			@sql:SQLName (value=operation_f) 
			@aaa:TripleA (FormatEltName="Op Fl", Rank=5, ScriptDef="( ( nature_e = 2 ) AND ( main_f = 1 ) )") 
			@aaa:scpt (value="( ( nature_e = 2 ) AND ( main_f = 1 ) )") 
		
		/* portfolio_code */ 
		portfolio_code : AAABusinessTypes:Code 
			@sql:SQLName (value=portfolio_code) 
			@aaa:TripleA (FormatEltName=portfolio_code, Rank=1, ScriptDef=portfolio_id.code, SortingRank=1) 
			@aaa:scpt (value=portfolio_id.code) 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=126, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
		
		/* portfolio_name */ 
		portfolio_name : AAABusinessTypes:UniName 
			@sql:SQLName (value=portfolio_name) 
			@aaa:TripleA (FormatEltName=portfolio_name, Rank=2, ScriptDef=portfolio_id.name) 
			@aaa:scpt (value=portfolio_id.name) 
		
		/* Pos. Curr */ 
		pos_currency_code : AAABusinessTypes:UniCode 
			@sql:SQLName (value=pos_currency_code) 
			@aaa:TripleA (FormatEltName="Pos. Curr", Rank=31, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} pos_currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} pos_currency_id.code )") 
		
		/* pos_net_amount */ 
		pos_net_amount : AAABusinessTypes:Amount 
			@sql:SQLName (value=pos_net_amount) 
			@aaa:TripleA (FormatEltName=pos_net_amount, Rank=30, ScriptDef=pos_net_amount_m) 
			@aaa:scpt (value=pos_net_amount_m) 
		
		/* Price */ 
		price : AAABusinessTypes:Number 
			@sql:SQLName (value=price) 
			@aaa:TripleA (FormatEltName=Price, Rank=21, ScriptDef="IF(quote_n <> NULL,ABS(quote_n), PRICE_TO_QUOTE(instr_id, ABS(price_n),begin_d, instr_id.price_calc_rule_e, expiration_d, rate_p))") 
			@aaa:scpt (value="IF(quote_n <> NULL,ABS(quote_n), PRICE_TO_QUOTE(instr_id, ABS(price_n),begin_d, instr_id.price_calc_rule_e, expiration_d, rate_p))") 
		
		/* Quantity */ 
		quantity : AAABusinessTypes:Number 
			@sql:SQLName (value=quantity) 
			@aaa:TripleA (FormatEltName=Quantity, Rank=20, ScriptDef=quantity_n) 
			@aaa:scpt (value=quantity_n) 
		
		/* Ref. Curr */ 
		ref_curr_code : AAABusinessTypes:Code 
			@sql:SQLName (value=ref_curr_code) 
			@aaa:TripleA (FormatEltName="Ref. Curr", Rank=35, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} ref_currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} ref_currency_id.code )") 
		
		/* Ref Net Amount */ 
		ref_net_amount : AAABusinessTypes:Amount 
			@sql:SQLName (value=ref_net_amount) 
			@aaa:TripleA (FormatEltName="Ref Net Amount", Rank=34, ScriptDef=ref_net_amount_m) 
			@aaa:scpt (value=ref_net_amount_m) 
		
		/* reversal_nat_e */ 
		reversal_nat_e : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=reversal_nat_e) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=reversal_nat_e, Rank=52, ScriptDef="IF(rev_oper_nat_e <> 0, IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], rev_oper_nat_e.LABEL[]))") 
			@aaa:scpt (value="IF(rev_oper_nat_e <> 0, IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], rev_oper_nat_e.LABEL[]))") 
		
		/* reversal_nat_e */ 
		reversal_nat_e_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=reversal_nat_e_de) 
			@aaa:TripleA (FormatEltName=reversal_nat_e, Rank=52, ScriptDef="IF(rev_oper_nat_e <> 0, IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], rev_oper_nat_e.LABEL[]))") 
			@aaa:scpt (value="IF(rev_oper_nat_e <> 0, IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], rev_oper_nat_e.LABEL[]))") 
		
		/* reversal_nat_e */ 
		reversal_nat_e_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=reversal_nat_e_en) 
			@aaa:TripleA (FormatEltName=reversal_nat_e, Rank=52, ScriptDef="IF(rev_oper_nat_e <> 0, IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], rev_oper_nat_e.LABEL[]))") 
			@aaa:scpt (value="IF(rev_oper_nat_e <> 0, IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], rev_oper_nat_e.LABEL[]))") 
		
		/* reversal_nat_e */ 
		reversal_nat_e_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=reversal_nat_e_fr) 
			@aaa:TripleA (FormatEltName=reversal_nat_e, Rank=52, ScriptDef="IF(rev_oper_nat_e <> 0, IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], rev_oper_nat_e.LABEL[]))") 
			@aaa:scpt (value="IF(rev_oper_nat_e <> 0, IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], rev_oper_nat_e.LABEL[]))") 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
		
		/* Status */ 
		status_e : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=status_e) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=Status, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, status_e.LABEL[TSL_CURRENT_LANGUAGE()], status_e.LABEL[])") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, status_e.LABEL[TSL_CURRENT_LANGUAGE()], status_e.LABEL[])") 
		
		/* Status */ 
		status_e_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=status_e_de) 
			@aaa:TripleA (FormatEltName=Status, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, status_e.LABEL[TSL_CURRENT_LANGUAGE()], status_e.LABEL[])") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, status_e.LABEL[TSL_CURRENT_LANGUAGE()], status_e.LABEL[])") 
		
		/* Status */ 
		status_e_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=status_e_en) 
			@aaa:TripleA (FormatEltName=Status, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, status_e.LABEL[TSL_CURRENT_LANGUAGE()], status_e.LABEL[])") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, status_e.LABEL[TSL_CURRENT_LANGUAGE()], status_e.LABEL[])") 
		
		/* Status */ 
		status_e_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=status_e_fr) 
			@aaa:TripleA (FormatEltName=Status, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, status_e.LABEL[TSL_CURRENT_LANGUAGE()], status_e.LABEL[])") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, status_e.LABEL[TSL_CURRENT_LANGUAGE()], status_e.LABEL[])") 
	} 
	/* PCK_RMT_OPLIST_SUM */ 
	PCK_RMT_OPLIST_SUM 
		@aaa:FormatColumnFilter (value=SERVER_FILTER) 
		@aaa:FormatFunction (value="Operation History") 
		@sql:SQLName (value=PCK_RMT_OPLIST_SUM) 
		@aaa:TripleA (ColumnFilter=SERVER_FILTER, EntitySQLName=extended_pos, FinFuncName="Operation History", FinFuncProcName=op_hist, FormatName=PCK_RMT_OPLIST_SUM) 
	{ 
		/* account_id */ 
		account_id : AAABusinessTypes:Id 
			@sql:SQLName (value=account_id) 
			@aaa:TripleA (FormatEltName=account_id, Rank=7, ScriptDef="IF( instr_id.nature_e = 4, instr_id, NULL)") 
			@aaa:scpt (value="IF( instr_id.nature_e = 4, instr_id, NULL)") 
		
		/* ADMIN_MGR_NAME */ 
		ADMIN_MGR_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Vermögensverwalter", en=Manager, fr=Gestionnaire) 
			@sql:SQLName (value=ADMIN_MGR_NAME) 
			@aaa:TripleA (FormatEltName=ADMIN_MGR_NAME, Rank=810, ScriptDef="IF(child_ptf_id<>NULL, child_ptf_id.admin_mgr_id.name, {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).admin_mgr_id.name, {else} portfolio_id.admin_mgr_id.name))") 
			@aaa:scpt (value="IF(child_ptf_id<>NULL, child_ptf_id.admin_mgr_id.name, {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).admin_mgr_id.name, {else} portfolio_id.admin_mgr_id.name))") 
		
		/* ADV_PTF_TURN_OVER */ 
		ADV_PTF_TURN_OVER : AAABusinessTypes:Number 
			@i18n:Label (de=Umsatz, en="Advanced Turn-over", fr="Turn-over évolué") 
			@sql:SQLName (value=ADV_PTF_TURN_OVER) 
			@aaa:TripleA (FormatEltName=ADV_PTF_TURN_OVER, Rank=259, ScriptDef="{This format element computes the turn-over, using an advanced method. With this method, the turn-over is calculated as following: Advanced Turn-Over = [ ABS( SUM(net amount of security buy) ) + ABS( SUM(net amount of security sell) ) ] / [ SUM(initial cost values) + SUM(time pondered net amount of cash investment) - SUM(time pondered net amount of cash withdrawal) ] The time pondered net amount is the net amount multiplied by a ponderation factor based on the From Date and Till Date of the context (domain) and the operation execution (operation) date. With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this factor is calculated as following: Ponderation factor = [ TD - ED ] / [ TD - FD ] This ponderation factor gives more importance of cash investments and withdrawals which have occured at the beginning of the period covered by the From Date and Till Date of the context. Remarks: The SUM of time pondered net amounts is already computed in the format elements TOT_AMT_PONDERED_INVEST_CASH and TOT_AMT_PONDERED_WITHDR_CASH.} {------------------------------------------------------} IF( @TOT_AMT_COST_VALUE = 0 {Impossible to compute turn-over}, NULL, {ELSE} ( @TOT_AMT_BUY_SECURITY + @TOT_AMT_SELL_SECURITY ) / ( @TOT_AMT_COST_VALUE + @TOT_AMT_PONDERED_INVEST_CASH - @TOT_AMT_PONDERED_WITHDR_CASH ) )") 
			@aaa:scpt (value="{This format element computes the turn-over, using an advanced method. With this method, the turn-over is calculated as following: Advanced Turn-Over = [ ABS( SUM(net amount of security buy) ) + ABS( SUM(net amount of security sell) ) ] / [ SUM(initial cost values) + SUM(time pondered net amount of cash investment) - SUM(time pondered net amount of cash withdrawal) ] The time pondered net amount is the net amount multiplied by a ponderation factor based on the From Date and Till Date of the context (domain) and the operation execution (operation) date. With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this factor is calculated as following: Ponderation factor = [ TD - ED ] / [ TD - FD ] This ponderation factor gives more importance of cash investments and withdrawals which have occured at the beginning of the period covered by the From Date and Till Date of the context. Remarks: The SUM of time pondered net amounts is already computed in the format elements TOT_AMT_PONDERED_INVEST_CASH and TOT_AMT_PONDERED_WITHDR_CASH.} {------------------------------------------------------} IF( @TOT_AMT_COST_VALUE = 0 {Impossible to compute turn-over}, NULL, {ELSE} ( @TOT_AMT_BUY_SECURITY + @TOT_AMT_SELL_SECURITY ) / ( @TOT_AMT_COST_VALUE + @TOT_AMT_PONDERED_INVEST_CASH - @TOT_AMT_PONDERED_WITHDR_CASH ) )") 
		
		/* BASIC_PTF_TURN_OVER */ 
		BASIC_PTF_TURN_OVER : AAABusinessTypes:Number 
			@i18n:Label (de=Umsatz, en="Basic Turn-over", fr="Turn-over de base") 
			@sql:SQLName (value=BASIC_PTF_TURN_OVER) 
			@aaa:TripleA (FormatEltName=BASIC_PTF_TURN_OVER, Rank=258, ScriptDef="{This format element computes the turn-over, using a basic method. With this method, the turn-over is calculated as following: Basic Turn-Over = [ ABS( SUM(net amount of security buy) ) + ABS( SUM(net amount of security sell) ) ] / [ SUM(initial cost values) + SUM(net amount of cash investment) - SUM(net amount of cash withdrawal) ] } {------------------------------------------------------} IF( @TOT_AMT_COST_VALUE = 0 {Impossible to compute turn-over}, NULL, {ELSE} ( @TOT_AMT_BUY_SECURITY + @TOT_AMT_SELL_SECURITY ) / ( @TOT_AMT_COST_VALUE + @TOT_AMT_INVEST_CASH - @TOT_AMT_WITHDR_CASH ) )") 
			@aaa:scpt (value="{This format element computes the turn-over, using a basic method. With this method, the turn-over is calculated as following: Basic Turn-Over = [ ABS( SUM(net amount of security buy) ) + ABS( SUM(net amount of security sell) ) ] / [ SUM(initial cost values) + SUM(net amount of cash investment) - SUM(net amount of cash withdrawal) ] } {------------------------------------------------------} IF( @TOT_AMT_COST_VALUE = 0 {Impossible to compute turn-over}, NULL, {ELSE} ( @TOT_AMT_BUY_SECURITY + @TOT_AMT_SELL_SECURITY ) / ( @TOT_AMT_COST_VALUE + @TOT_AMT_INVEST_CASH - @TOT_AMT_WITHDR_CASH ) )") 
		
		/* CASHVIEW_FILTER */ 
		CASHVIEW_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=CASHVIEW_FILTER) 
			@aaa:TripleA (FormatEltName=CASHVIEW_FILTER, Rank=30, ScriptDef="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 2 AND bal_pos_type_id = NULL AND (pos_nat_e IN (6,7,8) OR instr_id.nature_e IN (4))") 
			@aaa:scpt (value="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 2 AND bal_pos_type_id = NULL AND (pos_nat_e IN (6,7,8) OR instr_id.nature_e IN (4))") 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=4, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.third_id, portfolio_id.third_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.third_id, portfolio_id.third_id )") 
		
		/* CLIENT_NAME */ 
		CLIENT_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Name des Kunden", en="Client Name", fr="Nom du client") 
			@sql:SQLName (value=CLIENT_NAME) 
			@aaa:TripleA (FormatEltName=CLIENT_NAME, Rank=60, ScriptDef="IF (DOMAIN().dim_port_dict_id = 600, IF(child_ptf_id<>NULL, child_ptf_id.third_id.name, portfolio_id.third_id.name), {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).third_id.name, {else} IF(child_ptf_id<>NULL, child_ptf_id.third_id.name, portfolio_id.third_id.name)))") 
			@aaa:scpt (value="IF (DOMAIN().dim_port_dict_id = 600, IF(child_ptf_id<>NULL, child_ptf_id.third_id.name, portfolio_id.third_id.name), {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).third_id.name, {else} IF(child_ptf_id<>NULL, child_ptf_id.third_id.name, portfolio_id.third_id.name)))") 
		
		/* COM_MGR_NAME */ 
		COM_MGR_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Kundenberater, en=Advisor, fr=Conseiller) 
			@sql:SQLName (value=COM_MGR_NAME) 
			@aaa:TripleA (FormatEltName=COM_MGR_NAME, Rank=800, ScriptDef="IF(child_ptf_id<>NULL, child_ptf_id.comm_mgr_id.name, {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).comm_mgr_id.name, {else} portfolio_id.comm_mgr_id.name))") 
			@aaa:scpt (value="IF(child_ptf_id<>NULL, child_ptf_id.comm_mgr_id.name, {else} IF(DOMAIN().port_cons_rule_e=1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).comm_mgr_id.name, {else} portfolio_id.comm_mgr_id.name))") 
		
		/* data_secu_prof_id */ 
		data_secu_prof_id : AAABusinessTypes:Id 
			@sql:SQLName (value=data_secu_prof_id) 
			@aaa:TripleA (FormatEltName=data_secu_prof_id, Rank=1, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} IF( child_ptf_id <> NULL, child_ptf_id.data_secu_prof_id, portfolio_id.data_secu_prof_id ))") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} IF( child_ptf_id <> NULL, child_ptf_id.data_secu_prof_id, portfolio_id.data_secu_prof_id ))") 
		
		/* domain_client_id */ 
		domain_client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=domain_client_id) 
			@aaa:TripleA (FormatEltName=domain_client_id, Rank=3000, ScriptDef="IF(DOMAIN().dim_port_dict_id=600 AND DOMAIN().third_compo_e<>1 ,DOMAIN().port_object_id,NULL)") 
			@aaa:scpt (value="IF(DOMAIN().dim_port_dict_id=600 AND DOMAIN().third_compo_e<>1 ,DOMAIN().port_object_id,NULL)") 
		
		/* expiration_d */ 
		expiration_d : AAABusinessTypes:Datetime 
			@sql:SQLName (value=expiration_d) 
			@aaa:TripleA (FormatEltName=expiration_d, Rank=2000, ScriptDef=expiration_d) 
			@aaa:scpt (value=expiration_d) 
		
		/* first_operation_id */ 
		first_operation_id : AAABusinessTypes:Id 
			@sql:SQLName (value=first_operation_id) 
			@aaa:TripleA (FormatEltName=first_operation_id, Rank=8, ScriptDef="{This format element displays the first identifier of a security transaction. If no security transactions exists, then the NULL value is returned. The filter to extract the first identifier is exactly the same as the one used in the format element TRANSVIEW_FILTER.} {------------------------------------------------------} TOT_FIRST( id, (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation}) OR (nature_e = 2 {Flow operation} AND open_oper_id.instr_id.nature_e = 4 {related instrument is a Cash Account} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND open_oper_id.instr_id = instr_id {to select only the main operation} AND CLASSIFY( GET_ENTITY(\"extended_pos\"), id, \"PCK_DS_OPER_CLASS\").rank_n = 5 {operations related to buy/sell of cash}) , nature_e, @portfolio_id )") 
			@aaa:scpt (value="{This format element displays the first identifier of a security transaction. If no security transactions exists, then the NULL value is returned. The filter to extract the first identifier is exactly the same as the one used in the format element TRANSVIEW_FILTER.} {------------------------------------------------------} TOT_FIRST( id, (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation}) OR (nature_e = 2 {Flow operation} AND open_oper_id.instr_id.nature_e = 4 {related instrument is a Cash Account} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND open_oper_id.instr_id = instr_id {to select only the main operation} AND CLASSIFY( GET_ENTITY(\"extended_pos\"), id, \"PCK_DS_OPER_CLASS\").rank_n = 5 {operations related to buy/sell of cash}) , nature_e, @portfolio_id )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hierarchy Head", fr="Tête de la hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_de : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hierarchy Head", fr="Tête de la hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_de) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_en : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hierarchy Head", fr="Tête de la hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_en) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_fr : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hierarchy Head", fr="Tête de la hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_fr) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=105, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* id */ 
		id : AAABusinessTypes:Id 
			@sql:SQLName (value=id) 
			@aaa:TripleA (FormatEltName=id, Rank=5, ScriptDef=id) 
			@aaa:scpt (value=id) 
		
		/* INSTR_CODE */ 
		INSTR_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Instrument, en="Instrument Code", fr="Code de l\'instrument") 
			@sql:SQLName (value=INSTR_CODE) 
			@aaa:TripleA (FormatEltName=INSTR_CODE, Rank=290, ScriptDef=open_oper_id.instr_id.code) 
			@aaa:scpt (value=open_oper_id.instr_id.code) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM : AAABusinessTypes:UniNote 
			@i18n:Label (de=Instrument, en=Instrument, fr=Instrument) 
			@sql:SQLName (value=INSTR_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=INSTR_DENOM, Rank=500, ScriptDef="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
			@aaa:scpt (value="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_de : AAABusinessTypes:UniNote 
			@i18n:Label (de=Instrument, en=Instrument, fr=Instrument) 
			@sql:SQLName (value=INSTR_DENOM_de) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
			@aaa:scpt (value="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_en : AAABusinessTypes:UniNote 
			@i18n:Label (de=Instrument, en=Instrument, fr=Instrument) 
			@sql:SQLName (value=INSTR_DENOM_en) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
			@aaa:scpt (value="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_fr : AAABusinessTypes:UniNote 
			@i18n:Label (de=Instrument, en=Instrument, fr=Instrument) 
			@sql:SQLName (value=INSTR_DENOM_fr) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
			@aaa:scpt (value="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
		
		/* instr_id */ 
		instr_id : AAABusinessTypes:Id 
			@sql:SQLName (value=instr_id) 
			@aaa:TripleA (FormatEltName=instr_id, Rank=13, ScriptDef="IF( @OPERATION_CLASS_RANK IN (1, 5, 20, 25, 30, 35, 45, 50, 55, 60, 65, 70), open_oper_id.instr_id, instr_id )") 
			@aaa:scpt (value="IF( @OPERATION_CLASS_RANK IN (1, 5, 20, 25, 30, 35, 45, 50, 55, 60, 65, 70), open_oper_id.instr_id, instr_id )") 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=3, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.comm_mgr_id, portfolio_id.comm_mgr_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.comm_mgr_id, portfolio_id.comm_mgr_id )") 
		
		/* NB_TRANSACTION */ 
		NB_TRANSACTION : AAABusinessTypes:Int 
			@i18n:Label (de="Anzahl Transaktionen", en="No of Transactions", fr="Nb de transactions") 
			@sql:SQLName (value=NB_TRANSACTION) 
			@aaa:TripleA (FormatEltName=NB_TRANSACTION, Rank=199, ScriptDef="{This format element calculates, for each portfolio (in hierarchy or not), the number of transactions.} {--------------------------------------------} 1 * TOT_SUM( 1, @TRANSVIEW_FILTER, @portfolio_id)") 
			@aaa:scpt (value="{This format element calculates, for each portfolio (in hierarchy or not), the number of transactions.} {--------------------------------------------} 1 * TOT_SUM( 1, @TRANSVIEW_FILTER, @portfolio_id)") 
		
		/* NET_AMOUNT_OPER_CURR */ 
		NET_AMOUNT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Op. Währung)", en="Net Amount (Op. Ccy.)", fr="Montant net (devise de l\'op.)") 
			@sql:SQLName (value=NET_AMOUNT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=NET_AMOUNT_OPER_CURR, Rank=51, ScriptDef="{This format element displays the net amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_net_amount_m), ABS(pos_net_amount_m) )") 
			@aaa:scpt (value="{This format element displays the net amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_net_amount_m), ABS(pos_net_amount_m) )") 
		
		/* NET_AMOUNT_REF_CURR */ 
		NET_AMOUNT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Ref. Währung)", en="Net Amount (Ref. Ccy.)", fr="Montant net (devise de réf.)") 
			@sql:SQLName (value=NET_AMOUNT_REF_CURR) 
			@aaa:TripleA (FormatEltName=NET_AMOUNT_REF_CURR, Rank=50, ScriptDef="{This format element displays the net amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_net_amount_m), ABS(ref_net_amount_m) )") 
			@aaa:scpt (value="{This format element displays the net amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_net_amount_m), ABS(ref_net_amount_m) )") 
		
		/* OPERATION_CLASS_RANK */ 
		OPERATION_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Klassifikation der Transaktion", en="Operation Classification", fr="Classification de l\'opération") 
			@sql:SQLName (value=OPERATION_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=OPERATION_CLASS_RANK, Rank=12, ScriptDef="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The classification PCK_DS_OPER_CLASS (defined in the packaging parameter DS_CLASSIF_OPER_CLASS) on Extended Position entity is used for the computation. The classification is the following: - Rank 1: Buy of Securities - Rank 2: Sell of Securities - Rank 6: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 11: Buy of Money Markets - Rank 12: Sell of Money Markets - Rank 16: Corporate Actions - Rank 21: Investments of Securities - Rank 22: Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 26: Investments of Cash - Rank 27: Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 28: Investment, Withdrawals, Transfers and Portfolio Transfers of Money Markets - Rank 31: Incomes (Dividends, Coupons, etc...) of instruments, which are not Money Markets - Rank 32: Incomes of Money Markets - Rank 36: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 37: Redemption of Money Markets - Rank 41: Management Fees - Rank 99: Other Operations } {--------------------------------------------------} CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n") 
			@aaa:scpt (value="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The classification PCK_DS_OPER_CLASS (defined in the packaging parameter DS_CLASSIF_OPER_CLASS) on Extended Position entity is used for the computation. The classification is the following: - Rank 1: Buy of Securities - Rank 2: Sell of Securities - Rank 6: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 11: Buy of Money Markets - Rank 12: Sell of Money Markets - Rank 16: Corporate Actions - Rank 21: Investments of Securities - Rank 22: Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 26: Investments of Cash - Rank 27: Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 28: Investment, Withdrawals, Transfers and Portfolio Transfers of Money Markets - Rank 31: Incomes (Dividends, Coupons, etc...) of instruments, which are not Money Markets - Rank 32: Incomes of Money Markets - Rank 36: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 37: Redemption of Money Markets - Rank 41: Management Fees - Rank 99: Other Operations } {--------------------------------------------------} CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n") 
		
		/* OPERATION_DATE */ 
		OPERATION_DATE : AAABusinessTypes:Datetime 
			@i18n:Label (de="Ausführungsdatum", en="Execution Date", fr="Date d\'exécution") 
			@sql:SQLName (value=OPERATION_DATE) 
			@aaa:TripleA (FormatEltName=OPERATION_DATE, Rank=10, ScriptDef=operation_d, SortingRank=3) 
			@aaa:scpt (value=operation_d) 
		
		/* OPERATION_MERGED_CLA */ 
		OPERATION_MERGED_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Klassifikation für gruppierte Transaktionen", en="Operation Merged Classification", fr="Classification regroupée de l\'opération") 
			@sql:SQLName (value=OPERATION_MERGED_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=OPERATION_MERGED_CLA, Rank=35, ScriptDef="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The format OPERATION_CLASS_RANK is used for the computation. The classification is the following: Rank [1;5]:Securities -> 5 Rank [6;10]: Forex->10 Rank [11;15]: Money Market->15 Rank [16;20]: Corporate Action->20 Rank [21;25]: Securities Investment/Withdrawal/Transfer/Portfolio Transfer->25 Rank [26;30]: Cash Investment/Withdrawal/Transfer/Portfolio Transfer->30 Rank [31;35]: Income->35 Rank [36;40]: Redemptions->40 Rank [41;45]: Management Fees ->45 Rank =99: Others->99 } {--------------------------------------------------} IF(@TRANSVIEW_FILTER=1, IF(@OPERATION_CLASS_RANK>=1 AND @OPERATION_CLASS_RANK<=5,5, IF(@OPERATION_CLASS_RANK>5 AND @OPERATION_CLASS_RANK<=10,10, IF(@OPERATION_CLASS_RANK>10 AND @OPERATION_CLASS_RANK<=15,15, IF(@OPERATION_CLASS_RANK>15 AND @OPERATION_CLASS_RANK<=20,20, IF(@OPERATION_CLASS_RANK>20 AND @OPERATION_CLASS_RANK<=25,25, IF(@OPERATION_CLASS_RANK>25 AND @OPERATION_CLASS_RANK<=30,30, IF(@OPERATION_CLASS_RANK>30 AND @OPERATION_CLASS_RANK<=35,35, IF(@OPERATION_CLASS_RANK>35 AND @OPERATION_CLASS_RANK<=40,40, IF(@OPERATION_CLASS_RANK>40 AND @OPERATION_CLASS_RANK<=45,45, IF(@OPERATION_CLASS_RANK=99,99 ) ))))))))),-1)") 
			@aaa:scpt (value="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The format OPERATION_CLASS_RANK is used for the computation. The classification is the following: Rank [1;5]:Securities -> 5 Rank [6;10]: Forex->10 Rank [11;15]: Money Market->15 Rank [16;20]: Corporate Action->20 Rank [21;25]: Securities Investment/Withdrawal/Transfer/Portfolio Transfer->25 Rank [26;30]: Cash Investment/Withdrawal/Transfer/Portfolio Transfer->30 Rank [31;35]: Income->35 Rank [36;40]: Redemptions->40 Rank [41;45]: Management Fees ->45 Rank =99: Others->99 } {--------------------------------------------------} IF(@TRANSVIEW_FILTER=1, IF(@OPERATION_CLASS_RANK>=1 AND @OPERATION_CLASS_RANK<=5,5, IF(@OPERATION_CLASS_RANK>5 AND @OPERATION_CLASS_RANK<=10,10, IF(@OPERATION_CLASS_RANK>10 AND @OPERATION_CLASS_RANK<=15,15, IF(@OPERATION_CLASS_RANK>15 AND @OPERATION_CLASS_RANK<=20,20, IF(@OPERATION_CLASS_RANK>20 AND @OPERATION_CLASS_RANK<=25,25, IF(@OPERATION_CLASS_RANK>25 AND @OPERATION_CLASS_RANK<=30,30, IF(@OPERATION_CLASS_RANK>30 AND @OPERATION_CLASS_RANK<=35,35, IF(@OPERATION_CLASS_RANK>35 AND @OPERATION_CLASS_RANK<=40,40, IF(@OPERATION_CLASS_RANK>40 AND @OPERATION_CLASS_RANK<=45,45, IF(@OPERATION_CLASS_RANK=99,99 ) ))))))))),-1)") 
		
		/* PORTFOLIO_CODE */ 
		PORTFOLIO_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Portfolio-Code, en="Portfolio Code", fr="Code du portefeuille") 
			@sql:SQLName (value=PORTFOLIO_CODE) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CODE, Rank=266, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.code, portfolio_id.code )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.code, portfolio_id.code )") 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=2, ScriptDef="IF( child_ptf_id <> NULL, IF (GET_APPL_PARAM(\"CHILD_IN_PTF_CODE\") =\"1\", child_ptf_id, portfolio_id) , portfolio_id)") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, IF (GET_APPL_PARAM(\"CHILD_IN_PTF_CODE\") =\"1\", child_ptf_id, portfolio_id) , portfolio_id)") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=PORTFOLIO_INVEST_SER, Rank=61, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_de : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_de) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=61, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_en : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_en) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=61, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_fr : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_fr) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=61, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} IF( DOMAIN().port_cons_rule_e = 1 AND DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()] ) )") 
		
		/* PORTFOLIO_NAME */ 
		PORTFOLIO_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_NAME, Rank=267, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.name, portfolio_id.name )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.name, portfolio_id.name )") 
		
		/* POS_FILTER */ 
		POS_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=POS_FILTER) 
			@aaa:TripleA (FormatEltName=POS_FILTER, Rank=32, ScriptDef="{This format element is used to extract operations related to initial positions} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial Position} AND pos_nat_e = 1 {Main Position}") 
			@aaa:scpt (value="{This format element is used to extract operations related to initial positions} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial Position} AND pos_nat_e = 1 {Main Position}") 
		
		/* PTF_HIER_STRING */ 
		PTF_HIER_STRING : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en=Hierarchy, fr="Hiérarchie") 
			@sql:SQLName (value=PTF_HIER_STRING) 
			@aaa:TripleA (FormatEltName=PTF_HIER_STRING, Rank=269, ScriptDef="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {--------------------------------------------------------------} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
			@aaa:scpt (value="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {--------------------------------------------------------------} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
		
		/* REF_CURRENCY */ 
		REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=REF_CURRENCY, Rank=310, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, ref_currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, ref_currency_id.code )") 
		
		/* REMARKS */ 
		REMARKS : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Bemerkungen, en=Remarks, fr=Remarques) 
			@sql:SQLName (value=REMARKS) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=REMARKS, Rank=260, ScriptDef="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
		
		/* REMARKS */ 
		REMARKS_de : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Bemerkungen, en=Remarks, fr=Remarques) 
			@sql:SQLName (value=REMARKS_de) 
			@aaa:TripleA (FormatEltName=REMARKS, Rank=260, ScriptDef="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
		
		/* REMARKS */ 
		REMARKS_en : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Bemerkungen, en=Remarks, fr=Remarques) 
			@sql:SQLName (value=REMARKS_en) 
			@aaa:TripleA (FormatEltName=REMARKS, Rank=260, ScriptDef="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
		
		/* REMARKS */ 
		REMARKS_fr : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Bemerkungen, en=Remarks, fr=Remarques) 
			@sql:SQLName (value=REMARKS_fr) 
			@aaa:TripleA (FormatEltName=REMARKS, Rank=260, ScriptDef="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format displays an information message at the attention of the user, if the domain does not specify that the initial positions must be included or if the total of initial cost values is equal to 0.00 In such situations, it is impossible to compute the total of initial cost values (format element: TOT_AMT_COST_VALUE).} {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR1\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} IF( @TOT_AMT_COST_VALUE = 0, PRINTF(\"%s\", DISP_MSG(\"User Message\",\"PCK_DS_TURNOVER_ERR2\", TSL_CURRENT_LANGUAGE(), NULL)), {ELSE} NULL ) )") 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
		
		/* SERVER_FILTER */ 
		SERVER_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=SERVER_FILTER) 
			@aaa:TripleA (FormatEltName=SERVER_FILTER, Rank=34, ScriptDef="{This format element is used as a filter for the format to define the data which are going to be transmitted to UDP and available for display in the WUI} {------------------------------------------------------------} @CASHVIEW_FILTER = 1 OR @TRANSVIEW_FILTER = 1 OR @POS_FILTER = 1") 
			@aaa:scpt (value="{This format element is used as a filter for the format to define the data which are going to be transmitted to UDP and available for display in the WUI} {------------------------------------------------------------} @CASHVIEW_FILTER = 1 OR @TRANSVIEW_FILTER = 1 OR @POS_FILTER = 1") 
		
		/* SUMMARY_FILTER */ 
		SUMMARY_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=SUMMARY_FILTER) 
			@aaa:TripleA (FormatEltName=SUMMARY_FILTER, Rank=33, ScriptDef="{This format element is used to extract only 1 row per portfolio of the portfolio hierarchy. It is necessary to be sure that the string to build the hierarchy in the WUI is unique when no aggregations are requested} {----------------------------------------------------------} IF( @first_operation_id = id, 1, 0 )") 
			@aaa:scpt (value="{This format element is used to extract only 1 row per portfolio of the portfolio hierarchy. It is necessary to be sure that the string to build the hierarchy in the WUI is unique when no aggregations are requested} {----------------------------------------------------------} IF( @first_operation_id = id, 1, 0 )") 
		
		/* THIRD_COMP_RULE */ 
		THIRD_COMP_RULE : AAAEnumerations:DomainAAAThirdCompoE 
			@i18n:Label (de=Portfolio-Kunden-Zuordnung, en="Portfolio Link Nature", fr="Nature du lien avec le portefeuille") 
			@sql:SQLName (value=THIRD_COMP_RULE) 
			@aaa:TripleA (AttrSQLName=third_compo_e, FormatEltName=THIRD_COMP_RULE, Rank=3050, ScriptDef="{ --SQLFORMAT case when domain_client_id = NULL then NULL when client_id = domain_client_id then 1 when THIRD_PARTY_OWNERSHIP_RULE != NULL then 2 end }") 
			@aaa:scpt (value="{ --SQLFORMAT case when domain_client_id = NULL then NULL when client_id = domain_client_id then 1 when THIRD_PARTY_OWNERSHIP_RULE != NULL then 2 end }") 
		
		/* THIRD_PARTY_OWNERSHI */ 
		THIRD_PARTY_OWNERSHIP_RULE : AAAEnumerations:PortfolioThirdCompoOwnershipRuleE 
			@i18n:Label (de="Verfügungsgewalt", en="Ownership Rule", fr="Règle de propriété") 
			@sql:SQLName (value=THIRD_PARTY_OWNERSHIP_RULE) 
			@aaa:TripleA (AttrSQLName=ownership_rule_e, FormatEltName=THIRD_PARTY_OWNERSHI, Rank=3030, ScriptDef="{ --SQLFORMAT select max(ownership_rule_e) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
			@aaa:scpt (value="{ --SQLFORMAT select max(ownership_rule_e) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
		
		/* THIRD_PARTY_PERCT_OW */ 
		THIRD_PARTY_PERCT_OWNERSHIP : AAABusinessTypes:Number 
			@i18n:Label (de="Prozentsatz des Eigentums", en="Percentage of Ownership", fr="Pourcentage de la propriété") 
			@sql:SQLName (value=THIRD_PARTY_PERCT_OWNERSHIP) 
			@aaa:TripleA (FormatEltName=THIRD_PARTY_PERCT_OW, Rank=3040, ScriptDef="{ --SQLFORMAT select max(weight_n) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
			@aaa:scpt (value="{ --SQLFORMAT select max(weight_n) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
		
		/* third_party_portfoli */ 
		third_party_portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=third_party_portfolio_id) 
			@aaa:TripleA (FormatEltName=third_party_portfoli, Rank=3010, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
		
		/* TIME_RATIO_FACTOR */ 
		TIME_RATIO_FACTOR : AAABusinessTypes:Number 
			@i18n:Label (de=Zeitanteil, en="Time Ratio", fr="Tantième temporel") 
			@sql:SQLName (value=TIME_RATIO_FACTOR) 
			@aaa:TripleA (FormatEltName=TIME_RATIO_FACTOR, Rank=100, ScriptDef="{This format element computes a ratio based on the execution (operation) date of the operation and the From Date and Till Date of context (domain). } {------------------------------------------------------} DATEDIFF(@OPERATION_DATE, DOMAIN().calc_till_d, DAY) / DATEDIFF(DOMAIN().calc_from_d, DOMAIN().calc_till_d, DAY)") 
			@aaa:scpt (value="{This format element computes a ratio based on the execution (operation) date of the operation and the From Date and Till Date of context (domain). } {------------------------------------------------------} DATEDIFF(@OPERATION_DATE, DOMAIN().calc_till_d, DAY) / DATEDIFF(DOMAIN().calc_from_d, DOMAIN().calc_till_d, DAY)") 
		
		/* TOT_AMT_BUY_MONEY_MA */ 
		TOT_AMT_BUY_MONEY_MARKET : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Käufe Geldmarkt", en="Amount of Money Market Buy", fr="Montant des achats sur le marché monétaire") 
			@sql:SQLName (value=TOT_AMT_BUY_MONEY_MARKET) 
			@aaa:TripleA (FormatEltName=TOT_AMT_BUY_MONEY_MA, Rank=231, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of buy operations related to money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 11, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of buy operations related to money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 11, @portfolio_id )") 
		
		/* TOT_AMT_BUY_SECURITY */ 
		TOT_AMT_BUY_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Käufe", en="Amount of Buys Security", fr="Montant des achats de titre") 
			@sql:SQLName (value=TOT_AMT_BUY_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_AMT_BUY_SECURITY, Rank=226, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security buy.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 1, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security buy.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 1, @portfolio_id )") 
		
		/* TOT_AMT_COST_VALUE */ 
		TOT_AMT_COST_VALUE : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einstandswerte", en="Amount of Initial Values", fr="Montant des valeurs initiales") 
			@sql:SQLName (value=TOT_AMT_COST_VALUE) 
			@aaa:TripleA (FormatEltName=TOT_AMT_COST_VALUE, Rank=257, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total cost values in reference (domain) currency of initial positions. The objective is that the total cost values must reflect the total market values of initial positions. For this reason, only cash and security investments, cash and security withdrawals, management fees, incomes and incomes related to money market instrument will be taken into account. Besides, net amounts are taken into account rather instead of gross amounts because, the difference is in fact fees and taxes payed and which can be seen as a cash withdrawal. Remarks: This computation is only possible if the domain specifies that the positions must be included. Otherwise, the format element REMARKS will display a message to inform the user of that situation. } {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, 0, {ELSE} @TOT_INIT_AMT_INVEST_SECURITY - @TOT_INIT_AMT_WITHDR_SECURITY + @TOT_INIT_AMT_INVEST_CASH - @TOT_INIT_AMT_WITHDR_CASH + @TOT_INIT_AMT_INCOME + @TOT_INIT_AMT_INC_MONEY_MARKET - @TOT_INIT_AMT_MANAGEMENT_FEE )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total cost values in reference (domain) currency of initial positions. The objective is that the total cost values must reflect the total market values of initial positions. For this reason, only cash and security investments, cash and security withdrawals, management fees, incomes and incomes related to money market instrument will be taken into account. Besides, net amounts are taken into account rather instead of gross amounts because, the difference is in fact fees and taxes payed and which can be seen as a cash withdrawal. Remarks: This computation is only possible if the domain specifies that the positions must be included. Otherwise, the format element REMARKS will display a message to inform the user of that situation. } {------------------------------------------------------} IF( DOMAIN().load_pos_f = 0, 0, {ELSE} @TOT_INIT_AMT_INVEST_SECURITY - @TOT_INIT_AMT_WITHDR_SECURITY + @TOT_INIT_AMT_INVEST_CASH - @TOT_INIT_AMT_WITHDR_CASH + @TOT_INIT_AMT_INCOME + @TOT_INIT_AMT_INC_MONEY_MARKET - @TOT_INIT_AMT_MANAGEMENT_FEE )") 
		
		/* TOT_AMT_INC_MONEY_MA */ 
		TOT_AMT_INC_MONEY_MARKET : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einkommen aus Geldmarkt", en="Amount of Money Market Income", fr="Montant des revenus du marché monétaire") 
			@sql:SQLName (value=TOT_AMT_INC_MONEY_MARKET) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INC_MONEY_MA, Rank=230, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income of money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 32, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income of money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 32, @portfolio_id )") 
		
		/* TOT_AMT_INCOME */ 
		TOT_AMT_INCOME : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einkommen", en="Amount of Inc.", fr="Montant des revenus") 
			@sql:SQLName (value=TOT_AMT_INCOME) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INCOME, Rank=228, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income. Remarks: Incomes related to money market instruments are not included.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 31, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income. Remarks: Incomes related to money market instruments are not included.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 31, @portfolio_id )") 
		
		/* TOT_AMT_INSTR_IN */ 
		TOT_AMT_INSTR_IN : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag Zufluss", en="Received Amount", fr="Montant reçu") 
			@sql:SQLName (value=TOT_AMT_INSTR_IN) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INSTR_IN, Rank=243, ScriptDef="{This format element computes, for each instrument (in hierarchy or not), the total net amount in reference (domain) currency of incomings cash flows or amounts associated to operations impacting position of an instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (21,26,31,32,12,2,36,37) , open_oper_id.instr_id ) { OPERATION_CLASS_RANK = 21 => Security Investment operation OPERATION_CLASS_RANK = 26 => Cash Investment operation OPERATION_CLASS_RANK = 31 => Security Income operation OPERATION_CLASS_RANK = 32 => Money Market Income operation OPERATION_CLASS_RANK = 12 => Money Market Sell operation OPERATION_CLASS_RANK = 2 => Security Sell operation OPERATION_CLASS_RANK = 36 => Security Redemption operation OPERATION_CLASS_RANK = 37 => Money Market Redemption operation }") 
			@aaa:scpt (value="{This format element computes, for each instrument (in hierarchy or not), the total net amount in reference (domain) currency of incomings cash flows or amounts associated to operations impacting position of an instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (21,26,31,32,12,2,36,37) , open_oper_id.instr_id ) { OPERATION_CLASS_RANK = 21 => Security Investment operation OPERATION_CLASS_RANK = 26 => Cash Investment operation OPERATION_CLASS_RANK = 31 => Security Income operation OPERATION_CLASS_RANK = 32 => Money Market Income operation OPERATION_CLASS_RANK = 12 => Money Market Sell operation OPERATION_CLASS_RANK = 2 => Security Sell operation OPERATION_CLASS_RANK = 36 => Security Redemption operation OPERATION_CLASS_RANK = 37 => Money Market Redemption operation }") 
		
		/* TOT_AMT_INSTR_OUT */ 
		TOT_AMT_INSTR_OUT : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag Abfluss", en="Paid Amount", fr="Montant payé") 
			@sql:SQLName (value=TOT_AMT_INSTR_OUT) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INSTR_OUT, Rank=244, ScriptDef="{This format element computes, for each instrument (in hierarchy or not), the total net amount in reference (domain) currency of outgoings cash flows per operations.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (22,27,11,1),open_oper_id.instr_id )") 
			@aaa:scpt (value="{This format element computes, for each instrument (in hierarchy or not), the total net amount in reference (domain) currency of outgoings cash flows per operations.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (22,27,11,1),open_oper_id.instr_id )") 
		
		/* TOT_AMT_INVEST_CASH */ 
		TOT_AMT_INVEST_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Einzahlungen", en="Amount of Cash Investments", fr="Montant des apports de liquidités") 
			@sql:SQLName (value=TOT_AMT_INVEST_CASH) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INVEST_CASH, Rank=236, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash investment.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash investment.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
		
		/* TOT_AMT_INVEST_SECUR */ 
		TOT_AMT_INVEST_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Einlieferungen", en="Amount of Security Investments", fr="Montant des apports de titre") 
			@sql:SQLName (value=TOT_AMT_INVEST_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_AMT_INVEST_SECUR, Rank=233, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security investment.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 21, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security investment.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 21, @portfolio_id )") 
		
		/* TOT_AMT_MANAGEMENT_F */ 
		TOT_AMT_MANAGEMENT_FEE : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Verwaltungskosten", en="Amount of Mgt. Fees", fr="Montant des frais de gestion") 
			@sql:SQLName (value=TOT_AMT_MANAGEMENT_FEE) 
			@aaa:TripleA (FormatEltName=TOT_AMT_MANAGEMENT_F, Rank=235, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to management fees.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 41, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to management fees.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 41, @portfolio_id )") 
		
		/* TOT_AMT_PONDERED_INV */ 
		TOT_AMT_PONDERED_INVEST_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Einzahlungen", en="Amount of Cash Investments", fr="Montant des apports de liquidités") 
			@sql:SQLName (value=TOT_AMT_PONDERED_INVEST_CASH) 
			@aaa:TripleA (FormatEltName=TOT_AMT_PONDERED_INV, Rank=237, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash investment. Each net amount is pondered by a time ratio giving more importance to operations which have occured at the beginning of the period covered by the From Date and Till Date of the context (domain). With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this ratio is calculated as following: Time ratio = [ TD - ED ] / [ TD - FD ] Remarks: The time ratio is already computed in the format element TIME_RATIO_FACTOR.} {------------------------------------------------------} 1 * TOT_SUM( @TIME_RATIO_FACTOR * @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash investment. Each net amount is pondered by a time ratio giving more importance to operations which have occured at the beginning of the period covered by the From Date and Till Date of the context (domain). With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this ratio is calculated as following: Time ratio = [ TD - ED ] / [ TD - FD ] Remarks: The time ratio is already computed in the format element TIME_RATIO_FACTOR.} {------------------------------------------------------} 1 * TOT_SUM( @TIME_RATIO_FACTOR * @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
		
		/* TOT_AMT_PONDERED_WIT */ 
		TOT_AMT_PONDERED_WITHDR_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Auszahlungen", en="Amount of Cash Withdrawals", fr="Montant des retraits de liquidités") 
			@sql:SQLName (value=TOT_AMT_PONDERED_WITHDR_CASH) 
			@aaa:TripleA (FormatEltName=TOT_AMT_PONDERED_WIT, Rank=239, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash withdrawal. Each net amount is pondered by a time ratio giving more importance to operations which have occured at the beginning of the period covered by the From Date and Till Date of the context (domain). With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this ratio is calculated as following: Time ratio = [ TD - ED ] / [ TD - FD ] Remarks: The time ratio is already computed in the format element TIME_RATIO_FACTOR. Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @TIME_RATIO_FACTOR * @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash withdrawal. Each net amount is pondered by a time ratio giving more importance to operations which have occured at the beginning of the period covered by the From Date and Till Date of the context (domain). With FD meaning From Date of context, TD meaning Till Date of context and ED meaning Execution (Operation) Date of operation, this ratio is calculated as following: Time ratio = [ TD - ED ] / [ TD - FD ] Remarks: The time ratio is already computed in the format element TIME_RATIO_FACTOR. Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @TIME_RATIO_FACTOR * @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
		
		/* TOT_AMT_PTF_IN */ 
		TOT_AMT_PTF_IN : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag Zufluss", en="Received Amount", fr="Montant reçu") 
			@sql:SQLName (value=TOT_AMT_PTF_IN) 
			@aaa:TripleA (FormatEltName=TOT_AMT_PTF_IN, Rank=241, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of incomings.} {------------------------------------------------------} @TOT_AMT_INVEST_SECURITY + @TOT_AMT_INVEST_CASH + @TOT_AMT_INCOME + @TOT_AMT_INC_MONEY_MARKET + @TOT_AMT_SELL_MONEY_MARKET + @TOT_AMT_SELL_SECURITY + @TOT_AMT_REDEMPTION") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of incomings.} {------------------------------------------------------} @TOT_AMT_INVEST_SECURITY + @TOT_AMT_INVEST_CASH + @TOT_AMT_INCOME + @TOT_AMT_INC_MONEY_MARKET + @TOT_AMT_SELL_MONEY_MARKET + @TOT_AMT_SELL_SECURITY + @TOT_AMT_REDEMPTION") 
		
		/* TOT_AMT_PTF_OUT */ 
		TOT_AMT_PTF_OUT : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag Abfluss", en="Paid Amount", fr="Montant payé") 
			@sql:SQLName (value=TOT_AMT_PTF_OUT) 
			@aaa:TripleA (FormatEltName=TOT_AMT_PTF_OUT, Rank=242, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of outgoings.} {------------------------------------------------------} @TOT_AMT_WITHDR_SECURITY + @TOT_AMT_WITHDR_CASH + @TOT_AMT_MANAGEMENT_FEE + @TOT_AMT_BUY_MONEY_MARKET + @TOT_AMT_BUY_SECURITY") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of outgoings.} {------------------------------------------------------} @TOT_AMT_WITHDR_SECURITY + @TOT_AMT_WITHDR_CASH + @TOT_AMT_MANAGEMENT_FEE + @TOT_AMT_BUY_MONEY_MARKET + @TOT_AMT_BUY_SECURITY") 
		
		/* TOT_AMT_REDEMPTION */ 
		TOT_AMT_REDEMPTION : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Anleihetilgungen", en="Amount of Redemptions", fr="Montant des remboursement") 
			@sql:SQLName (value=TOT_AMT_REDEMPTION) 
			@aaa:TripleA (FormatEltName=TOT_AMT_REDEMPTION, Rank=240, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to redemptions of bonds and equivalent.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (36,37), @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to redemptions of bonds and equivalent.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (36,37), @portfolio_id )") 
		
		/* TOT_AMT_SELL_MONEY_M */ 
		TOT_AMT_SELL_MONEY_MARKET : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Verkäufe Geldmarkt", en="Amount of Money Market Sell", fr="Montant des ventes sur le marché monétaire") 
			@sql:SQLName (value=TOT_AMT_SELL_MONEY_MARKET) 
			@aaa:TripleA (FormatEltName=TOT_AMT_SELL_MONEY_M, Rank=232, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of sell operations related to money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (12), @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of sell operations related to money market instrument.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK IN (12), @portfolio_id )") 
		
		/* TOT_AMT_SELL_SECURIT */ 
		TOT_AMT_SELL_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Verkäufe", en="Amount of Sells Security", fr="Montant des ventes de titre") 
			@sql:SQLName (value=TOT_AMT_SELL_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_AMT_SELL_SECURIT, Rank=227, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security sell.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 2, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security sell.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 2, @portfolio_id )") 
		
		/* TOT_AMT_WITHDR_CASH */ 
		TOT_AMT_WITHDR_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Auszahlungen", en="Amount of Cash Withdrawals", fr="Montant des retraits de liquidités") 
			@sql:SQLName (value=TOT_AMT_WITHDR_CASH) 
			@aaa:TripleA (FormatEltName=TOT_AMT_WITHDR_CASH, Rank=238, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash withdrawal. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to cash withdrawal. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
		
		/* TOT_AMT_WITHDR_SECUR */ 
		TOT_AMT_WITHDR_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Auslieferungen", en="Amount of Security Withdrawals", fr="Montant des retraits de titre") 
			@sql:SQLName (value=TOT_AMT_WITHDR_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_AMT_WITHDR_SECUR, Rank=234, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security withdrawal. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 22, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to security withdrawal. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @TRANSVIEW_FILTER = 1 AND @CASHVIEW_FILTER = 0 AND @OPERATION_CLASS_RANK = 22, @portfolio_id )") 
		
		/* TOT_INIT_AMT_INC_MON */ 
		TOT_INIT_AMT_INC_MONEY_MARKET : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einkommen aus Geldmarkt", en="Amount of Money Market Income", fr="Montant des revenus du marché monétaire") 
			@sql:SQLName (value=TOT_INIT_AMT_INC_MONEY_MARKET) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_INC_MON, Rank=250, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to income of money market instrument. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 32, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to income of money market instrument. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 32, @portfolio_id )") 
		
		/* TOT_INIT_AMT_INCOME */ 
		TOT_INIT_AMT_INCOME : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Einkommen", en="Amount of Inc.", fr="Montant des revenus") 
			@sql:SQLName (value=TOT_INIT_AMT_INCOME) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_INCOME, Rank=249, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income. It is in fact net amounts based on initial positions. Remarks: Incomes related to money market instruments are not included.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 31, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total net amount in reference (domain) currency of operations related to income. It is in fact net amounts based on initial positions. Remarks: Incomes related to money market instruments are not included.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 31, @portfolio_id )") 
		
		/* TOT_INIT_AMT_INVEST_ */ 
		TOT_INIT_AMT_INVEST_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Einzahlungen", en="Amount of Cash Investments", fr="Montant des apports de liquidités") 
			@sql:SQLName (value=TOT_INIT_AMT_INVEST_CASH) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_INVEST_, Rank=247, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to cash investment. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to cash investment. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 26, @portfolio_id )") 
		
		/* TOT_INIT_AMT_INVEST_ */ 
		TOT_INIT_AMT_INVEST_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Einlieferungen", en="Amount of Security Investments", fr="Montant des apports de titre") 
			@sql:SQLName (value=TOT_INIT_AMT_INVEST_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_INVEST_, Rank=245, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to security investment. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 21, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to security investment. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 21, @portfolio_id )") 
		
		/* TOT_INIT_AMT_MANAGEM */ 
		TOT_INIT_AMT_MANAGEMENT_FEE : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Verwaltungskosten", en="Amount of Mgt. Fees", fr="Montant des frais de gestion") 
			@sql:SQLName (value=TOT_INIT_AMT_MANAGEMENT_FEE) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_MANAGEM, Rank=251, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to management fees. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 41, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to management fees. It is in fact net amounts based on initial positions.} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 41, @portfolio_id )") 
		
		/* TOT_INIT_AMT_WITHDR_ */ 
		TOT_INIT_AMT_WITHDR_CASH : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Geld-Auszahlungen", en="Amount of Cash Withdrawals", fr="Montant des retraits de liquidités") 
			@sql:SQLName (value=TOT_INIT_AMT_WITHDR_CASH) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_WITHDR_, Rank=248, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to cash withdrawal. It is in fact net amounts based on initial positions. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to cash withdrawal. It is in fact net amounts based on initial positions. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 27, @portfolio_id )") 
		
		/* TOT_INIT_AMT_WITHDR_ */ 
		TOT_INIT_AMT_WITHDR_SECURITY : AAABusinessTypes:Amount 
			@i18n:Label (de="Gesamtbetrag der Wertpapier-Auslieferungen", en="Amount of Security Withdrawals", fr="Montant des retraits de titre") 
			@sql:SQLName (value=TOT_INIT_AMT_WITHDR_SECURITY) 
			@aaa:TripleA (FormatEltName=TOT_INIT_AMT_WITHDR_, Rank=246, ScriptDef="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to security withdrawal. It is in fact net amounts based on initial positions. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 22, @portfolio_id )") 
			@aaa:scpt (value="{This format element computes, for each portfolio (in hierarchy or not), the total initial net amount in reference (domain) currency of operations related to security withdrawal. It is in fact net amounts based on initial positions. Remarks: Transfer and Portfolio Transfer operations are also seen as Withdrawal operations} {------------------------------------------------------} 1 * TOT_SUM( @NET_AMOUNT_REF_CURR, @POS_FILTER = 1 AND @OPERATION_CLASS_RANK = 22, @portfolio_id )") 
		
		/* TRANSACTION_COUNTER */ 
		TRANSACTION_COUNTER : AAABusinessTypes:Int 
			@i18n:Label (de=Transaktionsanzahl, en="No of Transactions", fr="Nb de transactions") 
			@sql:SQLName (value=TRANSACTION_COUNTER) 
			@aaa:TripleA (FormatEltName=TRANSACTION_COUNTER, Rank=198, ScriptDef="{This format element indicates whether the operation is to security movements or not.} {---------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, 1, 0 )") 
			@aaa:scpt (value="{This format element indicates whether the operation is to security movements or not.} {---------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, 1, 0 )") 
		
		/* TRANSVIEW_FILTER */ 
		TRANSVIEW_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=TRANSVIEW_FILTER) 
			@aaa:TripleA (FormatEltName=TRANSVIEW_FILTER, Rank=31, ScriptDef="{This format element is used to extract operations related to security transactions} {-------------------------------------------} {The operations are extracted if} {It is a \"real\" transaction ==>} (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation})") 
			@aaa:scpt (value="{This format element is used to extract operations related to security transactions} {-------------------------------------------} {The operations are extracted if} {It is a \"real\" transaction ==>} (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation})") 
	} 
} 
