# UTF-8
Domain AAAFormatsPCKDSPOSDETAILS 
	@java:Package (value=aaa.formats) 
namespace "http://www.odcgroup.com/aaa-formats-PCK-DS-POS-DETAILS" 
metamodelVersion 4.3.0.20110527 
Classes { 
	/* PCK_DS_POSDETAILS */ 
	PCK_DS_POSDETAILS 
		@aaa:FormatColumnFilter (value=SERVER_FILTER) 
		@aaa:FormatFunction (value="PCK DS POS DETAILS") 
		@sql:SQLName (value=PCK_DS_POSDETAILS) 
		@aaa:TripleA (ColumnFilter=SERVER_FILTER, EntitySQLName=extended_pos, FinFuncName="PCK DS POS DETAILS", FinFuncProcName=PCK_DS_POS_DETAILS, FormatName=PCK_DS_POSDETAILS) 
	{ 
		/* ACCOUNT_CODE */ 
		ACCOUNT_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Kontonummer, en="Account Code", fr="Code du compte") 
			@sql:SQLName (value=ACCOUNT_CODE) 
			@aaa:TripleA (FormatEltName=ACCOUNT_CODE, Rank=287, ScriptDef="IF( instr_id.nature_e = 4 {Cash Account}, instr_id.code, NULL )", SortingRank=1) 
			@aaa:scpt (value="IF( instr_id.nature_e = 4 {Cash Account}, instr_id.code, NULL )") 
		
		/* ACCOUNT_DENOM */ 
		ACCOUNT_DENOM : AAABusinessTypes:UniString1000 
			@i18n:Label (de=Konto, en=Account, fr=Compte) 
			@sql:SQLName (value=ACCOUNT_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=ACCOUNT_DENOM, Rank=288, ScriptDef="IF( instr_id.nature_e = 4, {DB DENOM} IF( instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} instr_id.name ), NULL )") 
			@aaa:scpt (value="IF( instr_id.nature_e = 4, {DB DENOM} IF( instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} instr_id.name ), NULL )") 
		
		/* ACCOUNT_DENOM */ 
		ACCOUNT_DENOM_de : AAABusinessTypes:UniString1000 
			@sql:SQLName (value=ACCOUNT_DENOM_de) 
			@aaa:TripleA (FormatEltName=ACCOUNT_DENOM, Rank=288, ScriptDef) 
			@aaa:scpt (value) 
		
		/* ACCOUNT_DENOM */ 
		ACCOUNT_DENOM_en : AAABusinessTypes:UniString1000 
			@sql:SQLName (value=ACCOUNT_DENOM_en) 
			@aaa:TripleA (FormatEltName=ACCOUNT_DENOM, Rank=288, ScriptDef) 
			@aaa:scpt (value) 
		
		/* ACCOUNT_DENOM */ 
		ACCOUNT_DENOM_fr : AAABusinessTypes:UniString1000 
			@sql:SQLName (value=ACCOUNT_DENOM_fr) 
			@aaa:TripleA (FormatEltName=ACCOUNT_DENOM, Rank=288, ScriptDef) 
			@aaa:scpt (value) 
		
		/* account_id */ 
		account_id : AAABusinessTypes:Id 
			@sql:SQLName (value=account_id) 
			@aaa:TripleA (FormatEltName=account_id, Rank=7, ScriptDef="IF( instr_id.nature_e = 4, instr_id, NULL)") 
			@aaa:scpt (value="IF( instr_id.nature_e = 4, instr_id, NULL)") 
		
		/* ACCOUNTING_DATE */ 
		ACCOUNTING_DATE : AAABusinessTypes:Datetime 
			@i18n:Label (de=Buchungsdatum, en="Accounting Date", fr="Date de comptabilisation") 
			@sql:SQLName (value=ACCOUNTING_DATE) 
			@aaa:TripleA (FormatEltName=ACCOUNTING_DATE, Rank=442, ScriptDef=account_d) 
			@aaa:scpt (value=account_d) 
		
		/* ACCR_INTER_AMT_OPER_ */ 
		ACCR_INTER_AMT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Stückzins (Op. Währung)", en="Accrued Interests (Op. Ccy.)", fr="Intérêts courus (devise de l\'op.)") 
			@sql:SQLName (value=ACCR_INTER_AMT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=ACCR_INTER_AMT_OPER_, Rank=1502, ScriptDef="{This format element displays the accrued interests with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, @NET_POS_AMT_OPER_CURR - pos_net_amount_m, @NET_POS_AMT_OPER_CURR + pos_net_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the accrued interests with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, @NET_POS_AMT_OPER_CURR - pos_net_amount_m, @NET_POS_AMT_OPER_CURR + pos_net_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
		
		/* ACCR_INTER_AMT_REF_C */ 
		ACCR_INTER_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Stückzins (Ref. Währung)", en="Accrued Interests (Ref. Ccy.)", fr="Intérêts courus (devise de réf.)") 
			@sql:SQLName (value=ACCR_INTER_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=ACCR_INTER_AMT_REF_C, Rank=1507, ScriptDef="{This format element displays the accrued interests with sign of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, @NET_POS_AMT_REF_CURR - ref_gross_amount_m, @NET_POS_AMT_REF_CURR + ref_gross_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the accrued interests with sign of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, @NET_POS_AMT_REF_CURR - ref_gross_amount_m, @NET_POS_AMT_REF_CURR + ref_gross_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
		
		/* BEGIN_DATE */ 
		BEGIN_DATE : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Anfangsdatum, en="Begin Date", fr="Date de début") 
			@sql:SQLName (value=BEGIN_DATE) 
			@aaa:TripleA (FormatEltName=BEGIN_DATE, Rank=604, ScriptDef="IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e IN (5, 7) {Money Market, Forward} AND open_oper_id.instr_id.generic_f = 1, DATESTR(GET_EXT_OP(open_oper_id.ref_oper_code).operation_d), {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e IN (5, 7) AND open_oper_id.instr_id.generic_f = 1, DATESTR(operation_d), {ELSE} IF( open_oper_id.instr_id.nature_e IN (2, 11, 18, 19) {Fixed Income, Discount Instrument, Option Bond, Convertible Bond}, RIGHT(DATESTR(open_oper_id.instr_id.begin_d), 4), {ELSE} DATESTR(open_oper_id.instr_id.begin_d) ) ) )") 
			@aaa:scpt (value="IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e IN (5, 7) {Money Market, Forward} AND open_oper_id.instr_id.generic_f = 1, DATESTR(GET_EXT_OP(open_oper_id.ref_oper_code).operation_d), {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e IN (5, 7) AND open_oper_id.instr_id.generic_f = 1, DATESTR(operation_d), {ELSE} IF( open_oper_id.instr_id.nature_e IN (2, 11, 18, 19) {Fixed Income, Discount Instrument, Option Bond, Convertible Bond}, RIGHT(DATESTR(open_oper_id.instr_id.begin_d), 4), {ELSE} DATESTR(open_oper_id.instr_id.begin_d) ) ) )") 
		
		/* CASHVIEW_FILTER */ 
		CASHVIEW_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=CASHVIEW_FILTER) 
			@aaa:TripleA (FormatEltName=CASHVIEW_FILTER, Rank=30, ScriptDef="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 2 {Flow operation} AND instr_id.nature_e IN (4, 11) {related instrument is a Cash Account or a Discount Instrument} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND ( NOT ( main_ext_pos_id.instr_id.nature_e IN (6,7) ) OR ( main_ext_pos_id.instr_id.nature_e = 6 {Future instrument } AND GET_APPL_PARAM(\"FUT_ACC_FLAG\") = 0 ) OR ( main_ext_pos_id.instr_id.nature_e = 7 {Forward instrument } AND GET_APPL_PARAM(\"FWD_ACC_FLAG\") = 0 ) )") 
			@aaa:scpt (value="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 2 {Flow operation} AND instr_id.nature_e IN (4, 11) {related instrument is a Cash Account or a Discount Instrument} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND ( NOT ( main_ext_pos_id.instr_id.nature_e IN (6,7) ) OR ( main_ext_pos_id.instr_id.nature_e = 6 {Future instrument } AND GET_APPL_PARAM(\"FUT_ACC_FLAG\") = 0 ) OR ( main_ext_pos_id.instr_id.nature_e = 7 {Forward instrument } AND GET_APPL_PARAM(\"FWD_ACC_FLAG\") = 0 ) )") 
		
		/* CASHVIEW_FILTER_INIT */ 
		CASHVIEW_FILTER_INIT : AAABusinessTypes:Flag 
			@sql:SQLName (value=CASHVIEW_FILTER_INIT) 
			@aaa:TripleA (FormatEltName=CASHVIEW_FILTER_INIT, Rank=28, ScriptDef="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial position} AND instr_id.nature_e IN (4, 11) {related instrument is a Cash Account or a Discount Instrument} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded}", SortingRank=2) 
			@aaa:scpt (value="{This format element is used to extract operations related to cash movements} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial position} AND instr_id.nature_e IN (4, 11) {related instrument is a Cash Account or a Discount Instrument} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded}") 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=4, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.third_id, portfolio_id.third_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.third_id, portfolio_id.third_id )") 
		
		/* CONTRACT_SIZE */ 
		CONTRACT_SIZE : AAABusinessTypes:Number 
			@i18n:Label (de="Kontraktgrösse", en="Contract Size", fr="Taille du contrat") 
			@sql:SQLName (value=CONTRACT_SIZE) 
			@aaa:TripleA (FormatEltName=CONTRACT_SIZE, Rank=615, ScriptDef="IF( open_oper_id.instr_id.contract_size_n <> NULL AND open_oper_id.instr_id.contract_size_n <> 0, open_oper_id.instr_id.contract_size_n, 1 )") 
			@aaa:scpt (value="IF( open_oper_id.instr_id.contract_size_n <> NULL AND open_oper_id.instr_id.contract_size_n <> 0, open_oper_id.instr_id.contract_size_n, 1 )") 
		
		/* COST_PRICE */ 
		COST_PRICE : AAABusinessTypes:Number 
			@i18n:Label (de=Einstandspreis, en="Cost Price", fr="Prix d\'achat") 
			@sql:SQLName (value=COST_PRICE) 
			@aaa:TripleA (FormatEltName=COST_PRICE, Rank=603, ScriptDef="IF(open_oper_nat_e IN (4, 10, 13), IF(pos_nat_e=2,quote_n, instr_ext_pos_id.quote_n), IF(open_oper_nat_e = 5, IF(pos_nat_e=2,-1*quote_n, -1*instr_ext_pos_id.quote_n), IF(open_oper_nat_e IN (3, 6), IF(pos_nat_e=1,-1*quote_n, -1*main_ext_pos_id.quote_n), IF(pos_nat_e=1,quote_n, main_ext_pos_id.quote_n))))") 
			@aaa:scpt (value="IF(open_oper_nat_e IN (4, 10, 13), IF(pos_nat_e=2,quote_n, instr_ext_pos_id.quote_n), IF(open_oper_nat_e = 5, IF(pos_nat_e=2,-1*quote_n, -1*instr_ext_pos_id.quote_n), IF(open_oper_nat_e IN (3, 6), IF(pos_nat_e=1,-1*quote_n, -1*main_ext_pos_id.quote_n), IF(pos_nat_e=1,quote_n, main_ext_pos_id.quote_n))))") 
		
		/* CURR_CLASS_RANK */ 
		CURR_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Währungsklassifikation", en="Currency Classification", fr="Classification de la devise") 
			@sql:SQLName (value=CURR_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=CURR_CLASS_RANK, Rank=14, ScriptDef="{This format element is used to classify the operations based on the currency of their related position. The classification PCK_DS_CURRENCY (defined in the packaging parameter DS_CLASSIF_CURRENCY) on Currency entity is used for the computation. } {--------------------------------------------------} pos_currency_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_CURRENCY\")].rank_n") 
			@aaa:scpt (value="{This format element is used to classify the operations based on the currency of their related position. The classification PCK_DS_CURRENCY (defined in the packaging parameter DS_CLASSIF_CURRENCY) on Currency entity is used for the computation. } {--------------------------------------------------} pos_currency_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_CURRENCY\")].rank_n") 
		
		/* data_secu_prof_id */ 
		data_secu_prof_id : AAABusinessTypes:Id 
			@sql:SQLName (value=data_secu_prof_id) 
			@aaa:TripleA (FormatEltName=data_secu_prof_id, Rank=1, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.data_secu_prof_id, portfolio_id.data_secu_prof_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.data_secu_prof_id, portfolio_id.data_secu_prof_id )") 
		
		/* DEPOSIT_NAME */ 
		DEPOSIT_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Lagerstelle, en=Deposit, fr="Dépositaire") 
			@sql:SQLName (value=DEPOSIT_NAME) 
			@aaa:TripleA (FormatEltName=DEPOSIT_NAME, Rank=3001, ScriptDef=deposit_id.name) 
			@aaa:scpt (value=deposit_id.name) 
		
		/* EXPIRATION */ 
		EXPIRATION : AAABusinessTypes:Date 
			@i18n:Label (de=Verfalldatum, en="Expiration Date", fr="Date d\'expiration") 
			@sql:SQLName (value=EXPIRATION) 
			@aaa:TripleA (FormatEltName=EXPIRATION, Rank=606, ScriptDef="IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e = 5 AND open_oper_id.instr_id.generic_f = 1, GET_EXT_OP(open_oper_id.ref_oper_code).expiration_d, {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e = 5 AND open_oper_id.instr_id.generic_f = 1, expiration_d, {ELSE} IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e = 7 AND open_oper_id.instr_id.generic_f = 1, GET_EXT_OP(open_oper_id.ref_oper_code).value_d, {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e = 7 AND open_oper_id.instr_id.generic_f = 1, value_d, {ELSE} IF( open_oper_id.instr_id.nature_e IN (2,3,6,11,18,19), open_oper_id.instr_id.end_d, {ELSE} NULL ) ) ) ) ) {IF(open_oper_id.instr_id.nature_e=5,expiration_d, IF(open_oper_id.instr_id.nature_e IN (2,3,6,11,18,19),open_oper_id.instr_id.end_d, IF(open_oper_id.instr_id.nature_e=7,value_d)))}") 
			@aaa:scpt (value="IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e = 5 AND open_oper_id.instr_id.generic_f = 1, GET_EXT_OP(open_oper_id.ref_oper_code).expiration_d, {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e = 5 AND open_oper_id.instr_id.generic_f = 1, expiration_d, {ELSE} IF( open_oper_id.ref_oper_code <> NULL AND open_oper_id.instr_id.nature_e = 7 AND open_oper_id.instr_id.generic_f = 1, GET_EXT_OP(open_oper_id.ref_oper_code).value_d, {ELSE} IF( open_oper_id.ref_oper_code = NULL AND open_oper_id.instr_id.nature_e = 7 AND open_oper_id.instr_id.generic_f = 1, value_d, {ELSE} IF( open_oper_id.instr_id.nature_e IN (2,3,6,11,18,19), open_oper_id.instr_id.end_d, {ELSE} NULL ) ) ) ) ) {IF(open_oper_id.instr_id.nature_e=5,expiration_d, IF(open_oper_id.instr_id.nature_e IN (2,3,6,11,18,19),open_oper_id.instr_id.end_d, IF(open_oper_id.instr_id.nature_e=7,value_d)))}") 
		
		/* FEES_POS_AMOUNT_OPER */ 
		FEES_POS_AMOUNT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern (Op. Währung)", en="Fees And Taxes (Op. Ccy.)", fr="Frais et taxes (devise de l\'op.)") 
			@sql:SQLName (value=FEES_POS_AMOUNT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=FEES_POS_AMOUNT_OPER, Rank=2002, ScriptDef="{This format element displays the fees and taxes of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(@NET_POS_AMOUNT_OPER_CURR - @GROSS_POS_AMOUNT_OPER_CURR), ABS(@NET_POS_AMOUNT_OPER_CURR - @GROSS_POS_AMOUNT_OPER_CURR) ), {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the fees and taxes of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(@NET_POS_AMOUNT_OPER_CURR - @GROSS_POS_AMOUNT_OPER_CURR), ABS(@NET_POS_AMOUNT_OPER_CURR - @GROSS_POS_AMOUNT_OPER_CURR) ), {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
		
		/* FEES_POS_AMOUNT_REF_ */ 
		FEES_POS_AMOUNT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern (Ref. Währung)", en="Fees And Taxes (Ref. Ccy.)", fr="Frais et taxes (devise de réf.)") 
			@sql:SQLName (value=FEES_POS_AMOUNT_REF_CURR) 
			@aaa:TripleA (FormatEltName=FEES_POS_AMOUNT_REF_, Rank=2007, ScriptDef="{This format element displays the fees and taxes of an operation in reference (domain) currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(@NET_POS_AMOUNT_REF_CURR - @GROSS_POS_AMOUNT_REF_CURR), ABS(@NET_POS_AMOUNT_REF_CURR - @GROSS_POS_AMOUNT_REF_CURR) ), {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the fees and taxes of an operation in reference (domain) currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(@NET_POS_AMOUNT_REF_CURR - @GROSS_POS_AMOUNT_REF_CURR), ABS(@NET_POS_AMOUNT_REF_CURR - @GROSS_POS_AMOUNT_REF_CURR) ), {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
		
		/* FEES_POS_AMT_OPER_CU */ 
		FEES_POS_AMT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern (Op. Währung)", en="Fees And Taxes (Op. Ccy.)", fr="Frais et taxes (devise de l\'op.)") 
			@sql:SQLName (value=FEES_POS_AMT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=FEES_POS_AMT_OPER_CU, Rank=1503, ScriptDef="{This format element displays the fees and taxes with sign of an operation in operation currency. Reversals must also be taken into account. Remarks: This format element has only a meaning in position details.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, @NET_POS_AMT_OPER_CURR - @GROSS_POS_AMT_OPER_CURR - @ACCR_INTER_AMT_OPER_CURR, {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the fees and taxes with sign of an operation in operation currency. Reversals must also be taken into account. Remarks: This format element has only a meaning in position details.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, @NET_POS_AMT_OPER_CURR - @GROSS_POS_AMT_OPER_CURR - @ACCR_INTER_AMT_OPER_CURR, {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
		
		/* FEES_POS_AMT_REF_CUR */ 
		FEES_POS_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern (Ref. Währung)", en="Fees And Taxes (Ref. Ccy.)", fr="Frais et taxes (devise de réf.)") 
			@sql:SQLName (value=FEES_POS_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=FEES_POS_AMT_REF_CUR, Rank=1508, ScriptDef="{This format element displays the fees and taxes with sign of an operation in reference (domain) currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, @NET_POS_AMT_REF_CURR - @GROSS_POS_AMT_REF_CURR - @ACCR_INTER_AMT_REF_CURR, {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the fees and taxes with sign of an operation in reference (domain) currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, @NET_POS_AMT_REF_CURR - @GROSS_POS_AMT_REF_CURR - @ACCR_INTER_AMT_REF_CURR, {ELSE} IF( @CASHVIEW_FILTER = 1, 0, {ELSE} NULL ) )") 
		
		/* GROSS_POS_AMOUNT_OPE */ 
		GROSS_POS_AMOUNT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Bruttobetrag (Op. Währung)", en="Gross Amount (Op. Ccy.)", fr="Montant brut (devise de l\'op.)") 
			@sql:SQLName (value=GROSS_POS_AMOUNT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=GROSS_POS_AMOUNT_OPE, Rank=2001, ScriptDef="{This format element displays the gross amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_gross_amount_m), ABS(pos_gross_amount_m) ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.pos_gross_amount_m), ABS(main_ext_pos_id.pos_gross_amount_m) ), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the gross amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_gross_amount_m), ABS(pos_gross_amount_m) ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.pos_gross_amount_m), ABS(main_ext_pos_id.pos_gross_amount_m) ), {ELSE} NULL ) )") 
		
		/* GROSS_POS_AMOUNT_REF */ 
		GROSS_POS_AMOUNT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Bruttobetrag (Ref. Währung)", en="Gross Amount (Ref. Ccy.)", fr="Montant brut (devise de réf.)") 
			@sql:SQLName (value=GROSS_POS_AMOUNT_REF_CURR) 
			@aaa:TripleA (FormatEltName=GROSS_POS_AMOUNT_REF, Rank=2006, ScriptDef="{This format element displays the gross amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_gross_amount_m), ABS(ref_gross_amount_m) ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.ref_gross_amount_m), ABS(main_ext_pos_id.ref_gross_amount_m) ), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the gross amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_gross_amount_m), ABS(ref_gross_amount_m) ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.ref_gross_amount_m), ABS(main_ext_pos_id.ref_gross_amount_m) ), {ELSE} NULL ) )") 
		
		/* GROSS_POS_AMT_OPER_C */ 
		GROSS_POS_AMT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Bruttobetrag (Op. Währung)", en="Gross Amount (Op. Ccy.)", fr="Montant brut (devise de l\'op.)") 
			@sql:SQLName (value=GROSS_POS_AMT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=GROSS_POS_AMT_OPER_C, Rank=1501, ScriptDef="{This format element displays the gross amount with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, pos_gross_amount_m, -pos_gross_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, main_ext_pos_id.pos_gross_amount_m, -main_ext_pos_id.pos_gross_amount_m ), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the gross amount with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, pos_gross_amount_m, -pos_gross_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, main_ext_pos_id.pos_gross_amount_m, -main_ext_pos_id.pos_gross_amount_m ), {ELSE} NULL ) )") 
		
		/* GROSS_POS_AMT_REF_CU */ 
		GROSS_POS_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Bruttobetrag (Ref. Währung)", en="Gross Amount (Ref. Ccy.)", fr="Montant brut (devise de réf.)") 
			@sql:SQLName (value=GROSS_POS_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=GROSS_POS_AMT_REF_CU, Rank=1506, ScriptDef="{This format element displays the gross amount with sign of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, ref_gross_amount_m, -ref_gross_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, main_ext_pos_id.ref_gross_amount_m, -main_ext_pos_id.ref_gross_amount_m ), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the gross amount with sign of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, ref_gross_amount_m, -ref_gross_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( open_oper_nat_e = 10 {Transfer operation}, main_ext_pos_id.ref_gross_amount_m, -main_ext_pos_id.ref_gross_amount_m ), {ELSE} NULL ) )") 
		
		/* id */ 
		id : AAABusinessTypes:Id 
			@sql:SQLName (value=id) 
			@aaa:TripleA (FormatEltName=id, Rank=5, ScriptDef=id) 
			@aaa:scpt (value=id) 
		
		/* INSTR_CODE */ 
		INSTR_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Instrument, en="Instrument Code", fr="Code de l\'instrument") 
			@sql:SQLName (value=INSTR_CODE) 
			@aaa:TripleA (FormatEltName=INSTR_CODE, Rank=290, ScriptDef=open_oper_id.instr_id.code) 
			@aaa:scpt (value=open_oper_id.instr_id.code) 
		
		/* INSTR_CURR_CLASS_COD */ 
		INSTR_CURR_CLASS_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Anlagekategorie, en="Asset Class", fr="Catégorie d\'actif") 
			@sql:SQLName (value=INSTR_CURR_CLASS_CODE) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=INSTR_CURR_CLASS_COD, Rank=15, ScriptDef="{This format element is used to classify the instruments used in operation. The classification is based on the reference currency of the instrument. The classification PCK_DS_CURRENCY (defined in the packaging parameter DS_CLASSIF_CURRENCY) on Currency entity is used for the classification. } {--------------------------------------------------} open_oper_id.instr_id.ref_curr_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_CURRENCY\")].list_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom") 
			@aaa:scpt (value="{This format element is used to classify the instruments used in operation. The classification is based on the reference currency of the instrument. The classification PCK_DS_CURRENCY (defined in the packaging parameter DS_CLASSIF_CURRENCY) on Currency entity is used for the classification. } {--------------------------------------------------} open_oper_id.instr_id.ref_curr_id.CLASSIFY[GET_APPL_PARAM(\"DS_CLASSIF_CURRENCY\")].list_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom") 
		
		/* INSTR_CURR_CLASS_COD */ 
		INSTR_CURR_CLASS_CODE_de : AAABusinessTypes:UniCode 
			@sql:SQLName (value=INSTR_CURR_CLASS_CODE_de) 
			@aaa:TripleA (FormatEltName=INSTR_CURR_CLASS_COD, Rank=15, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_CURR_CLASS_COD */ 
		INSTR_CURR_CLASS_CODE_en : AAABusinessTypes:UniCode 
			@sql:SQLName (value=INSTR_CURR_CLASS_CODE_en) 
			@aaa:TripleA (FormatEltName=INSTR_CURR_CLASS_COD, Rank=15, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_CURR_CLASS_COD */ 
		INSTR_CURR_CLASS_CODE_fr : AAABusinessTypes:UniCode 
			@sql:SQLName (value=INSTR_CURR_CLASS_CODE_fr) 
			@aaa:TripleA (FormatEltName=INSTR_CURR_CLASS_COD, Rank=15, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM : AAABusinessTypes:UniNote 
			@i18n:Label (de=Instrument, en=Instrument, fr=Instrument) 
			@sql:SQLName (value=INSTR_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=INSTR_DENOM, Rank=500, ScriptDef="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
			@aaa:scpt (value="{DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_de : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_de) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_en : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_en) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* INSTR_DENOM */ 
		INSTR_DENOM_fr : AAABusinessTypes:UniNote 
			@sql:SQLName (value=INSTR_DENOM_fr) 
			@aaa:TripleA (FormatEltName=INSTR_DENOM, Rank=500, ScriptDef) 
			@aaa:scpt (value) 
		
		/* instr_id */ 
		instr_id : AAABusinessTypes:Id 
			@sql:SQLName (value=instr_id) 
			@aaa:TripleA (FormatEltName=instr_id, Rank=6, ScriptDef="{This format element returns the identifier of the main instrument on which is based the operation} {---------------------------------} open_oper_id.instr_id") 
			@aaa:scpt (value="{This format element returns the identifier of the main instrument on which is based the operation} {---------------------------------} open_oper_id.instr_id") 
		
		/* INSTR_REF_CURRENCY */ 
		INSTR_REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=INSTR_REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=INSTR_REF_CURRENCY, Rank=601, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} open_oper_id.instr_id.ref_curr_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} open_oper_id.instr_id.ref_curr_id.code )") 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=3, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.comm_mgr_id, portfolio_id.comm_mgr_id )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.comm_mgr_id, portfolio_id.comm_mgr_id )") 
		
		/* NET_POS_AMOUNT_OPER_ */ 
		NET_POS_AMOUNT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Op. Währung)", en="Net Amount (Op. Ccy.)", fr="Montant net (devise de l\'op.)") 
			@sql:SQLName (value=NET_POS_AMOUNT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=NET_POS_AMOUNT_OPER_, Rank=2000, ScriptDef="{This format element displays the net amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_net_amount_m), ABS(pos_net_amount_m) ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.pos_net_amount_m) , ABS(main_ext_pos_id.pos_net_amount_m) ), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the net amount of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(pos_net_amount_m), ABS(pos_net_amount_m) ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.pos_net_amount_m) , ABS(main_ext_pos_id.pos_net_amount_m) ), {ELSE} NULL ) )") 
		
		/* NET_POS_AMOUNT_REF_C */ 
		NET_POS_AMOUNT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Netto Betrag (Ref. Währung)", en="Net Amount (Ref. Ccy.)", fr="Montant net (devise de réf.)") 
			@sql:SQLName (value=NET_POS_AMOUNT_REF_CURR) 
			@aaa:TripleA (FormatEltName=NET_POS_AMOUNT_REF_C, Rank=2005, ScriptDef="{This format element displays the net amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_net_amount_m), ABS(ref_net_amount_m) ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.ref_net_amount_m), ABS(main_ext_pos_id.ref_net_amount_m) ), {ELSE} NULL ) )") 
			@aaa:scpt (value="{This format element displays the net amount of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(ref_net_amount_m), ABS(ref_net_amount_m) ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.ref_net_amount_m), ABS(main_ext_pos_id.ref_net_amount_m) ), {ELSE} NULL ) )") 
		
		/* NET_POS_AMT_OPER_CUR */ 
		NET_POS_AMT_OPER_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Op. Währung)", en="Net Amount (Op. Ccy.)", fr="Montant net (devise de l\'op.)") 
			@sql:SQLName (value=NET_POS_AMT_OPER_CURR) 
			@aaa:TripleA (FormatEltName=NET_POS_AMT_OPER_CUR, Rank=1500, ScriptDef="{This format element displays the net amount with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1 AND open_oper_id.instr_id.nature_e <> 4 {Instrument not a cash account}, IF( open_oper_nat_e IN (2, 3, 4) {Sell, Income and Investment operations}, GET_EXT_OP(open_oper_code).op_net_amount_m, -GET_EXT_OP(open_oper_code).op_net_amount_m ), IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e IN (1, 3, 4) {Buy, Income and Investment operations} {AND instrument is a cash account}, GET_EXT_OP(open_oper_code).op_net_amount_m, -GET_EXT_OP(open_oper_code).op_net_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( open_oper_nat_e IN (2, 3, 4) {Sell, Income and Investment operations}, GET_EXT_OP(main_ext_pos_id.open_oper_code).op_net_amount_m, -GET_EXT_OP(main_ext_pos_id.open_oper_code).op_net_amount_m ), {ELSE} NULL ) ) )") 
			@aaa:scpt (value="{This format element displays the net amount with sign of an operation in operation currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1 AND open_oper_id.instr_id.nature_e <> 4 {Instrument not a cash account}, IF( open_oper_nat_e IN (2, 3, 4) {Sell, Income and Investment operations}, GET_EXT_OP(open_oper_code).op_net_amount_m, -GET_EXT_OP(open_oper_code).op_net_amount_m ), IF( @TRANSVIEW_FILTER = 1, IF( open_oper_nat_e IN (1, 3, 4) {Buy, Income and Investment operations} {AND instrument is a cash account}, GET_EXT_OP(open_oper_code).op_net_amount_m, -GET_EXT_OP(open_oper_code).op_net_amount_m ), {ELSE} IF( @CASHVIEW_FILTER = 1, IF( open_oper_nat_e IN (2, 3, 4) {Sell, Income and Investment operations}, GET_EXT_OP(main_ext_pos_id.open_oper_code).op_net_amount_m, -GET_EXT_OP(main_ext_pos_id.open_oper_code).op_net_amount_m ), {ELSE} NULL ) ) )") 
		
		/* NET_POS_AMT_REF_CURR */ 
		NET_POS_AMT_REF_CURR : AAABusinessTypes:Amount 
			@i18n:Label (de="Nettobetrag (Ref. Währung)", en="Net Amount (Ref. Ccy.)", fr="Montant net (devise de réf.)") 
			@sql:SQLName (value=NET_POS_AMT_REF_CURR) 
			@aaa:TripleA (FormatEltName=NET_POS_AMT_REF_CURR, Rank=1505, ScriptDef="{This format element displays the net amount with sign of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, @NET_POS_AMT_OPER_CURR * pos_exch_rate, {ELSE} @NET_POS_AMT_OPER_CURR * main_ext_pos_id.pos_exch_rate )") 
			@aaa:scpt (value="{This format element displays the net amount with sign of an operation in domain currency. Reversals must also be taken into account.} {-------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, @NET_POS_AMT_OPER_CURR * pos_exch_rate, {ELSE} @NET_POS_AMT_OPER_CURR * main_ext_pos_id.pos_exch_rate )") 
		
		/* open_operation_id */ 
		open_operation_id : AAABusinessTypes:Id 
			@sql:SQLName (value=open_operation_id) 
			@aaa:TripleA (FormatEltName=open_operation_id, Rank=9, ScriptDef="{This format is used to retrieve the identifier of the operation from where the displayed operation is depending.} {-----------------------------------------} open_oper_id", SortingRank=4) 
			@aaa:scpt (value="{This format is used to retrieve the identifier of the operation from where the displayed operation is depending.} {-----------------------------------------} open_oper_id") 
		
		/* OPER_SUBTYPE_CODE */ 
		OPER_SUBTYPE_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de="Untertyp der Transaktion", en="Operation Sub-Type", fr="Sous-type de l\'opération") 
			@sql:SQLName (value=OPER_SUBTYPE_CODE) 
			@aaa:TripleA (FormatEltName=OPER_SUBTYPE_CODE, Rank=456, ScriptDef=open_oper_id.subtype_id.code) 
			@aaa:scpt (value=open_oper_id.subtype_id.code) 
		
		/* OPER_SUBTYPE_DENOM */ 
		OPER_SUBTYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de="Untertyp der Transaktion", en="Operation Sub-Type", fr="Sous-type de l\'opération") 
			@sql:SQLName (value=OPER_SUBTYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=OPER_SUBTYPE_DENOM, Rank=457, ScriptDef="IF( open_oper_id.subtype_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.subtype_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.subtype_id.name )") 
			@aaa:scpt (value="IF( open_oper_id.subtype_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.subtype_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.subtype_id.name )") 
		
		/* OPER_SUBTYPE_DENOM */ 
		OPER_SUBTYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPER_SUBTYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=OPER_SUBTYPE_DENOM, Rank=457, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPER_SUBTYPE_DENOM */ 
		OPER_SUBTYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPER_SUBTYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=OPER_SUBTYPE_DENOM, Rank=457, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPER_SUBTYPE_DENOM */ 
		OPER_SUBTYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPER_SUBTYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=OPER_SUBTYPE_DENOM, Rank=457, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_CLASS_RANK */ 
		OPERATION_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Klassifikation der Transaktion", en="Operation Classification", fr="Classification de l\'opération") 
			@sql:SQLName (value=OPERATION_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=OPERATION_CLASS_RANK, Rank=11, ScriptDef="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The classification PCK_DS_OPER_CLASS (defined in the packaging parameter DS_CLASSIF_OPER_CLASS) on Extended Position entity is used for the computation. The classification is the following: - Rank 1: Buy of Securities - Rank 2: Sell of Securities - Rank 6: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 16: Corporate Actions - Rank 11: Buy of Money Markets - Rank 12: Sell of Money Markets - Rank 21: Investments of Securities - Rank 22: Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 26: Investments of Cash - Rank 27: Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 28: Investment, Withdrawals, Transfers and Portfolio Transfers of Money Markets - Rank 31: Incomes (Dividends, Coupons, etc...) of instruments, which are not Money Markets - Rank 32: Incomes of Money Markets - Rank 36: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 37: Redemption of Money Markets - Rank 41: Management Fees - Rank 99: Other Operations } {--------------------------------------------------} CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n") 
			@aaa:scpt (value="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The classification PCK_DS_OPER_CLASS (defined in the packaging parameter DS_CLASSIF_OPER_CLASS) on Extended Position entity is used for the computation. The classification is the following: - Rank 1: Buy of Securities - Rank 2: Sell of Securities - Rank 6: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 16: Corporate Actions - Rank 11: Buy of Money Markets - Rank 12: Sell of Money Markets - Rank 21: Investments of Securities - Rank 22: Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 26: Investments of Cash - Rank 27: Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 28: Investment, Withdrawals, Transfers and Portfolio Transfers of Money Markets - Rank 31: Incomes (Dividends, Coupons, etc...) of instruments, which are not Money Markets - Rank 32: Incomes of Money Markets - Rank 36: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 37: Redemption of Money Markets - Rank 41: Management Fees - Rank 99: Other Operations } {--------------------------------------------------} CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n") 
		
		/* OPERATION_CODE */ 
		OPERATION_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Transaktionsnummer, en="Operation Code", fr="Code de l\'opération") 
			@sql:SQLName (value=OPERATION_CODE) 
			@aaa:TripleA (FormatEltName=OPERATION_CODE, Rank=321, ScriptDef=open_oper_code) 
			@aaa:scpt (value=open_oper_code) 
		
		/* OPERATION_DATE */ 
		OPERATION_DATE : AAABusinessTypes:Datetime 
			@i18n:Label (de="Ausführungsdatum", en="Execution Date", fr="Date d\'exécution") 
			@sql:SQLName (value=OPERATION_DATE) 
			@aaa:TripleA (FormatEltName=OPERATION_DATE, Rank=440, ScriptDef=operation_d, SortingRank=3) 
			@aaa:scpt (value=operation_d) 
		
		/* OPERATION_KEY */ 
		OPERATION_KEY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Transaktions-Schlüssel", en="Operation Key", fr="Clé de l\'opération") 
			@sql:SQLName (value=OPERATION_KEY) 
			@aaa:TripleA (FormatEltName=OPERATION_KEY, Rank=320, ScriptDef="IF( LEFT(GET_APPL_PARAM(\"AAA_VERSION\"), 2) = \"R3\", NUMSTR(open_oper_id), {ELSE} open_oper_code )") 
			@aaa:scpt (value="IF( LEFT(GET_APPL_PARAM(\"AAA_VERSION\"), 2) = \"R3\", NUMSTR(open_oper_id), {ELSE} open_oper_code )") 
		
		/* OPERATION_MAIN_CODE */ 
		OPERATION_MAIN_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Haupt-Transaktionsnummer, en="Main Operation Code", fr="Code de l\'opération principale") 
			@sql:SQLName (value=OPERATION_MAIN_CODE) 
			@aaa:TripleA (FormatEltName=OPERATION_MAIN_CODE, Rank=323, ScriptDef="{This format element can be used to regroup operations derived from a given previous operation. From exemple, a sell operation can be derived from a buy operation if the sell operation is due to a redemption} {------------------------------------------------------------} IF( open_oper_id.ref_oper_code <> NULL, open_oper_id.ref_oper_code, open_oper_code )") 
			@aaa:scpt (value="{This format element can be used to regroup operations derived from a given previous operation. From exemple, a sell operation can be derived from a buy operation if the sell operation is due to a redemption} {------------------------------------------------------------} IF( open_oper_id.ref_oper_code <> NULL, open_oper_id.ref_oper_code, open_oper_code )") 
		
		/* OPERATION_MERGED_CLA */ 
		OPERATION_MERGED_CLASS_RANK : AAABusinessTypes:Int 
			@i18n:Label (de="Klassifikation für gruppierte Transaktionen", en="Operation Merged Classification", fr="Classification regroupée de l\'opération") 
			@sql:SQLName (value=OPERATION_MERGED_CLASS_RANK) 
			@aaa:TripleA (FormatEltName=OPERATION_MERGED_CLA, Rank=13, ScriptDef="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The format OPERATION_CLASS_RANK is used for the computation. The classification is the following: - Rank 1: Corporate Actions - Rank 5: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 10: Incomes (Dividends, Coupons, etc...) of instruments - Rank 15: Buy and Sell of Securities - Rank 20: All operations related to Money Markets (buy, sell, redemption, etc...) except income - Rank 25: Investments, Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 30: Investments, Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 40: Management Fees - Rank 45: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 99: Other Operations } {--------------------------------------------------} IF( @OPERATION_CLASS_RANK IN (31, 32) {Income of Securities including Money Markets}, {Rank =} 10, {ELSE} IF( @OPERATION_CLASS_RANK IN (1, 2) {Buy or Sell of Securities}, {Rank =} 15, {ELSE} IF( @OPERATION_CLASS_RANK IN (11, 12, 37) {Buy, Sell or Redemption of Money Markets}, {Rank =} 20, {ELSE} IF( @OPERATION_CLASS_RANK IN (21, 22) {Investment or Withdrawal (include Transfer and Portfolio Transfer) of Securities}, {Rank =} 25, {ELSE} IF( @OPERATION_CLASS_RANK IN (26, 27) {Investment or Withdrawal (include Transfer and Portfolio Transfer) of Cash}, {Rank =} 30, {ELSE} @OPERATION_CLASS_RANK )))))") 
			@aaa:scpt (value="{This format element is used to classify the operations based on their operation nature and the nature of their related instrument. The format OPERATION_CLASS_RANK is used for the computation. The classification is the following: - Rank 1: Corporate Actions - Rank 5: Buy and Sell of Cash and Forward (FX Spot/Forward) - Rank 10: Incomes (Dividends, Coupons, etc...) of instruments - Rank 15: Buy and Sell of Securities - Rank 20: All operations related to Money Markets (buy, sell, redemption, etc...) except income - Rank 25: Investments, Withdrawals, Transfers and Portfolio Transfers of Securities - Rank 30: Investments, Withdrawals, Transfers and Portfolio Transfers of Cash - Rank 40: Management Fees - Rank 45: Redemptions of Bonds and equivalent (but not Money Markets) - Rank 99: Other Operations } {--------------------------------------------------} IF( @OPERATION_CLASS_RANK IN (31, 32) {Income of Securities including Money Markets}, {Rank =} 10, {ELSE} IF( @OPERATION_CLASS_RANK IN (1, 2) {Buy or Sell of Securities}, {Rank =} 15, {ELSE} IF( @OPERATION_CLASS_RANK IN (11, 12, 37) {Buy, Sell or Redemption of Money Markets}, {Rank =} 20, {ELSE} IF( @OPERATION_CLASS_RANK IN (21, 22) {Investment or Withdrawal (include Transfer and Portfolio Transfer) of Securities}, {Rank =} 25, {ELSE} IF( @OPERATION_CLASS_RANK IN (26, 27) {Investment or Withdrawal (include Transfer and Portfolio Transfer) of Cash}, {Rank =} 30, {ELSE} @OPERATION_CLASS_RANK )))))") 
		
		/* OPERATION_NATURE */ 
		OPERATION_NATURE : AAABusinessTypes:UniName 
			@i18n:Label (de=Art, en=Nature, fr=Nature) 
			@sql:SQLName (value=OPERATION_NATURE) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=OPERATION_NATURE, Rank=608, ScriptDef="open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
			@aaa:scpt (value="open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
		
		/* OPERATION_NATURE */ 
		OPERATION_NATURE_de : AAABusinessTypes:UniName 
			@sql:SQLName (value=OPERATION_NATURE_de) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE, Rank=608, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE */ 
		OPERATION_NATURE_en : AAABusinessTypes:UniName 
			@sql:SQLName (value=OPERATION_NATURE_en) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE, Rank=608, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE */ 
		OPERATION_NATURE_fr : AAABusinessTypes:UniName 
			@sql:SQLName (value=OPERATION_NATURE_fr) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE, Rank=608, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE_LAB */ 
		OPERATION_NATURE_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Transaktions-Art, en="Operation Nature", fr="Nature de l\'opération") 
			@sql:SQLName (value=OPERATION_NATURE_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=OPERATION_NATURE_LAB, Rank=331, ScriptDef="open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
			@aaa:scpt (value="open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
		
		/* OPERATION_NATURE_LAB */ 
		OPERATION_NATURE_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=OPERATION_NATURE_LABEL_de) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE_LAB, Rank=331, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE_LAB */ 
		OPERATION_NATURE_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=OPERATION_NATURE_LABEL_en) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE_LAB, Rank=331, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_NATURE_LAB */ 
		OPERATION_NATURE_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=OPERATION_NATURE_LABEL_fr) 
			@aaa:TripleA (FormatEltName=OPERATION_NATURE_LAB, Rank=331, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_REF_CODE */ 
		OPERATION_REF_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Referenzierung, en="Ref. Operation Code", fr="Code de l\'opération de réf.") 
			@sql:SQLName (value=OPERATION_REF_CODE) 
			@aaa:TripleA (FormatEltName=OPERATION_REF_CODE, Rank=322, ScriptDef=open_oper_id.ref_oper_code) 
			@aaa:scpt (value=open_oper_id.ref_oper_code) 
		
		/* OPERATION_TYPE_CODE */ 
		OPERATION_TYPE_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de="Code des Transkations-Typs", en="Operation Type Code", fr="Code du type d\'opération") 
			@sql:SQLName (value=OPERATION_TYPE_CODE) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_CODE, Rank=300, ScriptDef=open_oper_id.type_id.code) 
			@aaa:scpt (value=open_oper_id.type_id.code) 
		
		/* OPERATION_TYPE_DENOM */ 
		OPERATION_TYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Transaktions-Typ, en="Operation Type", fr="Type d\'opération") 
			@sql:SQLName (value=OPERATION_TYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=OPERATION_TYPE_DENOM, Rank=301, ScriptDef="IF( open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.type_id.name )") 
			@aaa:scpt (value="IF( open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, open_oper_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, open_oper_id.type_id.name )") 
		
		/* OPERATION_TYPE_DENOM */ 
		OPERATION_TYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPERATION_TYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_DENOM, Rank=301, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_TYPE_DENOM */ 
		OPERATION_TYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPERATION_TYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_DENOM, Rank=301, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_TYPE_DENOM */ 
		OPERATION_TYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=OPERATION_TYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_DENOM, Rank=301, ScriptDef) 
			@aaa:scpt (value) 
		
		/* OPERATION_TYPE_ID */ 
		OPERATION_TYPE_ID : AAABusinessTypes:Id 
			@i18n:Label (de=Transaktionstyp, en="Operation Type Identifier", fr="Identifiant du type d\'opération") 
			@sql:SQLName (value=OPERATION_TYPE_ID) 
			@aaa:TripleA (FormatEltName=OPERATION_TYPE_ID, Rank=299, ScriptDef=open_oper_id.type_id) 
			@aaa:scpt (value=open_oper_id.type_id) 
		
		/* PORTFOLIO_CODE */ 
		PORTFOLIO_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de="Portfolio Code", en="Portfolio Code", fr="Code du portefeuille") 
			@sql:SQLName (value=PORTFOLIO_CODE) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CODE, Rank=266, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.code, portfolio_id.code )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.code, portfolio_id.code )") 
		
		/* PORTFOLIO_CURRENCY */ 
		PORTFOLIO_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=PORTFOLIO_CURRENCY) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CURRENCY, Rank=311, ScriptDef="IF( child_ptf_id <> NULL, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", child_ptf_id.currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, child_ptf_id.currency_id.code ), {ELSE} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", portfolio_id.currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, portfolio_id.currency_id.code ) )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", child_ptf_id.currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, child_ptf_id.currency_id.code ), {ELSE} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", portfolio_id.currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, portfolio_id.currency_id.code ) )") 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=2, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id, portfolio_id)") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id, portfolio_id)") 
		
		/* PORTFOLIO_NAME */ 
		PORTFOLIO_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_NAME, Rank=267, ScriptDef="IF( child_ptf_id <> NULL, child_ptf_id.name, portfolio_id.name )") 
			@aaa:scpt (value="IF( child_ptf_id <> NULL, child_ptf_id.name, portfolio_id.name )") 
		
		/* POS_CURRENCY_COL */ 
		POS_CURRENCY_COL : AAABusinessTypes:UniCode 
			@i18n:Label (de="Pos. Whrg", en="Pos. Ccy", fr="Dev pos.") 
			@sql:SQLName (value=POS_CURRENCY_COL) 
			@aaa:TripleA (FormatEltName=POS_CURRENCY_COL, Rank=607, ScriptDef="IF( @TRANSVIEW_FILTER = 1, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, pos_currency_id.code ), {ELSE} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", main_ext_pos_id.pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, main_ext_pos_id.pos_currency_id.code ) )") 
			@aaa:scpt (value="IF( @TRANSVIEW_FILTER = 1, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, pos_currency_id.code ), {ELSE} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", main_ext_pos_id.pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, main_ext_pos_id.pos_currency_id.code ) )") 
		
		/* pos_details_instr_id */ 
		pos_details_instr_id : AAABusinessTypes:Id 
			@sql:SQLName (value=pos_details_instr_id) 
			@aaa:TripleA (FormatEltName=pos_details_instr_id, Rank=12, ScriptDef="{This format element returns the identifier of the instrument on which is based the position} {-------------------------------------------------------------------------------------------------} IF( @OPERATION_CLASS_RANK IN (1, 20, 25, 30, 35, 45, 50, 55, 60, 65, 70), open_oper_id.instr_id, instr_id )") 
			@aaa:scpt (value="{This format element returns the identifier of the instrument on which is based the position} {-------------------------------------------------------------------------------------------------} IF( @OPERATION_CLASS_RANK IN (1, 20, 25, 30, 35, 45, 50, 55, 60, 65, 70), open_oper_id.instr_id, instr_id )") 
		
		/* POS_FILTER */ 
		POS_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=POS_FILTER) 
			@aaa:TripleA (FormatEltName=POS_FILTER, Rank=32, ScriptDef="{This format element is used to extract operations related to initial positions} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial Position} AND pos_nat_e = 1 {Main Position}") 
			@aaa:scpt (value="{This format element is used to extract operations related to initial positions} {-------------------------------------------} {The operations are extracted if} nature_e = 1 {Initial Position} AND pos_nat_e = 1 {Main Position}") 
		
		/* POS_INSTR_DENOM */ 
		POS_INSTR_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Instrument, en=Instrument, fr=Instrument) 
			@sql:SQLName (value=POS_INSTR_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=POS_INSTR_DENOM, Rank=2030, ScriptDef="{This format element displays the label of the main instrument used in the operation.} {-------------------------------------------------------------------------------------------------} {DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
			@aaa:scpt (value="{This format element displays the label of the main instrument used in the operation.} {-------------------------------------------------------------------------------------------------} {DB DENOM} IF(open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom<>NULL, open_oper_id.instr_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, {DB NAME} open_oper_id.instr_id.name)") 
		
		/* POS_INSTR_DENOM */ 
		POS_INSTR_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=POS_INSTR_DENOM_de) 
			@aaa:TripleA (FormatEltName=POS_INSTR_DENOM, Rank=2030, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POS_INSTR_DENOM */ 
		POS_INSTR_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=POS_INSTR_DENOM_en) 
			@aaa:TripleA (FormatEltName=POS_INSTR_DENOM, Rank=2030, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POS_INSTR_DENOM */ 
		POS_INSTR_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=POS_INSTR_DENOM_fr) 
			@aaa:TripleA (FormatEltName=POS_INSTR_DENOM, Rank=2030, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POS_INSTR_REF_CURR */ 
		POS_INSTR_REF_CURR : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=POS_INSTR_REF_CURR) 
			@aaa:TripleA (FormatEltName=POS_INSTR_REF_CURR, Rank=2031, ScriptDef="{Remarks: This format element has only a meaning in position details.} {-------------------------------------------------------------------------------------------------} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", instr_id.ref_curr_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} instr_id.ref_curr_id.code )") 
			@aaa:scpt (value="{Remarks: This format element has only a meaning in position details.} {-------------------------------------------------------------------------------------------------} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", instr_id.ref_curr_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} instr_id.ref_curr_id.code )") 
		
		/* POS_INSTR_TYPE_DENOM */ 
		POS_INSTR_TYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Instrument-Typ, en="Instrument Type", fr="Type d\'instrument") 
			@sql:SQLName (value=POS_INSTR_TYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=POS_INSTR_TYPE_DENOM, Rank=2032, ScriptDef="{Remarks: This format element has only a meaning in position details.} {-------------------------------------------------------------------------------------------------} instr_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom") 
			@aaa:scpt (value="{Remarks: This format element has only a meaning in position details.} {-------------------------------------------------------------------------------------------------} instr_id.type_id.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom") 
		
		/* POS_INSTR_TYPE_DENOM */ 
		POS_INSTR_TYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=POS_INSTR_TYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=POS_INSTR_TYPE_DENOM, Rank=2032, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POS_INSTR_TYPE_DENOM */ 
		POS_INSTR_TYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=POS_INSTR_TYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=POS_INSTR_TYPE_DENOM, Rank=2032, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POS_INSTR_TYPE_DENOM */ 
		POS_INSTR_TYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=POS_INSTR_TYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=POS_INSTR_TYPE_DENOM, Rank=2032, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POS_PRICE */ 
		POS_PRICE : AAABusinessTypes:Number 
			@i18n:Label (de=Preis, en=Price, fr=Prix) 
			@sql:SQLName (value=POS_PRICE) 
			@aaa:TripleA (FormatEltName=POS_PRICE, Rank=2020, ScriptDef="{This format element displays the price of the instrument in the operation.} {---------------------------------------------------------} IF( pos_nat_e = 1 {Main Position}, ABS(quote_n), IF( @CASHVIEW_FILTER = 1, 1, IF( pos_nat_e = 17 {To Instrument Position}, ABS(instr_ext_pos_id.quote_n), {ELSE} ABS(main_ext_pos_id.quote_n) ) ) )") 
			@aaa:scpt (value="{This format element displays the price of the instrument in the operation.} {---------------------------------------------------------} IF( pos_nat_e = 1 {Main Position}, ABS(quote_n), IF( @CASHVIEW_FILTER = 1, 1, IF( pos_nat_e = 17 {To Instrument Position}, ABS(instr_ext_pos_id.quote_n), {ELSE} ABS(main_ext_pos_id.quote_n) ) ) )") 
		
		/* POS_PRICE_DEFINITION */ 
		POS_PRICE_DEFINITION_CURR : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=POS_PRICE_DEFINITION_CURR) 
			@aaa:TripleA (FormatEltName=POS_PRICE_DEFINITION, Rank=2022, ScriptDef="{This format element displays the currency of the instrument used in the operation generating the position. For a cash position, it is always the cash account currency. For a security position, whose quotation is not in percentage it is the instrument currency. And for a security quoted in percent, the value is NULL.} {--------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1 AND open_oper_id.instr_id.nature_e IN (2, 18, 19) {instrument is a bond, an option bond or a convertible bond}, NULL, {ELSE} IF( @CASHVIEW_FILTER = 1 AND open_oper_id.instr_id <> NULL {operation is related to an instrument}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id , GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, open_oper_id.instr_id.ref_curr_id.code ), {ELSE} IF( @CASHVIEW_FILTER = 1 AND open_oper_id.instr_id = NULL {operation is not related to an instrument, like fees & taxes}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).ref_curr_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).ref_curr_id.code ), {ELSE} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, pos_currency_id.code ) ) ) )") 
			@aaa:scpt (value="{This format element displays the currency of the instrument used in the operation generating the position. For a cash position, it is always the cash account currency. For a security position, whose quotation is not in percentage it is the instrument currency. And for a security quoted in percent, the value is NULL.} {--------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1 AND open_oper_id.instr_id.nature_e IN (2, 18, 19) {instrument is a bond, an option bond or a convertible bond}, NULL, {ELSE} IF( @CASHVIEW_FILTER = 1 AND open_oper_id.instr_id <> NULL {operation is related to an instrument}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id , GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, open_oper_id.instr_id.ref_curr_id.code ), {ELSE} IF( @CASHVIEW_FILTER = 1 AND open_oper_id.instr_id = NULL {operation is not related to an instrument, like fees & taxes}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).ref_curr_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).ref_curr_id.code ), {ELSE} IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", pos_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, pos_currency_id.code ) ) ) )") 
		
		/* POS_PRICE_DEFINITION */ 
		POS_PRICE_DEFINITION_PERCENT : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=POS_PRICE_DEFINITION_PERCENT) 
			@aaa:TripleA (FormatEltName=POS_PRICE_DEFINITION, Rank=2021, ScriptDef="{This format element displays the quotation symbol of bonds and equivalent used in the operation. Remarks: This format element has only a meaning in position details.} {--------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1 AND open_oper_id.instr_id.nature_e IN (2, 18, 19) {Instrument is a bond, an option bond or a convertible bond}, \"%\", NULL )") 
			@aaa:scpt (value="{This format element displays the quotation symbol of bonds and equivalent used in the operation. Remarks: This format element has only a meaning in position details.} {--------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1 AND open_oper_id.instr_id.nature_e IN (2, 18, 19) {Instrument is a bond, an option bond or a convertible bond}, \"%\", NULL )") 
		
		/* POSITION_DETAILS_FIL */ 
		POSITION_DETAILS_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=POSITION_DETAILS_FILTER) 
			@aaa:TripleA (FormatEltName=POSITION_DETAILS_FIL, Rank=53, ScriptDef="{This format is used in position details to extract only operations which created the positions (for example, an income will not be displayed for a bond position, but will be displayed for a cash position).} {-----------------------------------------------} IF( GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).nature_e = 4 {Instrument defined in the domain is a Cash Account} AND pos_nat_e = 1 {Main position}, {THEN} 1, {ELSE} IF( GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).nature_e <> 4 {Instrument defined in the domain is not a Cash Account} AND @TRANSVIEW_FILTER = 1 AND {open_oper_id.instr_id = DOMAIN().instr_object_id removed by OCS-39446} (open_oper_id.instr_id = DOMAIN().instr_object_id OR open_oper_id.adj_instr_id= DOMAIN().instr_object_id) {Instrument used in the operation is the same as the instrument defined in the domain}, {THEN} 1, {ELSE} 0 ))") 
			@aaa:scpt (value="{This format is used in position details to extract only operations which created the positions (for example, an income will not be displayed for a bond position, but will be displayed for a cash position).} {-----------------------------------------------} IF( GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).nature_e = 4 {Instrument defined in the domain is a Cash Account} AND pos_nat_e = 1 {Main position}, {THEN} 1, {ELSE} IF( GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).nature_e <> 4 {Instrument defined in the domain is not a Cash Account} AND @TRANSVIEW_FILTER = 1 AND {open_oper_id.instr_id = DOMAIN().instr_object_id removed by OCS-39446} (open_oper_id.instr_id = DOMAIN().instr_object_id OR open_oper_id.adj_instr_id= DOMAIN().instr_object_id) {Instrument used in the operation is the same as the instrument defined in the domain}, {THEN} 1, {ELSE} 0 ))") 
		
		/* POSITION_NATURE_LABE */ 
		POSITION_NATURE_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Positionsart, en="Position Nature", fr="Nature de la position") 
			@sql:SQLName (value=POSITION_NATURE_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=POSITION_NATURE_LABE, Rank=461, ScriptDef="pos_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
			@aaa:scpt (value="pos_nat_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
		
		/* POSITION_NATURE_LABE */ 
		POSITION_NATURE_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_NATURE_LABEL_de) 
			@aaa:TripleA (FormatEltName=POSITION_NATURE_LABE, Rank=461, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POSITION_NATURE_LABE */ 
		POSITION_NATURE_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_NATURE_LABEL_en) 
			@aaa:TripleA (FormatEltName=POSITION_NATURE_LABE, Rank=461, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POSITION_NATURE_LABE */ 
		POSITION_NATURE_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_NATURE_LABEL_fr) 
			@aaa:TripleA (FormatEltName=POSITION_NATURE_LABE, Rank=461, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POSITION_NATURE_VALU */ 
		POSITION_NATURE_VALUE : AAABusinessTypes:Enum 
			@i18n:Label (de=Positionsart, en="Position Nature", fr="Nature de la position") 
			@sql:SQLName (value=POSITION_NATURE_VALUE) 
			@aaa:TripleA (FormatEltName=POSITION_NATURE_VALU, Rank=460, ScriptDef=pos_nat_e) 
			@aaa:scpt (value=pos_nat_e) 
		
		/* POSITION_OP_NAT_LABE */ 
		POSITION_OP_NAT_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Transaktionsart, en="Operation Nature", fr="Nature de l\'opération") 
			@sql:SQLName (value=POSITION_OP_NAT_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=POSITION_OP_NAT_LABE, Rank=2015, ScriptDef="{This format element display the label of the operation nature, according to context (domain) language. The script is a little bit complex due to forex spot operations, where it is mandatory to revert the default label returned by Triple A.} {-------------------------------------------------------------------------------------------------} {Operation nature if main instrument is not a cash account} IF( open_oper_id.instr_id.nature_e <> 4 {Instrument, on which operation is based, is not a Cash Account}, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], {Operation nature if main instrument is a cash account but not related to Fx spot transaction} IF( open_oper_id.instr_id.nature_e = 4 {Instrument, on which operation is based, is a Cash Account} AND @OPERATION_CLASS_RANK <> 5 {Not an Fx spot transaction}, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], {Operation nature if main instrument is equal to cash account} {ELSE} IF( @OPERATION_CLASS_RANK = 5 {Fx spot transaction} AND open_oper_id.instr_id = instr_id, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], {Operation nature is \"Sell\" if it is a buy of forex and the main instrument is not equal to cash account} {ELSE} IF( @OPERATION_CLASS_RANK = 5 {Fx spot transaction} AND open_oper_nat_e = 1 {Buy operation} AND open_oper_id.instr_id <> instr_id, LABEL(\"extended_pos\", \"open_oper_nat_e\", 2 {Sell}, TSL_CURRENT_LANGUAGE()), {Operation nature is \"Buy\" if it is a sell of forex and the main instrument is not equal to cash account} {ELSE} IF( @OPERATION_CLASS_RANK = 5 {Fx spot transaction} AND open_oper_nat_e = 2 {Sell operation} AND open_oper_id.instr_id <> instr_id, LABEL(\"extended_pos\", \"open_oper_nat_e\", 1 {Buy}, TSL_CURRENT_LANGUAGE()), {No labels in any other cases} {ELSE} NULL ) ) ) ) )") 
			@aaa:scpt (value="{This format element display the label of the operation nature, according to context (domain) language. The script is a little bit complex due to forex spot operations, where it is mandatory to revert the default label returned by Triple A.} {-------------------------------------------------------------------------------------------------} {Operation nature if main instrument is not a cash account} IF( open_oper_id.instr_id.nature_e <> 4 {Instrument, on which operation is based, is not a Cash Account}, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], {Operation nature if main instrument is a cash account but not related to Fx spot transaction} IF( open_oper_id.instr_id.nature_e = 4 {Instrument, on which operation is based, is a Cash Account} AND @OPERATION_CLASS_RANK <> 5 {Not an Fx spot transaction}, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], {Operation nature if main instrument is equal to cash account} {ELSE} IF( @OPERATION_CLASS_RANK = 5 {Fx spot transaction} AND open_oper_id.instr_id = instr_id, open_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()], {Operation nature is \"Sell\" if it is a buy of forex and the main instrument is not equal to cash account} {ELSE} IF( @OPERATION_CLASS_RANK = 5 {Fx spot transaction} AND open_oper_nat_e = 1 {Buy operation} AND open_oper_id.instr_id <> instr_id, LABEL(\"extended_pos\", \"open_oper_nat_e\", 2 {Sell}, TSL_CURRENT_LANGUAGE()), {Operation nature is \"Buy\" if it is a sell of forex and the main instrument is not equal to cash account} {ELSE} IF( @OPERATION_CLASS_RANK = 5 {Fx spot transaction} AND open_oper_nat_e = 2 {Sell operation} AND open_oper_id.instr_id <> instr_id, LABEL(\"extended_pos\", \"open_oper_nat_e\", 1 {Buy}, TSL_CURRENT_LANGUAGE()), {No labels in any other cases} {ELSE} NULL ) ) ) ) )") 
		
		/* POSITION_OP_NAT_LABE */ 
		POSITION_OP_NAT_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_OP_NAT_LABEL_de) 
			@aaa:TripleA (FormatEltName=POSITION_OP_NAT_LABE, Rank=2015, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POSITION_OP_NAT_LABE */ 
		POSITION_OP_NAT_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_OP_NAT_LABEL_en) 
			@aaa:TripleA (FormatEltName=POSITION_OP_NAT_LABE, Rank=2015, ScriptDef) 
			@aaa:scpt (value) 
		
		/* POSITION_OP_NAT_LABE */ 
		POSITION_OP_NAT_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=POSITION_OP_NAT_LABEL_fr) 
			@aaa:TripleA (FormatEltName=POSITION_OP_NAT_LABE, Rank=2015, ScriptDef) 
			@aaa:scpt (value) 
		
		/* QUANTITY_CURR_POS_DE */ 
		QUANTITY_CURR_POS_DETAILS : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=QUANTITY_CURR_POS_DETAILS) 
			@aaa:TripleA (FormatEltName=QUANTITY_CURR_POS_DE, Rank=2011, ScriptDef="{This format element is used to display the currency of the quantity for position details. If the position is related to a security having nominal value (like bonds), then it is the instrument currency. If the position is related to cash (cash account), then it is in cash account currency} {--------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1 AND open_oper_id.instr_id.nature_e IN (2, 5, 18, 19) {instrument is a bond, a money market, an option bond or a convertible bond}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id , GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, open_oper_id.instr_id.ref_curr_id.code ), {ELSE} IF( @CASHVIEW_FILTER = 1 AND open_oper_id.instr_id <> NULL {operation is related to an instrument}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id , GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, open_oper_id.instr_id.ref_curr_id.code ), {ELSE} IF( @CASHVIEW_FILTER = 1 AND open_oper_id.instr_id = NULL {operation is not related to an instrument, like fees & taxes}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).ref_curr_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).ref_curr_id.code ), {ELSE} NULL ) ) )") 
			@aaa:scpt (value="{This format element is used to display the currency of the quantity for position details. If the position is related to a security having nominal value (like bonds), then it is the instrument currency. If the position is related to cash (cash account), then it is in cash account currency} {--------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1 AND open_oper_id.instr_id.nature_e IN (2, 5, 18, 19) {instrument is a bond, a money market, an option bond or a convertible bond}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id , GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, open_oper_id.instr_id.ref_curr_id.code ), {ELSE} IF( @CASHVIEW_FILTER = 1 AND open_oper_id.instr_id <> NULL {operation is related to an instrument}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", open_oper_id.instr_id.ref_curr_id , GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, open_oper_id.instr_id.ref_curr_id.code ), {ELSE} IF( @CASHVIEW_FILTER = 1 AND open_oper_id.instr_id = NULL {operation is not related to an instrument, like fees & taxes}, IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).ref_curr_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, GET_OBJECT(\"instrument\", DOMAIN().instr_object_id).ref_curr_id.code ), {ELSE} NULL ) ) )") 
		
		/* QUANTITY_POS_DETAILS */ 
		QUANTITY_POS_DETAILS : AAABusinessTypes:Number 
			@i18n:Label (de=Menge, en=Quantity, fr="Quantité") 
			@sql:SQLName (value=QUANTITY_POS_DETAILS) 
			@aaa:TripleA (FormatEltName=QUANTITY_POS_DETAILS, Rank=2010, ScriptDef="{This format element displays the quantity of instrument defined in the operation. As some instruments are in fact submitted to contract size (options, futures, ...), it is important not to forget to divide the quantity returned by the system with the contract size. Reversals must also be taken into account.} {--------------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( pos_nat_e = 1 {Main Position}, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(quantity_n/@CONTRACT_SIZE), ABS(quantity_n/@CONTRACT_SIZE) ), IF( pos_nat_e = 17 {To Instrument Position}, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(instr_ext_pos_id.quantity_n/@CONTRACT_SIZE), ABS(instr_ext_pos_id.quantity_n/@CONTRACT_SIZE) ), {ELSE} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.quantity_n/@CONTRACT_SIZE), ABS(main_ext_pos_id.quantity_n/@CONTRACT_SIZE) ) ) ), IF( pos_nat_e = 17 {To Instrument Position} AND @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(fi_gross_amount_m), ABS(fi_gross_amount_m) ), IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(quantity_n), ABS(quantity_n) ) ) ) )") 
			@aaa:scpt (value="{This format element displays the quantity of instrument defined in the operation. As some instruments are in fact submitted to contract size (options, futures, ...), it is important not to forget to divide the quantity returned by the system with the contract size. Reversals must also be taken into account.} {--------------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( pos_nat_e = 1 {Main Position}, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(quantity_n/@CONTRACT_SIZE), ABS(quantity_n/@CONTRACT_SIZE) ), IF( pos_nat_e = 17 {To Instrument Position}, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(instr_ext_pos_id.quantity_n/@CONTRACT_SIZE), ABS(instr_ext_pos_id.quantity_n/@CONTRACT_SIZE) ), {ELSE} IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(main_ext_pos_id.quantity_n/@CONTRACT_SIZE), ABS(main_ext_pos_id.quantity_n/@CONTRACT_SIZE) ) ) ), IF( pos_nat_e = 17 {To Instrument Position} AND @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(fi_gross_amount_m), ABS(fi_gross_amount_m) ), IF( @CASHVIEW_FILTER = 1, IF( rev_oper_nat_e = 1 {The operation is the reverse of another one}, -1*ABS(quantity_n), ABS(quantity_n) ) ) ) )") 
		
		/* REF_CURRENCY */ 
		REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="Währung", en=Ccy., fr=Devise) 
			@sql:SQLName (value=REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=REF_CURRENCY, Rank=310, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} ref_currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", ref_currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} ref_currency_id.code )") 
		
		/* REVERSAL_LABEL */ 
		REVERSAL_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Stornierung, en=Reversal, fr=Extourne) 
			@sql:SQLName (value=REVERSAL_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=REVERSAL_LABEL, Rank=455, ScriptDef="{This format element indicates if the operation is reversed, if it is the reverse of a reversed one or if it is just a single operation. The available values are: - Reverse: the operation is the reverse of a reversed operation - Reversed: the operation is reversed (cancelled) and another one with opposite signs is create (the reverse operation) } {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 0 {reverse nature is <None>}, NULL, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()] )") 
			@aaa:scpt (value="{This format element indicates if the operation is reversed, if it is the reverse of a reversed one or if it is just a single operation. The available values are: - Reverse: the operation is the reverse of a reversed operation - Reversed: the operation is reversed (cancelled) and another one with opposite signs is create (the reverse operation) } {-------------------------------------------------------------------------------------------------} IF( rev_oper_nat_e = 0 {reverse nature is <None>}, NULL, rev_oper_nat_e.LABEL[TSL_CURRENT_LANGUAGE()] )") 
		
		/* REVERSAL_LABEL */ 
		REVERSAL_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=REVERSAL_LABEL_de) 
			@aaa:TripleA (FormatEltName=REVERSAL_LABEL, Rank=455, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REVERSAL_LABEL */ 
		REVERSAL_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=REVERSAL_LABEL_en) 
			@aaa:TripleA (FormatEltName=REVERSAL_LABEL, Rank=455, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REVERSAL_LABEL */ 
		REVERSAL_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=REVERSAL_LABEL_fr) 
			@aaa:TripleA (FormatEltName=REVERSAL_LABEL, Rank=455, ScriptDef) 
			@aaa:scpt (value) 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
		
		/* SERVER_FILTER */ 
		SERVER_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=SERVER_FILTER) 
			@aaa:TripleA (FormatEltName=SERVER_FILTER, Rank=34, ScriptDef="{This format element is used as a filter for the format to define the data which are going to be transmitted to UDP and available for display in the WUI} {------------------------------------------------------------} @CASHVIEW_FILTER = 1 OR @TRANSVIEW_FILTER = 1 OR @POS_FILTER = 1") 
			@aaa:scpt (value="{This format element is used as a filter for the format to define the data which are going to be transmitted to UDP and available for display in the WUI} {------------------------------------------------------------} @CASHVIEW_FILTER = 1 OR @TRANSVIEW_FILTER = 1 OR @POS_FILTER = 1") 
		
		/* SIGNED_QUANTITY_POS_ */ 
		SIGNED_QUANTITY_POS_DETAILS : AAABusinessTypes:Number 
			@i18n:Label (de=Menge, en=Quantity, fr="Quantité") 
			@sql:SQLName (value=SIGNED_QUANTITY_POS_DETAILS) 
			@aaa:TripleA (FormatEltName=SIGNED_QUANTITY_POS_, Rank=2009, ScriptDef="{This format element displays the quantity with sign of instrument defined in the operation. As some instruments are in fact submitted to contract size (options, futures, ...), it is important not to forget to divide the quantity returned by the system with the contract size. Reversals must also be taken into account.} {--------------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( pos_nat_e = 1 {Main Position}, IF( open_oper_nat_e IN (5, 6, 10, 13) {Withdrawal, Fees & Taxes, Transfer and Portfolio Transfer}, -quantity_n/@CONTRACT_SIZE, quantity_n/@CONTRACT_SIZE ), IF( pos_nat_e = 17 {To Instrument Position}, IF( open_oper_nat_e IN (5, 6, 10, 13) {Withdrawal, Fees & Taxes, Transfer and Portfolio Transfer}, -instr_ext_pos_id.quantity_n/@CONTRACT_SIZE, instr_ext_pos_id.quantity_n/@CONTRACT_SIZE ), {ELSE} IF( open_oper_nat_e IN (5, 6, 10, 13) {Withdrawal, Fees & Taxes, Transfer and Portfolio Transfer}, -main_ext_pos_id.quantity_n/@CONTRACT_SIZE, main_ext_pos_id.quantity_n/@CONTRACT_SIZE ) ) ), IF( pos_nat_e = 17 {To Instrument Position} AND @CASHVIEW_FILTER = 1, IF( open_oper_nat_e IN (5, 6, 10, 13) {Withdrawal, Fees & Taxes, Transfer and Portfolio Transfer}, -fi_gross_amount_m, fi_gross_amount_m ), IF( @CASHVIEW_FILTER = 1, IF( open_oper_nat_e IN (10, 13) {Withdrawal, Transfer and Portfolio Transfer}, -main_ext_pos_id.quantity_n, main_ext_pos_id.quantity_n ) ) ) )") 
			@aaa:scpt (value="{This format element displays the quantity with sign of instrument defined in the operation. As some instruments are in fact submitted to contract size (options, futures, ...), it is important not to forget to divide the quantity returned by the system with the contract size. Reversals must also be taken into account.} {--------------------------------------------------------------------------------------------------------} IF( @TRANSVIEW_FILTER = 1, IF( pos_nat_e = 1 {Main Position}, IF( open_oper_nat_e IN (5, 6, 10, 13) {Withdrawal, Fees & Taxes, Transfer and Portfolio Transfer}, -quantity_n/@CONTRACT_SIZE, quantity_n/@CONTRACT_SIZE ), IF( pos_nat_e = 17 {To Instrument Position}, IF( open_oper_nat_e IN (5, 6, 10, 13) {Withdrawal, Fees & Taxes, Transfer and Portfolio Transfer}, -instr_ext_pos_id.quantity_n/@CONTRACT_SIZE, instr_ext_pos_id.quantity_n/@CONTRACT_SIZE ), {ELSE} IF( open_oper_nat_e IN (5, 6, 10, 13) {Withdrawal, Fees & Taxes, Transfer and Portfolio Transfer}, -main_ext_pos_id.quantity_n/@CONTRACT_SIZE, main_ext_pos_id.quantity_n/@CONTRACT_SIZE ) ) ), IF( pos_nat_e = 17 {To Instrument Position} AND @CASHVIEW_FILTER = 1, IF( open_oper_nat_e IN (5, 6, 10, 13) {Withdrawal, Fees & Taxes, Transfer and Portfolio Transfer}, -fi_gross_amount_m, fi_gross_amount_m ), IF( @CASHVIEW_FILTER = 1, IF( open_oper_nat_e IN (10, 13) {Withdrawal, Transfer and Portfolio Transfer}, -main_ext_pos_id.quantity_n, main_ext_pos_id.quantity_n ) ) ) )") 
		
		/* STATUS_FILTER */ 
		STATUS_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=STATUS_FILTER) 
			@aaa:TripleA (FormatEltName=STATUS_FILTER, Rank=52, ScriptDef="{This format is used in position details to extract only operations whose status is greater or equals to the minimum status defined in context (domain).} {-----------------------------------------------} IF( status_e >= DOMAIN().min_status_e, 1, 0 )") 
			@aaa:scpt (value="{This format is used in position details to extract only operations whose status is greater or equals to the minimum status defined in context (domain).} {-----------------------------------------------} IF( status_e >= DOMAIN().min_status_e, 1, 0 )") 
		
		/* STATUS_LABEL */ 
		STATUS_LABEL : AAABusinessTypes:UniLongName 
			@i18n:Label (de=Status, en=Status, fr=Statut) 
			@sql:SQLName (value=STATUS_LABEL) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=STATUS_LABEL, Rank=451, ScriptDef="status_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
			@aaa:scpt (value="status_e.LABEL[TSL_CURRENT_LANGUAGE()]") 
		
		/* STATUS_LABEL */ 
		STATUS_LABEL_de : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=STATUS_LABEL_de) 
			@aaa:TripleA (FormatEltName=STATUS_LABEL, Rank=451, ScriptDef) 
			@aaa:scpt (value) 
		
		/* STATUS_LABEL */ 
		STATUS_LABEL_en : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=STATUS_LABEL_en) 
			@aaa:TripleA (FormatEltName=STATUS_LABEL, Rank=451, ScriptDef) 
			@aaa:scpt (value) 
		
		/* STATUS_LABEL */ 
		STATUS_LABEL_fr : AAABusinessTypes:UniLongName 
			@sql:SQLName (value=STATUS_LABEL_fr) 
			@aaa:TripleA (FormatEltName=STATUS_LABEL, Rank=451, ScriptDef) 
			@aaa:scpt (value) 
		
		/* TRANSVIEW_FILTER */ 
		TRANSVIEW_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=TRANSVIEW_FILTER) 
			@aaa:TripleA (FormatEltName=TRANSVIEW_FILTER, Rank=31, ScriptDef="{This format element is used to extract operations related to security transactions} {-------------------------------------------} {The operations are extracted if} {It is a \"real\" transaction ==>} (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation}) OR {It is a cash movement, but related to a fx spot operation ==>} (nature_e = 2 {Flow operation} AND open_oper_id.instr_id.nature_e = 4 {related instrument is a Cash Account} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND open_oper_id.instr_id = instr_id {to select only the main operation} AND CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n = 5 {operations related to buy/sell of cash})") 
			@aaa:scpt (value="{This format element is used to extract operations related to security transactions} {-------------------------------------------} {The operations are extracted if} {It is a \"real\" transaction ==>} (nature_e = 2 {Flow operation} AND main_f = 1 {Main operation}) OR {It is a cash movement, but related to a fx spot operation ==>} (nature_e = 2 {Flow operation} AND open_oper_id.instr_id.nature_e = 4 {related instrument is a Cash Account} AND bal_pos_type_id = NULL {operation is not a balance position} AND quantity_n <> 0 {Cash movement with a debit/credit equal 0.00 are excluded} AND open_oper_id.instr_id = instr_id {to select only the main operation} AND CLASSIFY( GET_ENTITY(\"extended_pos\"), id, GET_APPL_PARAM(\"DS_CLASSIF_OPER_CLASS\")).rank_n = 5 {operations related to buy/sell of cash})") 
		
		/* VALUE_DATE */ 
		VALUE_DATE : AAABusinessTypes:Datetime 
			@i18n:Label (de=Valutadatum, en="Value Date", fr="Date de valeur") 
			@sql:SQLName (value=VALUE_DATE) 
			@aaa:TripleA (FormatEltName=VALUE_DATE, Rank=441, ScriptDef=value_d) 
			@aaa:scpt (value=value_d) 
	} 
} 
