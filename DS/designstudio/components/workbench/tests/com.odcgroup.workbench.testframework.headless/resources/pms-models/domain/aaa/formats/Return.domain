# UTF-8
Domain AAAFormatsReturn 
	@java:Package (value=com.odcgroup.aaa.formats) 
namespace "http://www.odcgroup.com/aaa-formats-return" 
metamodelVersion 4.3.0.20110527 
Classes { 
	/* PCK_DS_RET */ 
	PCK_DS_RET 
		@aaa:FormatFunction (value="Return Analysis") 
		@sql:SQLName (value=PCK_DS_RET) 
		@aaa:TripleA (EntitySQLName=port_synthetic, FinFuncName="Return Analysis", FinFuncProcName=return, FormatName=PCK_DS_RET) 
	{ 
		/* abscissa_market_seg */ 
		abscissa_market_seg : AAABusinessTypes:Id 
			@sql:SQLName (value=abscissa_market_seg) 
			@aaa:TripleA (FormatEltName=abscissa_market_seg, Rank=1011, ScriptDef=abscissa_market_seg_id) 
			@aaa:scpt (value=abscissa_market_seg_id) 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=BENCH_DENOM_de) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=BENCH_DENOM_en) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=BENCH_DENOM_fr) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=998, ScriptDef=portfolio_id.third_id) 
			@aaa:scpt (value=portfolio_id.third_id) 
		
		/* CLIENT_NAME */ 
		CLIENT_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Name des Kunden", en="Client Name", fr="Nom du client") 
			@sql:SQLName (value=CLIENT_NAME) 
			@aaa:TripleA (FormatEltName=CLIENT_NAME, Rank=55, ScriptDef=portfolio_id.third_id.name) 
			@aaa:scpt (value=portfolio_id.third_id.name) 
		
		/* CUMUL_CAP_EFFECT */ 
		CUMUL_CAP_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Kapitaleffekt", en="Capital Effect Cumul", fr="Effet Capital Cumulé") 
			@sql:SQLName (value=CUMUL_CAP_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_CAP_EFFECT, Rank=150, ScriptDef="{Return Capiatl Effect cumulated since cacl from date until end date of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).capital_effect") 
			@aaa:scpt (value="{Return Capiatl Effect cumulated since cacl from date until end date of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).capital_effect") 
		
		/* CUMUL_CAP_EFFECT_AMO */ 
		CUMUL_CAP_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de="kum. Kapital-G/V", en="Capital P&L Cumul", fr="P&P Capital Cumulé") 
			@sql:SQLName (value=CUMUL_CAP_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=CUMUL_CAP_EFFECT_AMO, Rank=154, ScriptDef="{Capital effect in amount cumulated} IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&net_unreal_cap_loss_m+&net_real_cap_loss_m+&net_unreal_cap_profit_m+&net_real_cap_profit_m,&final_d<=final_d,1,1)))") 
			@aaa:scpt (value="{Capital effect in amount cumulated} IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&net_unreal_cap_loss_m+&net_real_cap_loss_m+&net_unreal_cap_profit_m+&net_real_cap_profit_m,&final_d<=final_d,1,1)))") 
		
		/* CUMUL_CROSS_EFFECT */ 
		CUMUL_CROSS_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Wechselwirkungs-Effekt", en="Cross Effect Cumul", fr="Effet Croisé Cumulé") 
			@sql:SQLName (value=CUMUL_CROSS_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_CROSS_EFFECT, Rank=190, ScriptDef="@CUMUL_TOT_RET - @CUMUL_CAP_EFFECT - @CUMUL_CURR_EFFECT - @CUMUL_INCOME_EFFECT - @CUMUL_F_T_EFFECT") 
			@aaa:scpt (value="@CUMUL_TOT_RET - @CUMUL_CAP_EFFECT - @CUMUL_CURR_EFFECT - @CUMUL_INCOME_EFFECT - @CUMUL_F_T_EFFECT") 
		
		/* CUMUL_CURR_EFFECT */ 
		CUMUL_CURR_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Währungseffekt", en="Currency Effect Cumul", fr="Effet Devise Cumulé") 
			@sql:SQLName (value=CUMUL_CURR_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_CURR_EFFECT, Rank=160, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).current_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).current_effect") 
		
		/* CUMUL_CURR_EFFECT_AM */ 
		CUMUL_CURR_EFFECT_AMOUNT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Währungs-G/V", en="Currency P&L Cumul", fr="P&P Devise Cumulé") 
			@sql:SQLName (value=CUMUL_CURR_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=CUMUL_CURR_EFFECT_AM, Rank=163, ScriptDef="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_real_curr_profit_m + &net_real_curr_loss_m + &net_unreal_curr_profit_m + &net_unreal_curr_loss_m ,&final_d<=final_d,1,1))") 
			@aaa:scpt (value="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_real_curr_profit_m + &net_real_curr_loss_m + &net_unreal_curr_profit_m + &net_unreal_curr_loss_m ,&final_d<=final_d,1,1))") 
		
		/* CUMUL_F_T_EFFECT */ 
		CUMUL_F_T_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Gebühren/Steuern-Effekt", en="Fees & Taxes Effect Cumul", fr="Effet Frais & Taxes Cumulé") 
			@sql:SQLName (value=CUMUL_F_T_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_F_T_EFFECT, Rank=180, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).fees_tax_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).fees_tax_effect") 
		
		/* CUMUL_F_T_EFFECT_AMO */ 
		CUMUL_F_T_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de="kum. Gebühren/Steuern", en="Cumul Fees & Taxes", fr="Frais & Taxes Cumulé") 
			@sql:SQLName (value=CUMUL_F_T_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=CUMUL_F_T_EFFECT_AMO, Rank=183, ScriptDef="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&portf_fees_m+&portf_tax_m,&final_d<=final_d,1,1))") 
			@aaa:scpt (value="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&portf_fees_m+&portf_tax_m,&final_d<=final_d,1,1))") 
		
		/* CUMUL_GAIN_LOSS */ 
		CUMUL_GAIN_LOSS : AAABusinessTypes:Amount 
			@i18n:Label (de="kum. Gewinn & Verlust", en="Profits & Losses Cumul", fr="Profits & Pertes Cumulés") 
			@sql:SQLName (value=CUMUL_GAIN_LOSS) 
			@aaa:TripleA (FormatEltName=CUMUL_GAIN_LOSS, Rank=301, ScriptDef="IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m +&net_real_curr_profit_m +&net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m +&portf_fees_m + &portf_tax_m +&net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m + &unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m ,&final_d<=final_d,1,1)))") 
			@aaa:scpt (value="IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m +&net_real_curr_profit_m +&net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m +&portf_fees_m + &portf_tax_m +&net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m + &unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m ,&final_d<=final_d,1,1)))") 
		
		/* CUMUL_INCOME_EFFECT */ 
		CUMUL_INCOME_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Ertragseffekt", en="Income Effect Cumul", fr="Effet Revenu Cumulé") 
			@sql:SQLName (value=CUMUL_INCOME_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_INCOME_EFFECT, Rank=170, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).income_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).income_effect") 
		
		/* CUMUL_INCOME_EFFECT_ */ 
		CUMUL_INCOME_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de="kum. Ertrag", en="Cumul Income", fr="Revenu Cumulé") 
			@sql:SQLName (value=CUMUL_INCOME_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=CUMUL_INCOME_EFFECT_, Rank=173, ScriptDef="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&net_rec_income_m+&net_paid_income_m+&rec_accr_interest_m+&paid_accr_interest_m+&tax_credit_m+&unreal_rec_accr_interest_m+&unreal_paid_accr_interest_m,&final_d<=final_d,1,1))") 
			@aaa:scpt (value="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&net_rec_income_m+&net_paid_income_m+&rec_accr_interest_m+&paid_accr_interest_m+&tax_credit_m+&unreal_rec_accr_interest_m+&unreal_paid_accr_interest_m,&final_d<=final_d,1,1))") 
		
		/* CUMUL_TOT_RET */ 
		CUMUL_TOT_RET : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Portfolio Rendite", en="Portfolio Return Cumul", fr="Rendement Cumulé du Portefeuille") 
			@sql:SQLName (value=CUMUL_TOT_RET) 
			@aaa:TripleA (FormatEltName=CUMUL_TOT_RET, Rank=130, ScriptDef="{Return cumulated since calc from date at end of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).total_return") 
			@aaa:scpt (value="{Return cumulated since calc from date at end of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).total_return") 
		
		/* CUMUL_TOT_RET_BENCH */ 
		CUMUL_TOT_RET_BENCH : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Benchmark Rendite", en="Benchmark Return Cumul", fr="Rendement Cumulé de l\'Indice") 
			@sql:SQLName (value=CUMUL_TOT_RET_BENCH) 
			@aaa:TripleA (FormatEltName=CUMUL_TOT_RET_BENCH, Rank=140, ScriptDef="{Benchmark return cumulated from calc from date until end date of each period} IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<> NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,DOMAIN().calc_from_d), NULL)") 
			@aaa:scpt (value="{Benchmark return cumulated from calc from date until end date of each period} IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<> NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,DOMAIN().calc_from_d), NULL)") 
		
		/* data_secu_prof_id */ 
		data_secu_prof_id : AAABusinessTypes:Id 
			@sql:SQLName (value=data_secu_prof_id) 
			@aaa:TripleA (FormatEltName=data_secu_prof_id, Rank=1300, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} portfolio_id.data_secu_prof_id)") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} portfolio_id.data_secu_prof_id)") 
		
		/* FILTER_1 Filtering:This filter allows selecting the rows to be displayed into an analysis by sub-periods between from and till date. */ 
		FILTER_1 : AAABusinessTypes:Flag 
			@sql:SQLName (value=FILTER_1) 
			@aaa:TripleA (FormatEltName=FILTER_1, Rank=1, ScriptDef="{Filter used to have WUI display correct information when Synthetic Data is used: it filter the data to show result global in a monthly basis views} IF(grid_id=NULL,1,0)") 
			@aaa:scpt (value="{Filter used to have WUI display correct information when Synthetic Data is used: it filter the data to show result global in a monthly basis views} IF(grid_id=NULL,1,0)") 
		
		/* FILTER_2 */ 
		FILTER_2 : AAABusinessTypes:Flag 
			@sql:SQLName (value=FILTER_2) 
			@aaa:TripleA (FormatEltName=FILTER_2, Rank=2, ScriptDef="{Filter that flag the last monthly sub-period of the return analysis: it is used to filter the global rows for the last period that contains columns with return value for the full period} {IF(final_d>=DOMAIN().calc_till_d AND grid_id=NULL {OCS-35697 AND initial_d>=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH)},1,0)} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
			@aaa:scpt (value="{Filter that flag the last monthly sub-period of the return analysis: it is used to filter the global rows for the last period that contains columns with return value for the full period} {IF(final_d>=DOMAIN().calc_till_d AND grid_id=NULL {OCS-35697 AND initial_d>=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH)},1,0)} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
		
		/* FROM_DATE_IN_MKT_VAL */ 
		FROM_DATE_IN_MKT_VAL : AAABusinessTypes:Amount 
			@i18n:Label (de="Anfangsbetrag Marktwert", en="Initial Market Value", fr="Valeur d\'Inventaire Initiale") 
			@sql:SQLName (value=FROM_DATE_IN_MKT_VAL) 
			@aaa:TripleA (FormatEltName=FROM_DATE_IN_MKT_VAL, Rank=102, ScriptDef="{Provide the initial market value at domain calc from date for the last period} IF(@FILTER_2=1,TOT_FIRST(initial_market_value_m,initial_d=DOMAIN().calc_from_d,DOMAIN().calc_from_d, @PORTFOLIO_CODE),0)") 
			@aaa:scpt (value="{Provide the initial market value at domain calc from date for the last period} IF(@FILTER_2=1,TOT_FIRST(initial_market_value_m,initial_d=DOMAIN().calc_from_d,DOMAIN().calc_from_d, @PORTFOLIO_CODE),0)") 
		
		/* grid_id */ 
		grid_id : AAABusinessTypes:Id 
			@sql:SQLName (value=grid_id) 
			@aaa:TripleA (FormatEltName=grid_id, Rank=1010, ScriptDef=grid_id) 
			@aaa:scpt (value=grid_id) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_de : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_de) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef) 
			@aaa:scpt (value) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_en : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_en) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef) 
			@aaa:scpt (value) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_fr : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_fr) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef) 
			@aaa:scpt (value) 
		
		/* LAST_PER_GAIN_LOSS_S */ 
		LAST_PER_GAIN_LOSS_SYS : AAABusinessTypes:Amount 
			@i18n:Label (de=G&V, en=P&L, fr=P&L) 
			@sql:SQLName (value=LAST_PER_GAIN_LOSS_SYS) 
			@aaa:TripleA (FormatEltName=LAST_PER_GAIN_LOSS_S, Rank=440, ScriptDef="IF(@FILTER_2=1 {@IS_LAST_PERIOD_FLAG},TOT_SUM(net_real_cap_profit_m + net_real_cap_loss_m + net_unreal_cap_profit_m + net_unreal_cap_loss_m + net_real_curr_profit_m + net_real_curr_loss_m + net_unreal_curr_profit_m + net_unreal_curr_loss_m + rec_accr_interest_m + paid_accr_interest_m + unreal_rec_accr_interest_m + unreal_paid_accr_interest_m,1,@PORTFOLIO_CODE) / @SYS_EXCH_RATE,0)") 
			@aaa:scpt (value="IF(@FILTER_2=1 {@IS_LAST_PERIOD_FLAG},TOT_SUM(net_real_cap_profit_m + net_real_cap_loss_m + net_unreal_cap_profit_m + net_unreal_cap_loss_m + net_real_curr_profit_m + net_real_curr_loss_m + net_unreal_curr_profit_m + net_unreal_curr_loss_m + rec_accr_interest_m + paid_accr_interest_m + unreal_rec_accr_interest_m + unreal_paid_accr_interest_m,1,@PORTFOLIO_CODE) / @SYS_EXCH_RATE,0)") 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=999, ScriptDef=portfolio_id.comm_mgr_id) 
			@aaa:scpt (value=portfolio_id.comm_mgr_id) 
		
		/* MEAN_CAP */ 
		MEAN_CAP : AAABusinessTypes:Amount 
			@i18n:Label (de="Durchschn. invest. Kapital", en="Mean Capital", fr="Capital Investi Moyen") 
			@sql:SQLName (value=MEAN_CAP) 
			@aaa:TripleA (FormatEltName=MEAN_CAP, Rank=320, ScriptDef="MEAN_CAP(initial_d {@PERIOD_INITIAL_DATE},final_d,0,0,0,0,0)") 
			@aaa:scpt (value="MEAN_CAP(initial_d {@PERIOD_INITIAL_DATE},final_d,0,0,0,0,0)") 
		
		/* nature_e */ 
		nature_e : AAABusinessTypes:Enum 
			@sql:SQLName (value=nature_e) 
			@aaa:TripleA (FormatEltName=nature_e, Rank=1001, ScriptDef=nature_e) 
			@aaa:scpt (value=nature_e) 
		
		/* ordinate_market_seg */ 
		ordinate_market_seg : AAABusinessTypes:Id 
			@sql:SQLName (value=ordinate_market_seg) 
			@aaa:TripleA (FormatEltName=ordinate_market_seg, Rank=1012, ScriptDef=ordinate_market_seg_id) 
			@aaa:scpt (value=ordinate_market_seg_id) 
		
		/* OVER_UNDER_PERF */ 
		OVER_UNDER_PERF : AAABusinessTypes:Number 
			@i18n:Label (de="Über-/Unter-Performance", en="Over/Under Performance", fr="Sur/Sous Performance") 
			@sql:SQLName (value=OVER_UNDER_PERF) 
			@aaa:TripleA (FormatEltName=OVER_UNDER_PERF, Rank=132, ScriptDef="{Return differential between portfolio and benchmark} @CUMUL_TOT_RET - @CUMUL_TOT_RET_BENCH") 
			@aaa:scpt (value="{Return differential between portfolio and benchmark} @CUMUL_TOT_RET - @CUMUL_TOT_RET_BENCH") 
		
		/* PARENT_PTF_CODE */ 
		PARENT_PTF_CODE : AAABusinessTypes:UniCode 
			@sql:SQLName (value=PARENT_PTF_CODE) 
			@aaa:TripleA (FormatEltName=PARENT_PTF_CODE, Rank=24, ScriptDef="IF(DOMAIN().port_cons_rule_e IN(1,6), @HIERARCHY_HEAD, IF(portfolio_id.hier_port_id!=NULL, {head of 2}IF(portfolio_id.parent_port_id.parent_port_id!=NULL,portfolio_id.parent_port_id.parent_port_id.code, {head of 1}IF(portfolio_id.parent_port_id!=NULL, portfolio_id.parent_port_id.code)),{head of 0} @PORTFOLIO_CODE))") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN(1,6), @HIERARCHY_HEAD, IF(portfolio_id.hier_port_id!=NULL, {head of 2}IF(portfolio_id.parent_port_id.parent_port_id!=NULL,portfolio_id.parent_port_id.parent_port_id.code, {head of 1}IF(portfolio_id.parent_port_id!=NULL, portfolio_id.parent_port_id.code)),{head of 0} @PORTFOLIO_CODE))") 
		
		/* PARENT_PTF_NAME */ 
		PARENT_PTF_NAME : AAABusinessTypes:UniCode 
			@sql:SQLName (value=PARENT_PTF_NAME) 
			@aaa:TripleA (FormatEltName=PARENT_PTF_NAME, Rank=54, ScriptDef="IF(DOMAIN().port_cons_rule_e IN(1,6), @HIERARCHY_HEAD, IF(portfolio_id.hier_port_id!=NULL,portfolio_id.parent_port_id.name,@PORTFOLIO_NAME))") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN(1,6), @HIERARCHY_HEAD, IF(portfolio_id.hier_port_id!=NULL,portfolio_id.parent_port_id.name,@PORTFOLIO_NAME))") 
		
		/* PERIOD_CAP_EFFECT */ 
		PERIOD_CAP_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de=Kapitaleffekt, en="Capital Effect", fr="Effet Capital") 
			@sql:SQLName (value=PERIOD_CAP_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_CAP_EFFECT, Rank=152, ScriptDef="{Return capital effect per period} 100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).capital_effect") 
			@aaa:scpt (value="{Return capital effect per period} 100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).capital_effect") 
		
		/* PERIOD_CAP_EFFECT_AM */ 
		PERIOD_CAP_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de=Kapital-G/V, en="Capital P&L", fr="P&P Capital") 
			@sql:SQLName (value=PERIOD_CAP_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=PERIOD_CAP_EFFECT_AM, Rank=153, ScriptDef="TOT_SUM(net_unreal_cap_profit_m + net_unreal_cap_loss_m+net_real_cap_profit_m + net_real_cap_loss_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_unreal_cap_profit_m + net_unreal_cap_loss_m+net_real_cap_profit_m + net_real_cap_loss_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_CROSS_EFFECT */ 
		PERIOD_CROSS_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de=Wechselwirkungs-Effekt, en="Cross Effect", fr="Effet Croisé") 
			@sql:SQLName (value=PERIOD_CROSS_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_CROSS_EFFECT, Rank=191, ScriptDef="@PERIOD_TOT_RET - @PERIOD_CAP_EFFECT - @PERIOD_CURR_EFFECT - @PERIOD_INCOME_EFFECT - @PERIOD_F_T_EFFECT") 
			@aaa:scpt (value="@PERIOD_TOT_RET - @PERIOD_CAP_EFFECT - @PERIOD_CURR_EFFECT - @PERIOD_INCOME_EFFECT - @PERIOD_F_T_EFFECT") 
		
		/* PERIOD_CURR_EFFECT */ 
		PERIOD_CURR_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="Währungseffekt", en="Currency Effect", fr="Effet Devise") 
			@sql:SQLName (value=PERIOD_CURR_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_CURR_EFFECT, Rank=161, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).current_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).current_effect") 
		
		/* PERIOD_CURR_EFFECT_A */ 
		PERIOD_CURR_EFFECT_AMOUNT : AAABusinessTypes:Number 
			@i18n:Label (de="Währungs-G/V", en="Currency P&L", fr="P&P Devise") 
			@sql:SQLName (value=PERIOD_CURR_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=PERIOD_CURR_EFFECT_A, Rank=162, ScriptDef="TOT_SUM(net_real_curr_profit_m + net_real_curr_loss_m+net_unreal_curr_profit_m + net_unreal_curr_loss_m , 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_real_curr_profit_m + net_real_curr_loss_m+net_unreal_curr_profit_m + net_unreal_curr_loss_m , 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_DENOM */ 
		PERIOD_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Zeitraum, en=Period, fr="Période") 
			@sql:SQLName (value=PERIOD_DENOM) 
			@aaa:TripleA (FormatEltName=PERIOD_DENOM, Rank=37, ScriptDef="DATESTR(final_d,\"YYYY MONTH, DD\")") 
			@aaa:scpt (value="DATESTR(final_d,\"YYYY MONTH, DD\")") 
		
		/* PERIOD_END_OF */ 
		PERIOD_END_OF : AAABusinessTypes:Date 
			@i18n:Label (de="Enddatum des Zeitraums", en="Period Final Date", fr="Date de Fin de Période") 
			@sql:SQLName (value=PERIOD_END_OF) 
			@aaa:TripleA (FormatEltName=PERIOD_END_OF, Rank=35, ScriptDef=final_d) 
			@aaa:scpt (value=final_d) 
		
		/* PERIOD_F_T_EFFECT */ 
		PERIOD_F_T_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="Gebühren/Steuern-Effekt", en="Fees & Taxes Effect", fr="Effet Frais & Taxes") 
			@sql:SQLName (value=PERIOD_F_T_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_F_T_EFFECT, Rank=181, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).fees_tax_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).fees_tax_effect") 
		
		/* PERIOD_F_T_EFFECT_AM */ 
		PERIOD_F_T_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern", en="Fees & Taxes", fr="Frais & Taxes") 
			@sql:SQLName (value=PERIOD_F_T_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=PERIOD_F_T_EFFECT_AM, Rank=182, ScriptDef="TOT_SUM(portf_fees_m + portf_tax_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(portf_fees_m + portf_tax_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_FINAL_DATE */ 
		PERIOD_FINAL_DATE : AAABusinessTypes:Date 
			@i18n:Label (de=Enddatum, en="Final Date", fr="Date de Fin") 
			@sql:SQLName (value=PERIOD_FINAL_DATE) 
			@aaa:TripleA (FormatEltName=PERIOD_FINAL_DATE, Rank=21, ScriptDef=final_d, SortingRank=2) 
			@aaa:scpt (value=final_d) 
		
		/* PERIOD_FINAL_MKT_VAL */ 
		PERIOD_FINAL_MKT_VAL : AAABusinessTypes:Amount 
			@i18n:Label (de=End-Marktwert, en="Final Market Value", fr="Valeur d\'Inventaire Finale") 
			@sql:SQLName (value=PERIOD_FINAL_MKT_VAL) 
			@aaa:TripleA (FormatEltName=PERIOD_FINAL_MKT_VAL, Rank=101, ScriptDef="{final market value at final date of each period} final_market_value_m") 
			@aaa:scpt (value="{final market value at final date of each period} final_market_value_m") 
		
		/* PERIOD_FINAL_MKTVAL_ */ 
		PERIOD_FINAL_MKTVAL_SYS : AAABusinessTypes:Amount 
			@i18n:Label (de="Endbetrag Marktwert", en="Final Market Value", fr="Valeur d\'Inventaire Finale") 
			@sql:SQLName (value=PERIOD_FINAL_MKTVAL_SYS) 
			@aaa:TripleA (FormatEltName=PERIOD_FINAL_MKTVAL_, Rank=420, ScriptDef="@PERIOD_FINAL_MKT_VAL / @SYS_EXCH_RATE") 
			@aaa:scpt (value="@PERIOD_FINAL_MKT_VAL / @SYS_EXCH_RATE") 
		
		/* PERIOD_GAIN_LOSS */ 
		PERIOD_GAIN_LOSS : AAABusinessTypes:Amount 
			@i18n:Label (de="Gewinn & Verlust", en="Profits & Losses", fr="Profits & Pertes") 
			@sql:SQLName (value=PERIOD_GAIN_LOSS) 
			@aaa:TripleA (FormatEltName=PERIOD_GAIN_LOSS, Rank=300, ScriptDef="@PERIOD_CAP_EFFECT_AMOUNT +@PERIOD_CURR_EFFECT_AMOUNT+@PERIOD_INCOME_EFFECT_AMOUNT+@PERIOD_F_T_EFFECT_AMOUNT") 
			@aaa:scpt (value="@PERIOD_CAP_EFFECT_AMOUNT +@PERIOD_CURR_EFFECT_AMOUNT+@PERIOD_INCOME_EFFECT_AMOUNT+@PERIOD_F_T_EFFECT_AMOUNT") 
		
		/* PERIOD_GAIN_LOSS_SYS */ 
		PERIOD_GAIN_LOSS_SYS : AAABusinessTypes:Amount 
			@i18n:Label (de="Gewinn & Verlust", en="Profits & Losses", fr="Gains & Pertes") 
			@sql:SQLName (value=PERIOD_GAIN_LOSS_SYS) 
			@aaa:TripleA (FormatEltName=PERIOD_GAIN_LOSS_SYS, Rank=410, ScriptDef="@PERIOD_GAIN_LOSS * @SYS_EXCH_RATE") 
			@aaa:scpt (value="@PERIOD_GAIN_LOSS * @SYS_EXCH_RATE") 
		
		/* PERIOD_INCOME_EFFECT */ 
		PERIOD_INCOME_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de=Ertragseffekt, en="Income Effect", fr="Effet Revenu") 
			@sql:SQLName (value=PERIOD_INCOME_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_INCOME_EFFECT, Rank=171, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d).income_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d).income_effect") 
		
		/* PERIOD_INCOME_EFFECT */ 
		PERIOD_INCOME_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de=Ertrag, en=Income, fr=Revenu) 
			@sql:SQLName (value=PERIOD_INCOME_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=PERIOD_INCOME_EFFECT, Rank=172, ScriptDef="TOT_SUM(net_rec_income_m + net_paid_income_m + rec_accr_interest_m + paid_accr_interest_m + tax_credit_m + unreal_rec_accr_interest_m + unreal_paid_accr_interest_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_rec_income_m + net_paid_income_m + rec_accr_interest_m + paid_accr_interest_m + tax_credit_m + unreal_rec_accr_interest_m + unreal_paid_accr_interest_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_INITIAL_DATE */ 
		PERIOD_INITIAL_DATE : AAABusinessTypes:Date 
			@i18n:Label (de=Anfangsdatum, en="Initial Date", fr="Date de Début") 
			@sql:SQLName (value=PERIOD_INITIAL_DATE) 
			@aaa:TripleA (FormatEltName=PERIOD_INITIAL_DATE, Rank=20, ScriptDef="{Computed initial date of monthly period} IF(DATEPOSI(initial_d, END_OF, MONTH) = initial_d, initial_d,IF(DATEPOSI(initial_d,BEGIN_OF,MONTH) <= DOMAIN().calc_from_d,DOMAIN().calc_from_d,DATEADD(DATEPOSI(initial_d,BEGIN_OF,MONTH),DAY,-1)))") 
			@aaa:scpt (value="{Computed initial date of monthly period} IF(DATEPOSI(initial_d, END_OF, MONTH) = initial_d, initial_d,IF(DATEPOSI(initial_d,BEGIN_OF,MONTH) <= DOMAIN().calc_from_d,DOMAIN().calc_from_d,DATEADD(DATEPOSI(initial_d,BEGIN_OF,MONTH),DAY,-1)))") 
		
		/* PERIOD_INITIAL_MKT_V */ 
		PERIOD_INITIAL_MKT_VAL : AAABusinessTypes:Amount 
			@i18n:Label (de=Anfangs-Marktwert, en="Initial Market Value", fr="Valeur d\'Inventaire Initiale") 
			@sql:SQLName (value=PERIOD_INITIAL_MKT_VAL) 
			@aaa:TripleA (FormatEltName=PERIOD_INITIAL_MKT_V, Rank=100, ScriptDef="{initial market value at initial date of each period} TOT_FIRST(initial_market_value_m,1,initial_d,@PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="{initial market value at initial date of each period} TOT_FIRST(initial_market_value_m,1,initial_d,@PTF_PERIOD_BREAK)") 
		
		/* PERIOD_INVEST */ 
		PERIOD_INVEST : AAABusinessTypes:Amount 
			@i18n:Label (de="Zuflüsse", en=Investment, fr=Apports) 
			@sql:SQLName (value=PERIOD_INVEST) 
			@aaa:TripleA (FormatEltName=PERIOD_INVEST, Rank=282, ScriptDef="TOT_SUM(net_invest_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_invest_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_INVEST_WITHDR */ 
		PERIOD_INVEST_WITHDRAWAL : AAABusinessTypes:Amount 
			@i18n:Label (de="Zuflüsse/Abflüsse", en=Investment/Withdrawal, fr=Apports/Retraits) 
			@sql:SQLName (value=PERIOD_INVEST_WITHDRAWAL) 
			@aaa:TripleA (FormatEltName=PERIOD_INVEST_WITHDR, Rank=280, ScriptDef="TOT_SUM(net_invest_m + net_withdrawal_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_invest_m + net_withdrawal_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_REAL_CAP_PL */ 
		PERIOD_REAL_CAP_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Realisierter Kapital-G/V", en="Realized Capital P&L", fr="Capital Profits & Pertes Réalisés") 
			@sql:SQLName (value=PERIOD_REAL_CAP_PL) 
			@aaa:TripleA (FormatEltName=PERIOD_REAL_CAP_PL, Rank=250, ScriptDef="TOT_SUM(net_real_cap_profit_m + net_real_cap_loss_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_real_cap_profit_m + net_real_cap_loss_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_REAL_CURR_PL */ 
		PERIOD_REAL_CURR_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Realisierter Währungs-G/V", en="Realized Currency P&L", fr="Devise Gains & Pertes Réalisés") 
			@sql:SQLName (value=PERIOD_REAL_CURR_PL) 
			@aaa:TripleA (FormatEltName=PERIOD_REAL_CURR_PL, Rank=270, ScriptDef="TOT_SUM(net_real_curr_profit_m + net_real_curr_loss_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_real_curr_profit_m + net_real_curr_loss_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_TOT_RET */ 
		PERIOD_TOT_RET : AAABusinessTypes:Number 
			@i18n:Label (de="Portfolio Rendite", en="Portfolio Return", fr="Rendement du Portefeuille") 
			@sql:SQLName (value=PERIOD_TOT_RET) 
			@aaa:TripleA (FormatEltName=PERIOD_TOT_RET, Rank=131, ScriptDef="{Return of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d{@PERIOD_INITIAL_DATE} ).total_return") 
			@aaa:scpt (value="{Return of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d{@PERIOD_INITIAL_DATE} ).total_return") 
		
		/* PERIOD_TOT_RET_BENCH */ 
		PERIOD_TOT_RET_BENCH : AAABusinessTypes:Number 
			@i18n:Label (de="Benchmark Rendite", en="Benchmark Return", fr="Rendement de l\'Indice") 
			@sql:SQLName (value=PERIOD_TOT_RET_BENCH) 
			@aaa:TripleA (FormatEltName=PERIOD_TOT_RET_BENCH, Rank=141, ScriptDef="{Benchmark return per period} IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<>NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,initial_d {@PERIOD_INITIAL_DATE}), NULL)") 
			@aaa:scpt (value="{Benchmark return per period} IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<>NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,initial_d {@PERIOD_INITIAL_DATE}), NULL)") 
		
		/* PERIOD_UNREAL_CAP_PL */ 
		PERIOD_UNREAL_CAP_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Unrealisierter Kapital-G/V", en="Unrealized Capital P&L", fr="Capital Gains & Pertes Non Réalisés") 
			@sql:SQLName (value=PERIOD_UNREAL_CAP_PL) 
			@aaa:TripleA (FormatEltName=PERIOD_UNREAL_CAP_PL, Rank=260, ScriptDef="TOT_SUM(net_unreal_cap_profit_m + net_unreal_cap_loss_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_unreal_cap_profit_m + net_unreal_cap_loss_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_UNREAL_CURR_P */ 
		PERIOD_UNREAL_CURR_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Unrealisierter Währungs-G/V", en="Unrealized Currency P&L", fr="Devise Gains & Pertes Non Réalisés") 
			@sql:SQLName (value=PERIOD_UNREAL_CURR_PL) 
			@aaa:TripleA (FormatEltName=PERIOD_UNREAL_CURR_P, Rank=271, ScriptDef="TOT_SUM(net_unreal_curr_profit_m + net_unreal_curr_loss_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_unreal_curr_profit_m + net_unreal_curr_loss_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PERIOD_WITHDRAWAL */ 
		PERIOD_WITHDRAWAL : AAABusinessTypes:Amount 
			@i18n:Label (de="Abflüsse", en=Withdrawal, fr=Retraits) 
			@sql:SQLName (value=PERIOD_WITHDRAWAL) 
			@aaa:TripleA (FormatEltName=PERIOD_WITHDRAWAL, Rank=283, ScriptDef="TOT_SUM(net_withdrawal_m, 1, @PTF_PERIOD_BREAK)") 
			@aaa:scpt (value="TOT_SUM(net_withdrawal_m, 1, @PTF_PERIOD_BREAK)") 
		
		/* PORTFOLIO_CODE */ 
		PORTFOLIO_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_CODE) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CODE, Rank=23, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.code)", SortingRank=1) 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.code)") 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=1000, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
		
		/* PORTFOLIO_LEVEL_FILT */ 
		PORTFOLIO_LEVEL_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=PORTFOLIO_LEVEL_FILTER) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_LEVEL_FILT, Rank=380, ScriptDef="IF(grid_id=NULL,1,0) {only global lines are flagged}") 
			@aaa:scpt (value="IF(grid_id=NULL,1,0) {only global lines are flagged}") 
		
		/* PORTFOLIO_NAME */ 
		PORTFOLIO_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_NAME, Rank=52, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.name) {portfolio_id.name}", SortingRank=1) 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.name) {portfolio_id.name}") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Portfoliotyp, en="Portfolio Type", fr="Type de Portefeuille") 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PTF_HIER */ 
		PTF_HIER : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en="Hierarchy Structure", fr="Structure de Hiérarchie") 
			@sql:SQLName (value=PTF_HIER) 
			@aaa:TripleA (FormatEltName=PTF_HIER, Rank=49, ScriptDef="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {--------------------------------------------------------------} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
			@aaa:scpt (value="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {--------------------------------------------------------------} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
		
		/* PTF_HIER_STR */ 
		PTF_HIER_STR : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en="Hierarchy Structure", fr="Structure de Hiérarchie") 
			@sql:SQLName (value=PTF_HIER_STR) 
			@aaa:TripleA (FormatEltName=PTF_HIER_STR, Rank=53, ScriptDef="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} IF(DOMAIN().port_cons_rule_e =2,{then detailed=>portfolio} portfolio_id.name, IF(DOMAIN().port_cons_rule_e=5, {then portfolio hierarchy if exist} @PTF_HIER, IF(DOMAIN().port_cons_rule_e IN(1,6), {then => portfolio dimension} @HIERARCHY_HEAD)) {no merge twr}){no detailed}") 
			@aaa:scpt (value="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} IF(DOMAIN().port_cons_rule_e =2,{then detailed=>portfolio} portfolio_id.name, IF(DOMAIN().port_cons_rule_e=5, {then portfolio hierarchy if exist} @PTF_HIER, IF(DOMAIN().port_cons_rule_e IN(1,6), {then => portfolio dimension} @HIERARCHY_HEAD)) {no merge twr}){no detailed}") 
		
		/* PTF_INCEPTION_DATE */ 
		PTF_INCEPTION_DATE : AAABusinessTypes:Date 
			@sql:SQLName (value=PTF_INCEPTION_DATE) 
			@aaa:TripleA (FormatEltName=PTF_INCEPTION_DATE, Rank=39, ScriptDef=portfolio_id.mgt_begin_d) 
			@aaa:scpt (value=portfolio_id.mgt_begin_d) 
		
		/* PTF_PERIOD_BREAK */ 
		PTF_PERIOD_BREAK : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PTF_PERIOD_BREAK) 
			@aaa:TripleA (FormatEltName=PTF_PERIOD_BREAK, Rank=36, ScriptDef="CONCAT(@PORTFOLIO_CODE, DATESTR(@PERIOD_END_OF, \"DDMMYY\"))") 
			@aaa:scpt (value="CONCAT(@PORTFOLIO_CODE, DATESTR(@PERIOD_END_OF, \"DDMMYY\"))") 
		
		/* PTF_STRAT_DATE */ 
		PTF_STRAT_DATE : AAABusinessTypes:Date 
			@i18n:Label (de=Strategiedatum, en="Strategy Date", fr="Stratégie - Date") 
			@sql:SQLName (value=PTF_STRAT_DATE) 
			@aaa:TripleA (FormatEltName=PTF_STRAT_DATE, Rank=38, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REF_CURRENCY */ 
		REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de=Whrg., en=Ccy, fr=Devise) 
			@sql:SQLName (value=REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=REF_CURRENCY, Rank=310, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} currency_id.code )") 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
		
		/* SYS_CURRENCY */ 
		SYS_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de="System Whrg.", en="System Ccy", fr="Devise Système") 
			@sql:SQLName (value=SYS_CURRENCY) 
			@aaa:TripleA (FormatEltName=SYS_CURRENCY, Rank=390, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", SYS_CURRENCY().id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} SYS_CURRENCY().code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", SYS_CURRENCY().id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} SYS_CURRENCY().code )") 
		
		/* SYS_EXCH_RATE */ 
		SYS_EXCH_RATE : AAABusinessTypes:Exchange 
			@i18n:Label (de="Devisenkurs System Whrg.", en="System Fx Rate", fr="Taux de Change Devise Système") 
			@sql:SQLName (value=SYS_EXCH_RATE) 
			@aaa:TripleA (FormatEltName=SYS_EXCH_RATE, Rank=400, ScriptDef="EXCH_RATE(SYS_CURRENCY().code, final_d, currency_id.code, 0, 0, 0).exch_rate") 
			@aaa:scpt (value="EXCH_RATE(SYS_CURRENCY().code, final_d, currency_id.code, 0, 0, 0).exch_rate") 
		
		/* THIRD_PARTY_CODE */ 
		THIRD_PARTY_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Kunde, en="Client Code", fr="Code du Client") 
			@sql:SQLName (value=THIRD_PARTY_CODE) 
			@aaa:TripleA (FormatEltName=THIRD_PARTY_CODE, Rank=56, ScriptDef=portfolio_id.third_id.code) 
			@aaa:scpt (value=portfolio_id.third_id.code) 
		
		/* TILL_DATE_FI_MKT_VAL */ 
		TILL_DATE_FI_MKT_VAL : AAABusinessTypes:Amount 
			@i18n:Label (de="Endbetrag Marktwert", en="Final Market Value", fr="Valeur d\'Inventaire Finale") 
			@sql:SQLName (value=TILL_DATE_FI_MKT_VAL) 
			@aaa:TripleA (FormatEltName=TILL_DATE_FI_MKT_VAL, Rank=103, ScriptDef="{Provide the initial market value at domain calc from date for the last period} IF(@FILTER_2=1,TOT_FIRST(final_market_value_m,final_d=DOMAIN().calc_till_d,DOMAIN().calc_till_d, @PORTFOLIO_CODE),0)") 
			@aaa:scpt (value="{Provide the initial market value at domain calc from date for the last period} IF(@FILTER_2=1,TOT_FIRST(final_market_value_m,final_d=DOMAIN().calc_till_d,DOMAIN().calc_till_d, @PORTFOLIO_CODE),0)") 
		
		/* TILLHIER_FINMKTVAL */ 
		TILLHIER_FINMKTVAL : AAABusinessTypes:Amount 
			@i18n:Label (de="Endbetrag Marktwert", en="Final Market Value", fr="Valeur d\'Inventaire Finale") 
			@sql:SQLName (value=TILLHIER_FINMKTVAL) 
			@aaa:TripleA (FormatEltName=TILLHIER_FINMKTVAL, Rank=104, ScriptDef="IF(DOMAIN().port_cons_rule_e=5, {case detailed children, computation of total final market value per node of hierarchy tree} SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"), &portfolio_id=portfolio_id OR &portfolio_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id=portfolio_id, &final_market_value_m , &final_d=final_d AND &final_d=DOMAIN().calc_till_d,0,1)), @TILL_DATE_FI_MKT_VAL)") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=5, {case detailed children, computation of total final market value per node of hierarchy tree} SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"), &portfolio_id=portfolio_id OR &portfolio_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id=portfolio_id, &final_market_value_m , &final_d=final_d AND &final_d=DOMAIN().calc_till_d,0,1)), @TILL_DATE_FI_MKT_VAL)") 
		
		/* TILLHIER_FINPL */ 
		TILLHIER_FINPL : AAABusinessTypes:Amount 
			@i18n:Label (de="Gewinn & Verlust", en="Profits & Losses", fr="Gains & Pertes") 
			@sql:SQLName (value=TILLHIER_FINPL) 
			@aaa:TripleA (FormatEltName=TILLHIER_FINPL, Rank=302, ScriptDef="IF(DOMAIN().port_cons_rule_e=5, {case detailed children, computation of total final market value per node of hierarchy tree} SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"), &portfolio_id=portfolio_id OR &portfolio_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m+&net_real_curr_profit_m + &net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m+net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m +& unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m+&portf_fees_m + &portf_tax_m, &final_d=final_d AND &final_d=DOMAIN().calc_till_d,0,1)), @TILL_DATE_FI_MKT_VAL)") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=5, {case detailed children, computation of total final market value per node of hierarchy tree} SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"), &portfolio_id=portfolio_id OR &portfolio_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id.parent_port_id=portfolio_id OR &portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m+&net_real_curr_profit_m + &net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m+net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m +& unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m+&portf_fees_m + &portf_tax_m, &final_d=final_d AND &final_d=DOMAIN().calc_till_d,0,1)), @TILL_DATE_FI_MKT_VAL)") 
		
		/* TOT_INC_EFFECT_AMNT */ 
		TOT_INC_EFFECT_AMNT : AAABusinessTypes:Amount 
			@i18n:Label (de="Ges. Ertrag", en="Total Income", fr="Total Revenu") 
			@sql:SQLName (value=TOT_INC_EFFECT_AMNT) 
			@aaa:TripleA (FormatEltName=TOT_INC_EFFECT_AMNT, Rank=174, ScriptDef="{Total effect amount for the full period} IF(@FILTER_2=1,TOT_SUM(net_rec_income_m + net_paid_income_m + rec_accr_interest_m + paid_accr_interest_m + tax_credit_m + unreal_rec_accr_interest_m + unreal_paid_accr_interest_m, 1, @PORTFOLIO_CODE),0)") 
			@aaa:scpt (value="{Total effect amount for the full period} IF(@FILTER_2=1,TOT_SUM(net_rec_income_m + net_paid_income_m + rec_accr_interest_m + paid_accr_interest_m + tax_credit_m + unreal_rec_accr_interest_m + unreal_paid_accr_interest_m, 1, @PORTFOLIO_CODE),0)") 
		
		/* TOT_INVEST_WITHDRAW */ 
		TOT_INVEST_WITHDRAW : AAABusinessTypes:Amount 
			@i18n:Label (de="Zuflüsse/Abflüsse", en=Investment/Withdrawal, fr=Apports/Retraits) 
			@sql:SQLName (value=TOT_INVEST_WITHDRAW) 
			@aaa:TripleA (FormatEltName=TOT_INVEST_WITHDRAW, Rank=281, ScriptDef="{IF(@FILTER_2=1,TOT_SUM(net_invest_m + net_withdrawal_m, 1, @PORTFOLIO_CODE),0)} {OCS-40624} IF ( @FILTER_2=1, TOT_SUM( IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL AND portfolio_id.ret_freq_unit_e IN (8, 9), 0, net_invest_m + net_withdrawal_m ) , 1, @PORTFOLIO_CODE),0 )") 
			@aaa:scpt (value="{IF(@FILTER_2=1,TOT_SUM(net_invest_m + net_withdrawal_m, 1, @PORTFOLIO_CODE),0)} {OCS-40624} IF ( @FILTER_2=1, TOT_SUM( IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL AND portfolio_id.ret_freq_unit_e IN (8, 9), 0, net_invest_m + net_withdrawal_m ) , 1, @PORTFOLIO_CODE),0 )") 
		
		/* TOT_REAL_CAP_PL */ 
		TOT_REAL_CAP_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Realisierter Kapital-G/V", en="Realized Capital P&L", fr="Capital Gains & Pertes Réalisés") 
			@sql:SQLName (value=TOT_REAL_CAP_PL) 
			@aaa:TripleA (FormatEltName=TOT_REAL_CAP_PL, Rank=251, ScriptDef="IF(@FILTER_2=1,TOT_SUM(net_real_cap_profit_m + net_real_cap_loss_m, 1, @PORTFOLIO_CODE),0)") 
			@aaa:scpt (value="IF(@FILTER_2=1,TOT_SUM(net_real_cap_profit_m + net_real_cap_loss_m, 1, @PORTFOLIO_CODE),0)") 
		
		/* TOT_REAL_CURR_PL */ 
		TOT_REAL_CURR_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Realisierter Währungs-G/V", en="Realized Currency P&L", fr="Devise Gains & Pertes Réalisés") 
			@sql:SQLName (value=TOT_REAL_CURR_PL) 
			@aaa:TripleA (FormatEltName=TOT_REAL_CURR_PL, Rank=272, ScriptDef="IF(@FILTER_2=1,TOT_SUM(net_real_curr_profit_m + net_real_curr_loss_m,1, @PORTFOLIO_CODE),0)") 
			@aaa:scpt (value="IF(@FILTER_2=1,TOT_SUM(net_real_curr_profit_m + net_real_curr_loss_m,1, @PORTFOLIO_CODE),0)") 
		
		/* TOT_UNREAL_CAP_PL */ 
		TOT_UNREAL_CAP_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Unrealisierter Kapital-G/V", en="Unrealized Capital P&L", fr="Capital Gains & Pertes Non Réalisés") 
			@sql:SQLName (value=TOT_UNREAL_CAP_PL) 
			@aaa:TripleA (FormatEltName=TOT_UNREAL_CAP_PL, Rank=261, ScriptDef="IF(@FILTER_2=1,TOT_SUM(net_unreal_cap_profit_m + net_unreal_cap_loss_m, 1, @PORTFOLIO_CODE),0)") 
			@aaa:scpt (value="IF(@FILTER_2=1,TOT_SUM(net_unreal_cap_profit_m + net_unreal_cap_loss_m, 1, @PORTFOLIO_CODE),0)") 
		
		/* TOT_UNREAL_CURR_PL */ 
		TOT_UNREAL_CURR_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Unealisierter Währungs-G/V", en="Unrealized Currency P&L", fr="Devise Gains & Pertes Non Réalisés") 
			@sql:SQLName (value=TOT_UNREAL_CURR_PL) 
			@aaa:TripleA (FormatEltName=TOT_UNREAL_CURR_PL, Rank=273, ScriptDef="IF(@FILTER_2=1,TOT_SUM(net_unreal_curr_profit_m + net_unreal_curr_loss_m, 1, @PORTFOLIO_CODE),0)") 
			@aaa:scpt (value="IF(@FILTER_2=1,TOT_SUM(net_unreal_curr_profit_m + net_unreal_curr_loss_m, 1, @PORTFOLIO_CODE),0)") 
	} 
	/* PCK_DS_RET_SUM */ 
	PCK_DS_RET_SUM 
		@aaa:FormatColumnFilter (value=FILTER_2) 
		@aaa:FormatFunction (value="Return Analysis") 
		@sql:SQLName (value=PCK_DS_RET_SUM) 
		@aaa:TripleA (ColumnFilter=FILTER_2, EntitySQLName=port_synthetic, FinFuncName="Return Analysis", FinFuncProcName=return, FormatName=PCK_DS_RET_SUM) 
	{ 
		/* abscissa_market_seg */ 
		abscissa_market_seg : AAABusinessTypes:Id 
			@sql:SQLName (value=abscissa_market_seg) 
			@aaa:TripleA (FormatEltName=abscissa_market_seg, Rank=1011, ScriptDef=abscissa_market_seg_id) 
			@aaa:scpt (value=abscissa_market_seg_id) 
		
		/* ADMIN_MGR_NAME */ 
		ADMIN_MGR_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Vermögensverwalter", en=Manager, fr=Gestionnaire) 
			@sql:SQLName (value=ADMIN_MGR_NAME) 
			@aaa:TripleA (FormatEltName=ADMIN_MGR_NAME, Rank=810, ScriptDef=portfolio_id.admin_mgr_id.name) 
			@aaa:scpt (value=portfolio_id.admin_mgr_id.name) 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=BENCH_DENOM_de) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=BENCH_DENOM_en) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=BENCH_DENOM_fr) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef) 
			@aaa:scpt (value) 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=998, ScriptDef=portfolio_id.third_id) 
			@aaa:scpt (value=portfolio_id.third_id) 
		
		/* CLIENT_NAME */ 
		CLIENT_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Name des Kunden", en="Client Name", fr="Nom du client") 
			@sql:SQLName (value=CLIENT_NAME) 
			@aaa:TripleA (FormatEltName=CLIENT_NAME, Rank=55, ScriptDef="IF( DOMAIN().port_cons_rule_e IN (1, 6) AND DOMAIN().portfolio_dimension_e = 6 {client}, {In case of Merged or Merged TWR on a client, client name of Domain is retrieved} GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF ( DOMAIN().port_cons_rule_e IN (1, 6), IF (DOMAIN().portfolio_dimension_e = 1 {portfolio}, {In case of Merged or Merged TWR on a portfolio, portfolio client name of Domain is retrieved} GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).third_id.name, NULL ), {In other cases, the portfolio client is retrieved} portfolio_id.third_id.name ) )") 
			@aaa:scpt (value="IF( DOMAIN().port_cons_rule_e IN (1, 6) AND DOMAIN().portfolio_dimension_e = 6 {client}, {In case of Merged or Merged TWR on a client, client name of Domain is retrieved} GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF ( DOMAIN().port_cons_rule_e IN (1, 6), IF (DOMAIN().portfolio_dimension_e = 1 {portfolio}, {In case of Merged or Merged TWR on a portfolio, portfolio client name of Domain is retrieved} GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).third_id.name, NULL ), {In other cases, the portfolio client is retrieved} portfolio_id.third_id.name ) )") 
		
		/* COM_MGR_NAME */ 
		COM_MGR_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Kundenberater, en=Advisor, fr=Conseiller) 
			@sql:SQLName (value=COM_MGR_NAME) 
			@aaa:TripleA (FormatEltName=COM_MGR_NAME, Rank=800, ScriptDef="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).comm_mgr_id.name, {else} portfolio_id.comm_mgr_id.name)") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).comm_mgr_id.name, {else} portfolio_id.comm_mgr_id.name)") 
		
		/* CUMUL_GAIN_LOSS */ 
		CUMUL_GAIN_LOSS : AAABusinessTypes:Amount 
			@i18n:Label (de="Gewinn & Verlust", en="Profits & Losses", fr="Profits & Pertes") 
			@sql:SQLName (value=CUMUL_GAIN_LOSS) 
			@aaa:TripleA (FormatEltName=CUMUL_GAIN_LOSS, Rank=301, ScriptDef="IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m +&net_real_curr_profit_m +&net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m +&portf_fees_m + &portf_tax_m +&net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m + &unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m ,&final_d<=final_d,1,1)))") 
			@aaa:scpt (value="IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m +&net_real_curr_profit_m +&net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m +&portf_fees_m + &portf_tax_m +&net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m + &unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m ,&final_d<=final_d,1,1)))") 
		
		/* CUMUL_TOT_RET */ 
		CUMUL_TOT_RET : AAABusinessTypes:Number 
			@i18n:Label (de=Portfolio-Rendite, en="Portfolio Return", fr="Rendement du Portefeuille") 
			@sql:SQLName (value=CUMUL_TOT_RET) 
			@aaa:TripleA (FormatEltName=CUMUL_TOT_RET, Rank=130, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).total_return") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).total_return") 
		
		/* CUMUL_TOT_RET_BENCH */ 
		CUMUL_TOT_RET_BENCH : AAABusinessTypes:Number 
			@i18n:Label (de=Benchmark-Rendite, en="Benchmark Return", fr="Rendement de l\'Indice") 
			@sql:SQLName (value=CUMUL_TOT_RET_BENCH) 
			@aaa:TripleA (FormatEltName=CUMUL_TOT_RET_BENCH, Rank=140, ScriptDef="IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<>NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,DOMAIN().calc_from_d), NULL)") 
			@aaa:scpt (value="IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<>NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,DOMAIN().calc_from_d), NULL)") 
		
		/* data_secu_prof_id */ 
		data_secu_prof_id : AAABusinessTypes:Id 
			@sql:SQLName (value=data_secu_prof_id) 
			@aaa:TripleA (FormatEltName=data_secu_prof_id, Rank=1300, ScriptDef="{ortfolio_id.data_secu_prof_id} IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} portfolio_id.data_secu_prof_id)") 
			@aaa:scpt (value="{ortfolio_id.data_secu_prof_id} IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} portfolio_id.data_secu_prof_id)") 
		
		/* domain_client_id */ 
		domain_client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=domain_client_id) 
			@aaa:TripleA (FormatEltName=domain_client_id, Rank=3000, ScriptDef="IF(DOMAIN().dim_port_dict_id=600 AND DOMAIN().third_compo_e<>1 ,DOMAIN().port_object_id,NULL)") 
			@aaa:scpt (value="IF(DOMAIN().dim_port_dict_id=600 AND DOMAIN().third_compo_e<>1 ,DOMAIN().port_object_id,NULL)") 
		
		/* FILTER_1 Filtering:This filter allows selecting the rows to be displayed into an analysis by sub-periods between from and till date. */ 
		FILTER_1 : AAABusinessTypes:Flag 
			@sql:SQLName (value=FILTER_1) 
			@aaa:TripleA (FormatEltName=FILTER_1, Rank=1, ScriptDef="{Filter used to have WUI display correct information when Synthetic Data is used: it filter the data to show result global in a monthly basis views} IF(final_d = DOMAIN().calc_till_d AND grid_id=NULL AND ((initial_d=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH) OR initial_d=DOMAIN().calc_from_d) AND (final_d=DATEPOSI(final_d,END_OF,MONTH) OR final_d=DOMAIN().calc_till_d)), 1, IF(final_d = DATEPOSI(final_d,END_OF,MONTH) AND grid_id=NULL AND ((initial_d=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH) OR initial_d=DOMAIN().calc_from_d)), 1, 0))") 
			@aaa:scpt (value="{Filter used to have WUI display correct information when Synthetic Data is used: it filter the data to show result global in a monthly basis views} IF(final_d = DOMAIN().calc_till_d AND grid_id=NULL AND ((initial_d=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH) OR initial_d=DOMAIN().calc_from_d) AND (final_d=DATEPOSI(final_d,END_OF,MONTH) OR final_d=DOMAIN().calc_till_d)), 1, IF(final_d = DATEPOSI(final_d,END_OF,MONTH) AND grid_id=NULL AND ((initial_d=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH) OR initial_d=DOMAIN().calc_from_d)), 1, 0))") 
		
		/* FILTER_2 */ 
		FILTER_2 : AAABusinessTypes:Flag 
			@sql:SQLName (value=FILTER_2) 
			@aaa:TripleA (FormatEltName=FILTER_2, Rank=2, ScriptDef="{Filter that flag the last monthly sub-period of the return analysis: it is used to filter the global rows for the last period that contains columns with return value for the full period} {IF(final_d>=DOMAIN().calc_till_d AND grid_id=NULL {OCS-35697 AND initial_d>=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH)},1,0)} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
			@aaa:scpt (value="{Filter that flag the last monthly sub-period of the return analysis: it is used to filter the global rows for the last period that contains columns with return value for the full period} {IF(final_d>=DOMAIN().calc_till_d AND grid_id=NULL {OCS-35697 AND initial_d>=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH)},1,0)} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
		
		/* grid_id */ 
		grid_id : AAABusinessTypes:Id 
			@sql:SQLName (value=grid_id) 
			@aaa:TripleA (FormatEltName=grid_id, Rank=1010, ScriptDef=grid_id) 
			@aaa:scpt (value=grid_id) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_de : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_de) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef) 
			@aaa:scpt (value) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_en : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_en) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef) 
			@aaa:scpt (value) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_fr : AAABusinessTypes:UniCode 
			@sql:SQLName (value=HIERARCHY_HEAD_fr) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef) 
			@aaa:scpt (value) 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=999, ScriptDef=portfolio_id.comm_mgr_id) 
			@aaa:scpt (value=portfolio_id.comm_mgr_id) 
		
		/* nature_e */ 
		nature_e : AAABusinessTypes:Enum 
			@sql:SQLName (value=nature_e) 
			@aaa:TripleA (FormatEltName=nature_e, Rank=1001, ScriptDef=nature_e) 
			@aaa:scpt (value=nature_e) 
		
		/* ordinate_market_seg */ 
		ordinate_market_seg : AAABusinessTypes:Id 
			@sql:SQLName (value=ordinate_market_seg) 
			@aaa:TripleA (FormatEltName=ordinate_market_seg, Rank=1012, ScriptDef=ordinate_market_seg_id) 
			@aaa:scpt (value=ordinate_market_seg_id) 
		
		/* PERIOD_FINAL_MKT_VAL */ 
		PERIOD_FINAL_MKT_VAL : AAABusinessTypes:Amount 
			@i18n:Label (de=End-Marktwert, en="Final Market Value", fr="Valeur d\'Inventaire Finale") 
			@sql:SQLName (value=PERIOD_FINAL_MKT_VAL) 
			@aaa:TripleA (FormatEltName=PERIOD_FINAL_MKT_VAL, Rank=101, ScriptDef=final_market_value_m) 
			@aaa:scpt (value=final_market_value_m) 
		
		/* PORTFOLIO_CODE */ 
		PORTFOLIO_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_CODE) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CODE, Rank=23, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.code) {portfolio_id.code}", SortingRank=1) 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.code) {portfolio_id.code}") 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=1000, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=PORTFOLIO_INVEST_SER, Rank=57, ScriptDef="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_de) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=57, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_en) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=57, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_fr) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=57, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_NAME */ 
		PORTFOLIO_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_NAME, Rank=52, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.name)", SortingRank=1) 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.name)") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Portfoliotyp, en="Portfolio Type", fr="Type de Portefeuille") 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef) 
			@aaa:scpt (value) 
		
		/* PTF_HIER */ 
		PTF_HIER : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en="Hierarchy Structure", fr="Structure de Hiérarchie") 
			@sql:SQLName (value=PTF_HIER) 
			@aaa:TripleA (FormatEltName=PTF_HIER, Rank=49, ScriptDef="{This script generates the portfolio hierarchy structure in case of portfolio hierarchy} {ocs-39055} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
			@aaa:scpt (value="{This script generates the portfolio hierarchy structure in case of portfolio hierarchy} {ocs-39055} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
		
		/* PTF_HIER_STR */ 
		PTF_HIER_STR : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en=Hierarchy, fr="Hiérarchie") 
			@sql:SQLName (value=PTF_HIER_STR) 
			@aaa:TripleA (FormatEltName=PTF_HIER_STR, Rank=50, ScriptDef="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {OCS-39566} IF( DOMAIN().dim_port_dict_id IN (600,800), IF(DOMAIN().port_cons_rule_e =2,{then detailed=>portfolio} portfolio_id.name, IF(DOMAIN().port_cons_rule_e=5, {then portfolio hierarchy if exist} @PTF_HIER, IF(DOMAIN().port_cons_rule_e IN(1,6), {then => portfolio dimension} @HIERARCHY_HEAD)) {no merge twr}){no detailed}, @PTF_HIER )") 
			@aaa:scpt (value="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {OCS-39566} IF( DOMAIN().dim_port_dict_id IN (600,800), IF(DOMAIN().port_cons_rule_e =2,{then detailed=>portfolio} portfolio_id.name, IF(DOMAIN().port_cons_rule_e=5, {then portfolio hierarchy if exist} @PTF_HIER, IF(DOMAIN().port_cons_rule_e IN(1,6), {then => portfolio dimension} @HIERARCHY_HEAD)) {no merge twr}){no detailed}, @PTF_HIER )") 
		
		/* PTF_STRAT_DATE */ 
		PTF_STRAT_DATE : AAABusinessTypes:Date 
			@i18n:Label (de=Strategiedatum, en="Strategy Date", fr="Stratégie - Date") 
			@sql:SQLName (value=PTF_STRAT_DATE) 
			@aaa:TripleA (FormatEltName=PTF_STRAT_DATE, Rank=38, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REF_CURRENCY */ 
		REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de=Whrg., en=Ccy, fr=Devise) 
			@sql:SQLName (value=REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=REF_CURRENCY, Rank=310, ScriptDef="SYNONYM(\"currency\", currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code") 
			@aaa:scpt (value="SYNONYM(\"currency\", currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code") 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
		
		/* THIRD_COMP_RULE */ 
		THIRD_COMP_RULE : AAAEnumerations:DomainAAAThirdCompoE 
			@i18n:Label (de=Portfolio-Kunden-Zuordnung, en="Portfolio Link Nature", fr="Nature du lien avec le portefeuille") 
			@sql:SQLName (value=THIRD_COMP_RULE) 
			@aaa:TripleA (AttrSQLName=third_compo_e, FormatEltName=THIRD_COMP_RULE, Rank=3050, ScriptDef="{ --SQLFORMAT case when domain_client_id = NULL then NULL when client_id = domain_client_id then 1 when THIRD_PARTY_OWNERSHIP_RULE != NULL then 2 end }") 
			@aaa:scpt (value="{ --SQLFORMAT case when domain_client_id = NULL then NULL when client_id = domain_client_id then 1 when THIRD_PARTY_OWNERSHIP_RULE != NULL then 2 end }") 
		
		/* THIRD_PARTY_CODE */ 
		THIRD_PARTY_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Kunde, en="Client Code", fr="Code du Client") 
			@sql:SQLName (value=THIRD_PARTY_CODE) 
			@aaa:TripleA (FormatEltName=THIRD_PARTY_CODE, Rank=56, ScriptDef=portfolio_id.third_id.code) 
			@aaa:scpt (value=portfolio_id.third_id.code) 
		
		/* THIRD_PARTY_OWNERSHI */ 
		THIRD_PARTY_OWNERSHIP_RULE : AAAEnumerations:PortfolioThirdCompoOwnershipRuleE 
			@i18n:Label (de="Verfügungsberechtigung", en="Ownership Rule", fr="Règle de propriété") 
			@sql:SQLName (value=THIRD_PARTY_OWNERSHIP_RULE) 
			@aaa:TripleA (AttrSQLName=ownership_rule_e, FormatEltName=THIRD_PARTY_OWNERSHI, Rank=3030, ScriptDef="{ --SQLFORMAT select max(ownership_rule_e) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
			@aaa:scpt (value="{ --SQLFORMAT select max(ownership_rule_e) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
		
		/* THIRD_PARTY_PERCT_OW */ 
		THIRD_PARTY_PERCT_OWNERSHIP : AAABusinessTypes:Number 
			@i18n:Label (de="Prozentsatz des Eigentums", en="Percentage of Ownership", fr="Pourcentage de la propriété") 
			@sql:SQLName (value=THIRD_PARTY_PERCT_OWNERSHIP) 
			@aaa:TripleA (FormatEltName=THIRD_PARTY_PERCT_OW, Rank=3040, ScriptDef="{ --SQLFORMAT select max(weight_n) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
			@aaa:scpt (value="{ --SQLFORMAT select max(weight_n) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
		
		/* third_party_portfoli */ 
		third_party_portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=third_party_portfolio_id) 
			@aaa:TripleA (FormatEltName=third_party_portfoli, Rank=3010, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
	} 
	/* PCK_PREC_RETURN */ 
	PCK_PREC_RETURN 
		@aaa:FormatColumnFilter (value=server_filter) 
		@aaa:FormatFunction (value="Return Analysis") 
		@sql:SQLName (value=PCK_PREC_RETURN) 
		@aaa:TripleA (ColumnFilter=server_filter, EntitySQLName=port_synthetic, FinFuncName="Return Analysis", FinFuncProcName=return, FormatName=PCK_PREC_RETURN) 
	{ 
		/* ext_bench_denom */ 
		ext_bench_denom : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=ext_bench_denom) 
			@aaa:TripleA (FormatEltName=ext_bench_denom, Rank=14, ScriptDef="DENOMINATION( \"strategy\", GET_STRATEGY( \"portfolio\", portfolio_id, 2 {Link nature is \"Benchmark\"}, DOMAIN().calc_till_d, {No arguments on Priority}, {No arguments on Grid}, {No arguments on Grid List}, 1 {Components of investment profile are taking into account} {No arguments on Rank} ).id, DOMAIN().language_dict_id ).denom") 
			@aaa:scpt (value="DENOMINATION( \"strategy\", GET_STRATEGY( \"portfolio\", portfolio_id, 2 {Link nature is \"Benchmark\"}, DOMAIN().calc_till_d, {No arguments on Priority}, {No arguments on Grid}, {No arguments on Grid List}, 1 {Components of investment profile are taking into account} {No arguments on Rank} ).id, DOMAIN().language_dict_id ).denom") 
		
		/* ext_bi_return */ 
		ext_bi_return : AAABusinessTypes:Int 
			@sql:SQLName (value=ext_bi_return) 
			@aaa:TripleA (FormatEltName=ext_bi_return, Rank=20, ScriptDef="{This format element indicates whether the Portfolios return is below a given threshold. } {------------------------------------------} IF(@ext_diff_threshold = 1, 1, 0)") 
			@aaa:scpt (value="{This format element indicates whether the Portfolios return is below a given threshold. } {------------------------------------------} IF(@ext_diff_threshold = 1, 1, 0)") 
		
		/* ext_diff_threshold */ 
		ext_diff_threshold : AAABusinessTypes:Flag 
			@sql:SQLName (value=ext_diff_threshold) 
			@aaa:TripleA (FormatEltName=ext_diff_threshold, Rank=12, ScriptDef="{This format element indicates whether the Portfolios return is below a given threshold. The thresolds are defined in system parameters DS_QUERY_RETURN_1 and DS_QUERY_RETURN_2 and depends of the Portfolios service type.} {------------------------------------------} IF( (portfolio_id.service_type_e = 1 {Discretionary} AND @ext_ytd_ptf_return < STRNUM(GET_APPL_PARAM(\"DS_QUERY_RETURN_1\"))) OR (portfolio_id.service_type_e = 2 {Advisory} AND @ext_ytd_ptf_return < STRNUM(GET_APPL_PARAM(\"DS_QUERY_RETURN_2\"))), 1, {ELSE} 0 )") 
			@aaa:scpt (value="{This format element indicates whether the Portfolios return is below a given threshold. The thresolds are defined in system parameters DS_QUERY_RETURN_1 and DS_QUERY_RETURN_2 and depends of the Portfolios service type.} {------------------------------------------} IF( (portfolio_id.service_type_e = 1 {Discretionary} AND @ext_ytd_ptf_return < STRNUM(GET_APPL_PARAM(\"DS_QUERY_RETURN_1\"))) OR (portfolio_id.service_type_e = 2 {Advisory} AND @ext_ytd_ptf_return < STRNUM(GET_APPL_PARAM(\"DS_QUERY_RETURN_2\"))), 1, {ELSE} 0 )") 
		
		/* ext_over_under_perf */ 
		ext_over_under_perf : AAABusinessTypes:Number 
			@sql:SQLName (value=ext_over_under_perf) 
			@aaa:TripleA (FormatEltName=ext_over_under_perf, Rank=8, ScriptDef="IF(@ext_ytd_bench_ret, @ext_ytd_ptf_return-@ext_ytd_bench_ret)") 
			@aaa:scpt (value="IF(@ext_ytd_bench_ret, @ext_ytd_ptf_return-@ext_ytd_bench_ret)") 
		
		/* ext_ptf_threshold */ 
		ext_ptf_threshold : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=ext_ptf_threshold) 
			@aaa:TripleA (FormatEltName=ext_ptf_threshold, Rank=13, ScriptDef="IF( portfolio_id.service_type_e = 1 {Discretionary}, GET_APPL_PARAM(\"DS_QUERY_RETURN_1\"), {ELSE} IF( portfolio_id.service_type_e = 2 {Advisory}, GET_APPL_PARAM(\"DS_QUERY_RETURN_2\") ) )") 
			@aaa:scpt (value="IF( portfolio_id.service_type_e = 1 {Discretionary}, GET_APPL_PARAM(\"DS_QUERY_RETURN_1\"), {ELSE} IF( portfolio_id.service_type_e = 2 {Advisory}, GET_APPL_PARAM(\"DS_QUERY_RETURN_2\") ) )") 
		
		/* ext_return_calc_d */ 
		ext_return_calc_d : AAABusinessTypes:Datetime 
			@sql:SQLName (value=ext_return_calc_d) 
			@aaa:TripleA (FormatEltName=ext_return_calc_d, Rank=11, ScriptDef="SYSDATE()") 
			@aaa:scpt (value="SYSDATE()") 
		
		/* ext_return_from_d */ 
		ext_return_from_d : AAABusinessTypes:Date 
			@sql:SQLName (value=ext_return_from_d) 
			@aaa:TripleA (FormatEltName=ext_return_from_d, Rank=9, ScriptDef="DOMAIN().calc_from_d") 
			@aaa:scpt (value="DOMAIN().calc_from_d") 
		
		/* ext_return_till_d */ 
		ext_return_till_d : AAABusinessTypes:Date 
			@sql:SQLName (value=ext_return_till_d) 
			@aaa:TripleA (FormatEltName=ext_return_till_d, Rank=10, ScriptDef="DOMAIN().calc_till_d") 
			@aaa:scpt (value="DOMAIN().calc_till_d") 
		
		/* ext_ytd_bench_ret */ 
		ext_ytd_bench_ret : AAABusinessTypes:Number 
			@sql:SQLName (value=ext_ytd_bench_ret) 
			@aaa:TripleA (FormatEltName=ext_ytd_bench_ret, Rank=6, ScriptDef="{This format element calculates the return of a benchmark linked to the portfolio. A benchmark is in that case a strategy linked to the portfolio with the nature \"Benchmark\", valid at the From Date and which can be part of an investment profile composition.} {-----------------------------------------------------------} BENCH_RETURN( \"strategy\", GET_STRATEGY( \"portfolio\", portfolio_id, 2 {Link nature is \"Benchmark\"}, DOMAIN().calc_till_d, {No arguments on Priority}, {No arguments on Grid}, {No arguments on Grid List}, 1 {Components of investment profile are taking into account} {No arguments on Rank} ).id, final_d, DOMAIN().calc_from_d )") 
			@aaa:scpt (value="{This format element calculates the return of a benchmark linked to the portfolio. A benchmark is in that case a strategy linked to the portfolio with the nature \"Benchmark\", valid at the From Date and which can be part of an investment profile composition.} {-----------------------------------------------------------} BENCH_RETURN( \"strategy\", GET_STRATEGY( \"portfolio\", portfolio_id, 2 {Link nature is \"Benchmark\"}, DOMAIN().calc_till_d, {No arguments on Priority}, {No arguments on Grid}, {No arguments on Grid List}, 1 {Components of investment profile are taking into account} {No arguments on Rank} ).id, final_d, DOMAIN().calc_from_d )") 
		
		/* ext_ytd_ptf_return */ 
		ext_ytd_ptf_return : AAABusinessTypes:Number 
			@sql:SQLName (value=ext_ytd_ptf_return) 
			@aaa:TripleA (FormatEltName=ext_ytd_ptf_return, Rank=4, ScriptDef="{This format element calculates the return of the portfolio} {--------------------------} 100 * RETURN( final_d, RET_TWR {Time weighted rate}, 0 {Net computation}, 0 {Tax credit counter are not considered}, 0 {No needs to activate the risk view for computation}, 0 {Not annual}, DOMAIN().calc_from_d ).total_return") 
			@aaa:scpt (value="{This format element calculates the return of the portfolio} {--------------------------} 100 * RETURN( final_d, RET_TWR {Time weighted rate}, 0 {Net computation}, 0 {Tax credit counter are not considered}, 0 {No needs to activate the risk view for computation}, 0 {Not annual}, DOMAIN().calc_from_d ).total_return") 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=1, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
		
		/* server_filter Filtering:This filter allows selecting the rows to be displayed into an analysis by sub-periods between from and till date. */ 
		server_filter : AAABusinessTypes:Flag 
			@sql:SQLName (value=server_filter) 
			@aaa:TripleA (FormatEltName=server_filter, Rank=2, ScriptDef="{This format element is used to retrieve only 1 row per portfolio} {----------------------} {IF( final_d = DOMAIN().calc_till_d AND grid_id = NULL, 1, {ELSE} 0 )} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
			@aaa:scpt (value="{This format element is used to retrieve only 1 row per portfolio} {----------------------} {IF( final_d = DOMAIN().calc_till_d AND grid_id = NULL, 1, {ELSE} 0 )} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
	} 
	/* PCK_RMT_RETURN */ 
	PCK_RMT_RETURN 
		@aaa:FormatColumnFilter (value=PORTFOLIO_LEVEL_FILTER) 
		@aaa:FormatFunction (value="Return Analysis") 
		@sql:SQLName (value=PCK_RMT_RETURN) 
		@aaa:TripleA (ColumnFilter=PORTFOLIO_LEVEL_FILTER, EntitySQLName=port_synthetic, FinFuncName="Return Analysis", FinFuncProcName=return, FormatName=PCK_RMT_RETURN) 
	{ 
		/* BENCH_DENOM */ 
		BENCH_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_de : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM_de) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_en : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM_en) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_fr : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM_fr) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=998, ScriptDef=portfolio_id.third_id) 
			@aaa:scpt (value=portfolio_id.third_id) 
		
		/* CUMUL_CAP_EFFECT */ 
		CUMUL_CAP_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Kapitaleffekt", en="Capital Effect Cumul", fr="Effet Capital Cumulé") 
			@sql:SQLName (value=CUMUL_CAP_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_CAP_EFFECT, Rank=150, ScriptDef="{Return Capiatl Effect cumulated since cacl from date until end date of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).capital_effect") 
			@aaa:scpt (value="{Return Capiatl Effect cumulated since cacl from date until end date of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).capital_effect") 
		
		/* CUMUL_CAP_EFFECT_AMO */ 
		CUMUL_CAP_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de="kum. Kapital-G/V", en="Capital P&L Cumul", fr="P&P Capital Cumulé") 
			@sql:SQLName (value=CUMUL_CAP_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=CUMUL_CAP_EFFECT_AMO, Rank=154, ScriptDef="{Capital effect in amount cumulated} IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&net_unreal_cap_loss_m+&net_real_cap_loss_m+&net_unreal_cap_profit_m+&net_real_cap_profit_m,&final_d<=final_d,1,1)))") 
			@aaa:scpt (value="{Capital effect in amount cumulated} IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&net_unreal_cap_loss_m+&net_real_cap_loss_m+&net_unreal_cap_profit_m+&net_real_cap_profit_m,&final_d<=final_d,1,1)))") 
		
		/* CUMUL_CROSS_EFFECT */ 
		CUMUL_CROSS_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Wechselwirkungs-Effekt", en="Cross Effect Cumul", fr="Effet Croisé Cumulé") 
			@sql:SQLName (value=CUMUL_CROSS_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_CROSS_EFFECT, Rank=190, ScriptDef="@CUMUL_TOT_RET - @CUMUL_CAP_EFFECT - @CUMUL_CURR_EFFECT - @CUMUL_INCOME_EFFECT - @CUMUL_F_T_EFFECT") 
			@aaa:scpt (value="@CUMUL_TOT_RET - @CUMUL_CAP_EFFECT - @CUMUL_CURR_EFFECT - @CUMUL_INCOME_EFFECT - @CUMUL_F_T_EFFECT") 
		
		/* CUMUL_CURR_EFFECT */ 
		CUMUL_CURR_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Währungseffekt", en="Currency Effect Cumul", fr="Effet Devise Cumulé") 
			@sql:SQLName (value=CUMUL_CURR_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_CURR_EFFECT, Rank=160, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).current_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).current_effect") 
		
		/* CUMUL_CURR_EFFECT_AM */ 
		CUMUL_CURR_EFFECT_AMOUNT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Währungs-G/V", en="Currency P&L Cumul", fr="P&P Devise Cumulé") 
			@sql:SQLName (value=CUMUL_CURR_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=CUMUL_CURR_EFFECT_AM, Rank=163, ScriptDef="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_real_curr_profit_m + &net_real_curr_loss_m + &net_unreal_curr_profit_m + &net_unreal_curr_loss_m ,&final_d<=final_d,1,1))") 
			@aaa:scpt (value="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_real_curr_profit_m + &net_real_curr_loss_m + &net_unreal_curr_profit_m + &net_unreal_curr_loss_m ,&final_d<=final_d,1,1))") 
		
		/* CUMUL_F_T_EFFECT */ 
		CUMUL_F_T_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Gebühren/Steuern-Effekt", en="Fees & Taxes Effect Cumul", fr="Effet Frais & Taxes Cumulé") 
			@sql:SQLName (value=CUMUL_F_T_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_F_T_EFFECT, Rank=180, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).fees_tax_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).fees_tax_effect") 
		
		/* CUMUL_F_T_EFFECT_AMO */ 
		CUMUL_F_T_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de="kum. Gebühren/Steuern", en="Cumul Fees & Taxes", fr="Frais & Taxes Cumulé") 
			@sql:SQLName (value=CUMUL_F_T_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=CUMUL_F_T_EFFECT_AMO, Rank=183, ScriptDef="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&portf_fees_m+&portf_tax_m,&final_d<=final_d,1,1))") 
			@aaa:scpt (value="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&portf_fees_m+&portf_tax_m,&final_d<=final_d,1,1))") 
		
		/* CUMUL_GAIN_LOSS */ 
		CUMUL_GAIN_LOSS : AAABusinessTypes:Amount 
			@i18n:Label (de="kum. Gewinn & Verlust", en="Profits & Losses Cumul", fr="Profits & Pertes Cumulés") 
			@sql:SQLName (value=CUMUL_GAIN_LOSS) 
			@aaa:TripleA (FormatEltName=CUMUL_GAIN_LOSS, Rank=301, ScriptDef="IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m +&net_real_curr_profit_m +&net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m +&portf_fees_m + &portf_tax_m +&net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m + &unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m ,&final_d<=final_d,1,1)))") 
			@aaa:scpt (value="IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m +&net_real_curr_profit_m +&net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m +&portf_fees_m + &portf_tax_m +&net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m + &unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m ,&final_d<=final_d,1,1)))") 
		
		/* CUMUL_INCOME_EFFECT */ 
		CUMUL_INCOME_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Ertragseffekt", en="Income Effect Cumul", fr="Effet Revenu Cumulé") 
			@sql:SQLName (value=CUMUL_INCOME_EFFECT) 
			@aaa:TripleA (FormatEltName=CUMUL_INCOME_EFFECT, Rank=170, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).income_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).income_effect") 
		
		/* CUMUL_INCOME_EFFECT_ */ 
		CUMUL_INCOME_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de="kum. Ertrag", en="Cumul Income", fr="Revenu Cumulé") 
			@sql:SQLName (value=CUMUL_INCOME_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=CUMUL_INCOME_EFFECT_, Rank=173, ScriptDef="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&net_rec_income_m+&net_paid_income_m+&rec_accr_interest_m+&paid_accr_interest_m+&tax_credit_m+&unreal_rec_accr_interest_m+&unreal_paid_accr_interest_m,&final_d<=final_d,1,1))") 
			@aaa:scpt (value="SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id,&net_rec_income_m+&net_paid_income_m+&rec_accr_interest_m+&paid_accr_interest_m+&tax_credit_m+&unreal_rec_accr_interest_m+&unreal_paid_accr_interest_m,&final_d<=final_d,1,1))") 
		
		/* CUMUL_TOT_RET */ 
		CUMUL_TOT_RET : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Portfolio Rendite", en="Portfolio Return Cumul", fr="Rendement Cumulé du Portefeuille") 
			@sql:SQLName (value=CUMUL_TOT_RET) 
			@aaa:TripleA (FormatEltName=CUMUL_TOT_RET, Rank=130, ScriptDef="{Return cumulated since calc from date at end of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).total_return") 
			@aaa:scpt (value="{Return cumulated since calc from date at end of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).total_return") 
		
		/* CUMUL_TOT_RET_BENCH */ 
		CUMUL_TOT_RET_BENCH : AAABusinessTypes:Number 
			@i18n:Label (de="kum. Benchmark Rendite", en="Benchmark Return Cumul", fr="Rendement Cumulé de l\'Indice") 
			@sql:SQLName (value=CUMUL_TOT_RET_BENCH) 
			@aaa:TripleA (FormatEltName=CUMUL_TOT_RET_BENCH, Rank=140, ScriptDef="{Benchmark return cumulated from calc from date until end date of each period} IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<> NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,DOMAIN().calc_from_d), NULL)") 
			@aaa:scpt (value="{Benchmark return cumulated from calc from date until end date of each period} IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<> NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,DOMAIN().calc_from_d), NULL)") 
		
		/* FILTER_1

Filtering:This filter allows selecting the rows to be displayed into an analysis by sub-periods between from and till date. */ 
		FILTER_1 : AAABusinessTypes:Flag 
			@sql:SQLName (value=FILTER_1) 
			@aaa:TripleA (FormatEltName=FILTER_1, Rank=1, ScriptDef="{Filter used to have WUI display correct information when Synthetic Data is used: it filter the data to show result global in a monthly basis views} IF(grid_id=NULL,1,0)") 
			@aaa:scpt (value="{Filter used to have WUI display correct information when Synthetic Data is used: it filter the data to show result global in a monthly basis views} IF(grid_id=NULL,1,0)") 
		
		/* FILTER_2 */ 
		FILTER_2 : AAABusinessTypes:Flag 
			@sql:SQLName (value=FILTER_2) 
			@aaa:TripleA (FormatEltName=FILTER_2, Rank=2, ScriptDef="{Filter that flag the last monthly sub-period of the return analysis: it is used to filter the global rows for the last period that contains columns with return value for the full period} {IF(final_d>=DOMAIN().calc_till_d AND grid_id=NULL {OCS-35697 AND initial_d>=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH)},1,0)} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
			@aaa:scpt (value="{Filter that flag the last monthly sub-period of the return analysis: it is used to filter the global rows for the last period that contains columns with return value for the full period} {IF(final_d>=DOMAIN().calc_till_d AND grid_id=NULL {OCS-35697 AND initial_d>=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH)},1,0)} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_de : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_de) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_en : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_en) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_fr : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_fr) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=999, ScriptDef=portfolio_id.comm_mgr_id) 
			@aaa:scpt (value=portfolio_id.comm_mgr_id) 
		
		/* MEAN_CAP */ 
		MEAN_CAP : AAABusinessTypes:Amount 
			@i18n:Label (de="Durchschn. invest. Kapital", en="Mean Capital", fr="Capital Investi Moyen") 
			@sql:SQLName (value=MEAN_CAP) 
			@aaa:TripleA (FormatEltName=MEAN_CAP, Rank=320, ScriptDef="MEAN_CAP(initial_d {@PERIOD_INITIAL_DATE},final_d,0,0,0,0,0)") 
			@aaa:scpt (value="MEAN_CAP(initial_d {@PERIOD_INITIAL_DATE},final_d,0,0,0,0,0)") 
		
		/* OVER_UNDER_PERF */ 
		OVER_UNDER_PERF : AAABusinessTypes:Number 
			@i18n:Label (de="Über-/Unter-Performance", en="Over/Under Performance", fr="Sur/Sous Performance") 
			@sql:SQLName (value=OVER_UNDER_PERF) 
			@aaa:TripleA (FormatEltName=OVER_UNDER_PERF, Rank=132, ScriptDef="{Return differential between portfolio and benchmark} @CUMUL_TOT_RET - @CUMUL_TOT_RET_BENCH") 
			@aaa:scpt (value="{Return differential between portfolio and benchmark} @CUMUL_TOT_RET - @CUMUL_TOT_RET_BENCH") 
		
		/* PERIOD_CAP_EFFECT */ 
		PERIOD_CAP_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de=Kapitaleffekt, en="Capital Effect", fr="Effet Capital") 
			@sql:SQLName (value=PERIOD_CAP_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_CAP_EFFECT, Rank=152, ScriptDef="{Return capital effect per period} 100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).capital_effect") 
			@aaa:scpt (value="{Return capital effect per period} 100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).capital_effect") 
		
		/* PERIOD_CAP_EFFECT_AM */ 
		PERIOD_CAP_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de=Kapital-G/V, en="Capital P&L", fr="P&P Capital") 
			@sql:SQLName (value=PERIOD_CAP_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=PERIOD_CAP_EFFECT_AM, Rank=153, ScriptDef="net_unreal_cap_profit_m + net_unreal_cap_loss_m+net_real_cap_profit_m + net_real_cap_loss_m") 
			@aaa:scpt (value="net_unreal_cap_profit_m + net_unreal_cap_loss_m+net_real_cap_profit_m + net_real_cap_loss_m") 
		
		/* PERIOD_CROSS_EFFECT */ 
		PERIOD_CROSS_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de=Wechselwirkungs-Effekt, en="Cross Effect", fr="Effet Croisé") 
			@sql:SQLName (value=PERIOD_CROSS_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_CROSS_EFFECT, Rank=191, ScriptDef="@PERIOD_TOT_RET - @PERIOD_CAP_EFFECT - @PERIOD_CURR_EFFECT - @PERIOD_INCOME_EFFECT - @PERIOD_F_T_EFFECT") 
			@aaa:scpt (value="@PERIOD_TOT_RET - @PERIOD_CAP_EFFECT - @PERIOD_CURR_EFFECT - @PERIOD_INCOME_EFFECT - @PERIOD_F_T_EFFECT") 
		
		/* PERIOD_CURR_EFFECT */ 
		PERIOD_CURR_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="Währungseffekt", en="Currency Effect", fr="Effet Devise") 
			@sql:SQLName (value=PERIOD_CURR_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_CURR_EFFECT, Rank=161, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).current_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).current_effect") 
		
		/* PERIOD_CURR_EFFECT_A */ 
		PERIOD_CURR_EFFECT_AMOUNT : AAABusinessTypes:Number 
			@i18n:Label (de="Währungs-G/V", en="Currency P&L", fr="P&P Devise") 
			@sql:SQLName (value=PERIOD_CURR_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=PERIOD_CURR_EFFECT_A, Rank=162, ScriptDef="net_real_curr_profit_m + net_real_curr_loss_m+net_unreal_curr_profit_m + net_unreal_curr_loss_m") 
			@aaa:scpt (value="net_real_curr_profit_m + net_real_curr_loss_m+net_unreal_curr_profit_m + net_unreal_curr_loss_m") 
		
		/* PERIOD_DENOM */ 
		PERIOD_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Zeitraum, en=Period, fr="Période") 
			@sql:SQLName (value=PERIOD_DENOM) 
			@aaa:TripleA (FormatEltName=PERIOD_DENOM, Rank=37, ScriptDef="IF(DOMAIN().freq1_unit_e <>1,IF(DATEDIFF(initial_d, final_d, MONTH)<=1, {then} PRINTF(\"%s %s\",DATESTR(final_d, \"MON\"),DATESTR(final_d, \"YY\")), {else} PRINTF(\"%s to %s\",PRINTF(\"%s %s\",DATESTR(initial_d,\"MON\"),DATESTR(initial_d,\"YY\")),PRINTF(\"%s %s\",DATESTR(final_d,\"MON\"),DATESTR(final_d,\"YY\")) ) ),PRINTF(\"%s %s %s\",DATESTR(final_d, \"DD\"),DATESTR(final_d, \"MON\") ,DATESTR(final_d,\"YY\")))") 
			@aaa:scpt (value="IF(DOMAIN().freq1_unit_e <>1,IF(DATEDIFF(initial_d, final_d, MONTH)<=1, {then} PRINTF(\"%s %s\",DATESTR(final_d, \"MON\"),DATESTR(final_d, \"YY\")), {else} PRINTF(\"%s to %s\",PRINTF(\"%s %s\",DATESTR(initial_d,\"MON\"),DATESTR(initial_d,\"YY\")),PRINTF(\"%s %s\",DATESTR(final_d,\"MON\"),DATESTR(final_d,\"YY\")) ) ),PRINTF(\"%s %s %s\",DATESTR(final_d, \"DD\"),DATESTR(final_d, \"MON\") ,DATESTR(final_d,\"YY\")))") 
		
		/* PERIOD_F_T_EFFECT */ 
		PERIOD_F_T_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de="Gebühren/Steuern-Effekt", en="Fees & Taxes Effect", fr="Effet Frais & Taxes") 
			@sql:SQLName (value=PERIOD_F_T_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_F_T_EFFECT, Rank=181, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).fees_tax_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d {@PERIOD_INITIAL_DATE}).fees_tax_effect") 
		
		/* PERIOD_F_T_EFFECT_AM */ 
		PERIOD_F_T_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de="Gebühren/Steuern", en="Fees & Taxes", fr="Frais & Taxes") 
			@sql:SQLName (value=PERIOD_F_T_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=PERIOD_F_T_EFFECT_AM, Rank=182, ScriptDef="portf_fees_m + portf_tax_m") 
			@aaa:scpt (value="portf_fees_m + portf_tax_m") 
		
		/* PERIOD_FINAL_DATE */ 
		PERIOD_FINAL_DATE : AAABusinessTypes:Date 
			@i18n:Label (de=Enddatum, en="Final Date", fr="Date de Fin") 
			@sql:SQLName (value=PERIOD_FINAL_DATE) 
			@aaa:TripleA (FormatEltName=PERIOD_FINAL_DATE, Rank=21, ScriptDef=final_d, SortingRank=2) 
			@aaa:scpt (value=final_d) 
		
		/* PERIOD_FINAL_MKT_VAL */ 
		PERIOD_FINAL_MKT_VAL : AAABusinessTypes:Amount 
			@i18n:Label (de=End-Marktwert, en="Final Market Value", fr="Valeur d\'Inventaire Finale") 
			@sql:SQLName (value=PERIOD_FINAL_MKT_VAL) 
			@aaa:TripleA (FormatEltName=PERIOD_FINAL_MKT_VAL, Rank=101, ScriptDef="{final market value at final date of each period} final_market_value_m") 
			@aaa:scpt (value="{final market value at final date of each period} final_market_value_m") 
		
		/* PERIOD_GAIN_LOSS */ 
		PERIOD_GAIN_LOSS : AAABusinessTypes:Amount 
			@i18n:Label (de="Gewinn & Verlust", en="Profits & Losses", fr="Profits & Pertes") 
			@sql:SQLName (value=PERIOD_GAIN_LOSS) 
			@aaa:TripleA (FormatEltName=PERIOD_GAIN_LOSS, Rank=300, ScriptDef="@PERIOD_CAP_EFFECT_AMOUNT +@PERIOD_CURR_EFFECT_AMOUNT+@PERIOD_INCOME_EFFECT_AMOUNT+@PERIOD_F_T_EFFECT_AMOUNT") 
			@aaa:scpt (value="@PERIOD_CAP_EFFECT_AMOUNT +@PERIOD_CURR_EFFECT_AMOUNT+@PERIOD_INCOME_EFFECT_AMOUNT+@PERIOD_F_T_EFFECT_AMOUNT") 
		
		/* PERIOD_INCOME_EFFECT */ 
		PERIOD_INCOME_EFFECT : AAABusinessTypes:Number 
			@i18n:Label (de=Ertragseffekt, en="Income Effect", fr="Effet Revenu") 
			@sql:SQLName (value=PERIOD_INCOME_EFFECT) 
			@aaa:TripleA (FormatEltName=PERIOD_INCOME_EFFECT, Rank=171, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d).income_effect") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d).income_effect") 
		
		/* PERIOD_INCOME_EFFECT */ 
		PERIOD_INCOME_EFFECT_AMOUNT : AAABusinessTypes:Amount 
			@i18n:Label (de=Ertrag, en=Income, fr=Revenu) 
			@sql:SQLName (value=PERIOD_INCOME_EFFECT_AMOUNT) 
			@aaa:TripleA (FormatEltName=PERIOD_INCOME_EFFECT, Rank=172, ScriptDef="net_rec_income_m + net_paid_income_m + rec_accr_interest_m + paid_accr_interest_m + tax_credit_m + unreal_rec_accr_interest_m + unreal_paid_accr_interest_m") 
			@aaa:scpt (value="net_rec_income_m + net_paid_income_m + rec_accr_interest_m + paid_accr_interest_m + tax_credit_m + unreal_rec_accr_interest_m + unreal_paid_accr_interest_m") 
		
		/* PERIOD_INITIAL_DATE */ 
		PERIOD_INITIAL_DATE : AAABusinessTypes:Date 
			@i18n:Label (de=Anfangsdatum, en="Initial Date", fr="Date de Début") 
			@sql:SQLName (value=PERIOD_INITIAL_DATE) 
			@aaa:TripleA (FormatEltName=PERIOD_INITIAL_DATE, Rank=20, ScriptDef="{Computed initial date of monthly period} IF(DATEPOSI(initial_d, END_OF, MONTH) = initial_d, initial_d,IF(DATEPOSI(initial_d,BEGIN_OF,MONTH) <= DOMAIN().calc_from_d,DOMAIN().calc_from_d,DATEADD(DATEPOSI(initial_d,BEGIN_OF,MONTH),DAY,-1)))") 
			@aaa:scpt (value="{Computed initial date of monthly period} IF(DATEPOSI(initial_d, END_OF, MONTH) = initial_d, initial_d,IF(DATEPOSI(initial_d,BEGIN_OF,MONTH) <= DOMAIN().calc_from_d,DOMAIN().calc_from_d,DATEADD(DATEPOSI(initial_d,BEGIN_OF,MONTH),DAY,-1)))") 
		
		/* PERIOD_INITIAL_MKT_V */ 
		PERIOD_INITIAL_MKT_VAL : AAABusinessTypes:Amount 
			@i18n:Label (de=Anfangs-Marktwert, en="Initial Market Value", fr="Valeur d\'Inventaire Initiale") 
			@sql:SQLName (value=PERIOD_INITIAL_MKT_VAL) 
			@aaa:TripleA (FormatEltName=PERIOD_INITIAL_MKT_V, Rank=100, ScriptDef=initial_market_value_m) 
			@aaa:scpt (value=initial_market_value_m) 
		
		/* PERIOD_INVEST */ 
		PERIOD_INVEST : AAABusinessTypes:Amount 
			@i18n:Label (de="Zuflüsse", en=Investment, fr=Apports) 
			@sql:SQLName (value=PERIOD_INVEST) 
			@aaa:TripleA (FormatEltName=PERIOD_INVEST, Rank=282, ScriptDef=net_invest_m) 
			@aaa:scpt (value=net_invest_m) 
		
		/* PERIOD_REAL_CAP_PL */ 
		PERIOD_REAL_CAP_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Realisierter Kapital-G/V", en="Realized Capital P&L", fr="Capital Profits & Pertes Réalisés") 
			@sql:SQLName (value=PERIOD_REAL_CAP_PL) 
			@aaa:TripleA (FormatEltName=PERIOD_REAL_CAP_PL, Rank=250, ScriptDef="net_real_cap_profit_m + net_real_cap_loss_m") 
			@aaa:scpt (value="net_real_cap_profit_m + net_real_cap_loss_m") 
		
		/* PERIOD_REAL_CURR_PL */ 
		PERIOD_REAL_CURR_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Realisierter Währungs-G/V", en="Realized Currency P&L", fr="Devise Gains & Pertes Réalisés") 
			@sql:SQLName (value=PERIOD_REAL_CURR_PL) 
			@aaa:TripleA (FormatEltName=PERIOD_REAL_CURR_PL, Rank=270, ScriptDef="net_real_curr_profit_m + net_real_curr_loss_m") 
			@aaa:scpt (value="net_real_curr_profit_m + net_real_curr_loss_m") 
		
		/* PERIOD_TOT_RET */ 
		PERIOD_TOT_RET : AAABusinessTypes:Number 
			@i18n:Label (de="Portfolio Rendite", en="Portfolio Return", fr="Rendement du Portefeuille") 
			@sql:SQLName (value=PERIOD_TOT_RET) 
			@aaa:TripleA (FormatEltName=PERIOD_TOT_RET, Rank=131, ScriptDef="{Return of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d{@PERIOD_INITIAL_DATE} ).total_return") 
			@aaa:scpt (value="{Return of each period} 100*RETURN(final_d,RET_TWR,0,0,0,0, initial_d{@PERIOD_INITIAL_DATE} ).total_return") 
		
		/* PERIOD_TOT_RET_BENCH */ 
		PERIOD_TOT_RET_BENCH : AAABusinessTypes:Number 
			@i18n:Label (de="Benchmark Rendite", en="Benchmark Return", fr="Rendement de l\'Indice") 
			@sql:SQLName (value=PERIOD_TOT_RET_BENCH) 
			@aaa:TripleA (FormatEltName=PERIOD_TOT_RET_BENCH, Rank=141, ScriptDef="{Benchmark return per period} IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<>NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,initial_d {@PERIOD_INITIAL_DATE}), NULL)") 
			@aaa:scpt (value="{Benchmark return per period} IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<>NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,initial_d {@PERIOD_INITIAL_DATE}), NULL)") 
		
		/* PERIOD_UNREAL_CAP_PL */ 
		PERIOD_UNREAL_CAP_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Unrealisierter Kapital-G/V", en="Unrealized Capital P&L", fr="Capital Gains & Pertes Non Réalisés") 
			@sql:SQLName (value=PERIOD_UNREAL_CAP_PL) 
			@aaa:TripleA (FormatEltName=PERIOD_UNREAL_CAP_PL, Rank=260, ScriptDef="net_unreal_cap_profit_m + net_unreal_cap_loss_m") 
			@aaa:scpt (value="net_unreal_cap_profit_m + net_unreal_cap_loss_m") 
		
		/* PERIOD_UNREAL_CURR_P */ 
		PERIOD_UNREAL_CURR_PL : AAABusinessTypes:Amount 
			@i18n:Label (de="Unrealisierter Währungs-G/V", en="Unrealized Currency P&L", fr="Devise Gains & Pertes Non Réalisés") 
			@sql:SQLName (value=PERIOD_UNREAL_CURR_PL) 
			@aaa:TripleA (FormatEltName=PERIOD_UNREAL_CURR_P, Rank=271, ScriptDef="net_unreal_curr_profit_m + net_unreal_curr_loss_m") 
			@aaa:scpt (value="net_unreal_curr_profit_m + net_unreal_curr_loss_m") 
		
		/* PERIOD_WITHDRAWAL */ 
		PERIOD_WITHDRAWAL : AAABusinessTypes:Amount 
			@i18n:Label (de="Abflüsse", en=Withdrawal, fr=Retraits) 
			@sql:SQLName (value=PERIOD_WITHDRAWAL) 
			@aaa:TripleA (FormatEltName=PERIOD_WITHDRAWAL, Rank=283, ScriptDef=net_withdrawal_m) 
			@aaa:scpt (value=net_withdrawal_m) 
		
		/* PORTFOLIO_CODE */ 
		PORTFOLIO_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_CODE) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CODE, Rank=23, ScriptDef=portfolio_id.code, SortingRank=1) 
			@aaa:scpt (value=portfolio_id.code) 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=1000, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
		
		/* PORTFOLIO_LEVEL_FILT */ 
		PORTFOLIO_LEVEL_FILTER : AAABusinessTypes:Flag 
			@sql:SQLName (value=PORTFOLIO_LEVEL_FILTER) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_LEVEL_FILT, Rank=380, ScriptDef="IF(grid_id=NULL,1,0) {only global lines are flagged}") 
			@aaa:scpt (value="IF(grid_id=NULL,1,0) {only global lines are flagged}") 
		
		/* PORTFOLIO_NAME */ 
		PORTFOLIO_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_NAME, Rank=52, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.name) {portfolio_id.name}", SortingRank=1) 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.name) {portfolio_id.name}") 
		
		/* PTF_PERIOD_BREAK */ 
		PTF_PERIOD_BREAK : AAABusinessTypes:UniInfo 
			@sql:SQLName (value=PTF_PERIOD_BREAK) 
			@aaa:TripleA (FormatEltName=PTF_PERIOD_BREAK, Rank=36, ScriptDef="CONCAT(@PORTFOLIO_CODE, DATESTR(@PERIOD_END_OF, \"DDMMYY\"))") 
			@aaa:scpt (value="CONCAT(@PORTFOLIO_CODE, DATESTR(@PERIOD_END_OF, \"DDMMYY\"))") 
		
		/* REF_CURRENCY */ 
		REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de=Whrg., en=Ccy, fr=Devise) 
			@sql:SQLName (value=REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=REF_CURRENCY, Rank=310, ScriptDef="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} currency_id.code )") 
			@aaa:scpt (value="IF( GET_APPL_PARAM(\"DS_CURRENCY_CODE\") <> NULL, SYNONYM(\"currency\", currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code, {ELSE} currency_id.code )") 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
	} 
	/* PCK_RMT_RETURN_SUM */ 
	PCK_RMT_RETURN_SUM 
		@aaa:FormatColumnFilter (value=FILTER_2) 
		@aaa:FormatFunction (value="Return Analysis") 
		@sql:SQLName (value=PCK_RMT_RETURN_SUM) 
		@aaa:TripleA (ColumnFilter=FILTER_2, EntitySQLName=port_synthetic, FinFuncName="Return Analysis", FinFuncProcName=return, FormatName=PCK_RMT_RETURN_SUM) 
	{ 
		/* abscissa_market_seg */ 
		abscissa_market_seg : AAABusinessTypes:Id 
			@sql:SQLName (value=abscissa_market_seg) 
			@aaa:TripleA (FormatEltName=abscissa_market_seg, Rank=1011, ScriptDef=abscissa_market_seg_id) 
			@aaa:scpt (value=abscissa_market_seg_id) 
		
		/* ADMIN_MGR_NAME */ 
		ADMIN_MGR_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Vermögensverwalter", en=Manager, fr=Gestionnaire) 
			@sql:SQLName (value=ADMIN_MGR_NAME) 
			@aaa:TripleA (FormatEltName=ADMIN_MGR_NAME, Rank=810, ScriptDef=portfolio_id.admin_mgr_id.name) 
			@aaa:scpt (value=portfolio_id.admin_mgr_id.name) 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_de : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM_de) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_en : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM_en) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* BENCH_DENOM */ 
		BENCH_DENOM_fr : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Benchmark, en=Benchmark, fr="Indice de Référence") 
			@sql:SQLName (value=BENCH_DENOM_fr) 
			@aaa:TripleA (FormatEltName=BENCH_DENOM, Rank=60, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0 AND GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id!=NULL, DENOMINATION(\"strategy\",GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, TSL_CURRENT_LANGUAGE()).denom, GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).denom)") 
		
		/* client_id */ 
		client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=client_id) 
			@aaa:TripleA (FormatEltName=client_id, Rank=998, ScriptDef=portfolio_id.third_id) 
			@aaa:scpt (value=portfolio_id.third_id) 
		
		/* CLIENT_NAME */ 
		CLIENT_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de="Name des Kunden", en="Client Name", fr="Nom du client") 
			@sql:SQLName (value=CLIENT_NAME) 
			@aaa:TripleA (FormatEltName=CLIENT_NAME, Rank=55, ScriptDef="IF( DOMAIN().port_cons_rule_e IN (1, 6) AND DOMAIN().portfolio_dimension_e = 6 {client}, {In case of Merged or Merged TWR on a client, client name of Domain is retrieved} GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF ( DOMAIN().port_cons_rule_e IN (1, 6), IF (DOMAIN().portfolio_dimension_e = 1 {portfolio}, {In case of Merged or Merged TWR on a portfolio, portfolio client name of Domain is retrieved} GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).third_id.name, NULL ), {In other cases, the portfolio client is retrieved} portfolio_id.third_id.name ) )") 
			@aaa:scpt (value="IF( DOMAIN().port_cons_rule_e IN (1, 6) AND DOMAIN().portfolio_dimension_e = 6 {client}, {In case of Merged or Merged TWR on a client, client name of Domain is retrieved} GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF ( DOMAIN().port_cons_rule_e IN (1, 6), IF (DOMAIN().portfolio_dimension_e = 1 {portfolio}, {In case of Merged or Merged TWR on a portfolio, portfolio client name of Domain is retrieved} GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).third_id.name, NULL ), {In other cases, the portfolio client is retrieved} portfolio_id.third_id.name ) )") 
		
		/* COM_MGR_NAME */ 
		COM_MGR_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Kundenberater, en=Advisor, fr=Conseiller) 
			@sql:SQLName (value=COM_MGR_NAME) 
			@aaa:TripleA (FormatEltName=COM_MGR_NAME, Rank=800, ScriptDef="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).comm_mgr_id.name, {else} portfolio_id.comm_mgr_id.name)") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).comm_mgr_id.name, {else} portfolio_id.comm_mgr_id.name)") 
		
		/* CUMUL_GAIN_LOSS */ 
		CUMUL_GAIN_LOSS : AAABusinessTypes:Amount 
			@i18n:Label (de="Gewinn & Verlust", en="Profits & Losses", fr="Profits & Pertes") 
			@sql:SQLName (value=CUMUL_GAIN_LOSS) 
			@aaa:TripleA (FormatEltName=CUMUL_GAIN_LOSS, Rank=301, ScriptDef="IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m +&net_real_curr_profit_m +&net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m +&portf_fees_m + &portf_tax_m +&net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m + &unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m ,&final_d<=final_d,1,1)))") 
			@aaa:scpt (value="IF(@FILTER_1=1,SUM(GET_OBJECT_ARRAY(GET_ENTITY(\"port_synthetic\"),&portfolio_id=portfolio_id, &net_unreal_cap_profit_m + &net_unreal_cap_loss_m+&net_real_cap_profit_m + &net_real_cap_loss_m +&net_real_curr_profit_m +&net_real_curr_loss_m+&net_unreal_curr_profit_m + &net_unreal_curr_loss_m +&portf_fees_m + &portf_tax_m +&net_rec_income_m + &net_paid_income_m + &rec_accr_interest_m + &paid_accr_interest_m + &tax_credit_m + &unreal_rec_accr_interest_m + &unreal_paid_accr_interest_m ,&final_d<=final_d,1,1)))") 
		
		/* CUMUL_TOT_RET */ 
		CUMUL_TOT_RET : AAABusinessTypes:Number 
			@i18n:Label (de=Portfolio-Rendite, en="Portfolio Return", fr="Rendement du Portefeuille") 
			@sql:SQLName (value=CUMUL_TOT_RET) 
			@aaa:TripleA (FormatEltName=CUMUL_TOT_RET, Rank=130, ScriptDef="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).total_return") 
			@aaa:scpt (value="100*RETURN(final_d,RET_TWR,0,0,0,0, DOMAIN().calc_from_d).total_return") 
		
		/* CUMUL_TOT_RET_BENCH */ 
		CUMUL_TOT_RET_BENCH : AAABusinessTypes:Number 
			@i18n:Label (de=Benchmark-Rendite, en="Benchmark Return", fr="Rendement de l\'Indice") 
			@sql:SQLName (value=CUMUL_TOT_RET_BENCH) 
			@aaa:TripleA (FormatEltName=CUMUL_TOT_RET_BENCH, Rank=140, ScriptDef="IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<>NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,DOMAIN().calc_from_d), NULL)") 
			@aaa:scpt (value="IF(GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1)<>NULL, 100*BENCH_RETURN(\"strategy\", GET_STRATEGY(\"portfolio\",portfolio_id,2,DOMAIN().calc_till_d,,,,1).id, final_d,DOMAIN().calc_from_d), NULL)") 
		
		/* data_secu_prof_id */ 
		data_secu_prof_id : AAABusinessTypes:Id 
			@sql:SQLName (value=data_secu_prof_id) 
			@aaa:TripleA (FormatEltName=data_secu_prof_id, Rank=1300, ScriptDef="{ortfolio_id.data_secu_prof_id} IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} portfolio_id.data_secu_prof_id)") 
			@aaa:scpt (value="{ortfolio_id.data_secu_prof_id} IF(DOMAIN().port_cons_rule_e IN (1,6), IF(DOMAIN().dim_port_dict_id=800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).data_secu_prof_id, {else} IF(DOMAIN().dim_port_dict_id=400, GET_OBJECT(\"list\",DOMAIN().port_object_id).data_secu_prof_id, {else} portfolio_id.data_secu_prof_id))), {else} portfolio_id.data_secu_prof_id)") 
		
		/* domain_client_id */ 
		domain_client_id : AAABusinessTypes:Id 
			@sql:SQLName (value=domain_client_id) 
			@aaa:TripleA (FormatEltName=domain_client_id, Rank=3000, ScriptDef="IF(DOMAIN().dim_port_dict_id=600 AND DOMAIN().third_compo_e<>1 ,DOMAIN().port_object_id,NULL)") 
			@aaa:scpt (value="IF(DOMAIN().dim_port_dict_id=600 AND DOMAIN().third_compo_e<>1 ,DOMAIN().port_object_id,NULL)") 
		
		/* FILTER_1

Filtering:This filter allows selecting the rows to be displayed into an analysis by sub-periods between from and till date. */ 
		FILTER_1 : AAABusinessTypes:Flag 
			@sql:SQLName (value=FILTER_1) 
			@aaa:TripleA (FormatEltName=FILTER_1, Rank=1, ScriptDef="{Filter used to have WUI display correct information when Synthetic Data is used: it filter the data to show result global in a monthly basis views} IF(final_d = DOMAIN().calc_till_d AND grid_id=NULL AND ((initial_d=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH) OR initial_d=DOMAIN().calc_from_d) AND (final_d=DATEPOSI(final_d,END_OF,MONTH) OR final_d=DOMAIN().calc_till_d)), 1, IF(final_d = DATEPOSI(final_d,END_OF,MONTH) AND grid_id=NULL AND ((initial_d=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH) OR initial_d=DOMAIN().calc_from_d)), 1, 0))") 
			@aaa:scpt (value="{Filter used to have WUI display correct information when Synthetic Data is used: it filter the data to show result global in a monthly basis views} IF(final_d = DOMAIN().calc_till_d AND grid_id=NULL AND ((initial_d=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH) OR initial_d=DOMAIN().calc_from_d) AND (final_d=DATEPOSI(final_d,END_OF,MONTH) OR final_d=DOMAIN().calc_till_d)), 1, IF(final_d = DATEPOSI(final_d,END_OF,MONTH) AND grid_id=NULL AND ((initial_d=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH) OR initial_d=DOMAIN().calc_from_d)), 1, 0))") 
		
		/* FILTER_2 */ 
		FILTER_2 : AAABusinessTypes:Flag 
			@sql:SQLName (value=FILTER_2) 
			@aaa:TripleA (FormatEltName=FILTER_2, Rank=2, ScriptDef="{Filter that flag the last monthly sub-period of the return analysis: it is used to filter the global rows for the last period that contains columns with return value for the full period} {IF(final_d>=DOMAIN().calc_till_d AND grid_id=NULL {OCS-35697 AND initial_d>=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH)},1,0)} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
			@aaa:scpt (value="{Filter that flag the last monthly sub-period of the return analysis: it is used to filter the global rows for the last period that contains columns with return value for the full period} {IF(final_d>=DOMAIN().calc_till_d AND grid_id=NULL {OCS-35697 AND initial_d>=DATEPOSI(DATEADD(final_d,MONTH,-1),END_OF,MONTH)},1,0)} {PMSTA-14133} IF ( final_d>=DOMAIN().calc_till_d AND grid_id=NULL, IF ( portfolio_id.ret_freq_unit_e IN (8, 9), IF ( NUMMASK(level_n,STD_PERF) = 1 OR NUMMASK(level_n,PERF_ATTRIB) = 1, 1, 0 ) ,1 ) ,0 )") 
		
		/* grid_id */ 
		grid_id : AAABusinessTypes:Id 
			@sql:SQLName (value=grid_id) 
			@aaa:TripleA (FormatEltName=grid_id, Rank=1010, ScriptDef=grid_id) 
			@aaa:scpt (value=grid_id) 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_de : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_de) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_en : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_en) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* HIERARCHY_HEAD */ 
		HIERARCHY_HEAD_fr : AAABusinessTypes:UniCode 
			@i18n:Label (de="Spitze der Hierarchie", en="Hirarchy Head", fr="Tête Hiérarchie") 
			@sql:SQLName (value=HIERARCHY_HEAD_fr) 
			@aaa:TripleA (FormatEltName=HIERARCHY_HEAD, Rank=10, ScriptDef="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
			@aaa:scpt (value="IF( DOMAIN().dim_port_dict_id = 800, GET_OBJECT(\"portfolio\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 600, GET_OBJECT(\"third_party\",DOMAIN().port_object_id).name, IF( DOMAIN().dim_port_dict_id = 400, IF( GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom <> NULL, GET_OBJECT(\"list\",DOMAIN().port_object_id).DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, GET_OBJECT(\"list\",DOMAIN().port_object_id).name ) ) ) )") 
		
		/* manager_id */ 
		manager_id : AAABusinessTypes:Id 
			@sql:SQLName (value=manager_id) 
			@aaa:TripleA (FormatEltName=manager_id, Rank=999, ScriptDef=portfolio_id.comm_mgr_id) 
			@aaa:scpt (value=portfolio_id.comm_mgr_id) 
		
		/* nature_e */ 
		nature_e : AAABusinessTypes:Enum 
			@sql:SQLName (value=nature_e) 
			@aaa:TripleA (FormatEltName=nature_e, Rank=1001, ScriptDef=nature_e) 
			@aaa:scpt (value=nature_e) 
		
		/* ordinate_market_seg */ 
		ordinate_market_seg : AAABusinessTypes:Id 
			@sql:SQLName (value=ordinate_market_seg) 
			@aaa:TripleA (FormatEltName=ordinate_market_seg, Rank=1012, ScriptDef=ordinate_market_seg_id) 
			@aaa:scpt (value=ordinate_market_seg_id) 
		
		/* PERIOD_FINAL_MKT_VAL */ 
		PERIOD_FINAL_MKT_VAL : AAABusinessTypes:Amount 
			@i18n:Label (de=End-Marktwert, en="Final Market Value", fr="Valeur d\'Inventaire Finale") 
			@sql:SQLName (value=PERIOD_FINAL_MKT_VAL) 
			@aaa:TripleA (FormatEltName=PERIOD_FINAL_MKT_VAL, Rank=101, ScriptDef=final_market_value_m) 
			@aaa:scpt (value=final_market_value_m) 
		
		/* PORTFOLIO_CODE */ 
		PORTFOLIO_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_CODE) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_CODE, Rank=23, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.code) {portfolio_id.code}", SortingRank=1) 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.code) {portfolio_id.code}") 
		
		/* portfolio_id */ 
		portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=portfolio_id) 
			@aaa:TripleA (FormatEltName=portfolio_id, Rank=1000, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=PORTFOLIO_INVEST_SER, Rank=57, ScriptDef="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_de : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_de) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=57, ScriptDef="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_en : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_en) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=57, ScriptDef="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
		
		/* PORTFOLIO_INVEST_SER */ 
		PORTFOLIO_INVEST_SERVICE_fr : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Serviceart, en="Service Type", fr="Type de service") 
			@sql:SQLName (value=PORTFOLIO_INVEST_SERVICE_fr) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_INVEST_SER, Rank=57, ScriptDef="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e=1 {Merged} AND DOMAIN().dim_port_dict_id = 800 {Portfolio}, GET_OBJECT(\"portfolio\", DOMAIN().port_object_id).service_type_e.LABEL[TSL_CURRENT_LANGUAGE()], {else} portfolio_id.service_type_e.LABEL[TSL_CURRENT_LANGUAGE()])") 
		
		/* PORTFOLIO_NAME */ 
		PORTFOLIO_NAME : AAABusinessTypes:UniName 
			@i18n:Label (de=Portfolio, en=Portfolio, fr=Portefeuille) 
			@sql:SQLName (value=PORTFOLIO_NAME) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_NAME, Rank=52, ScriptDef="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.name)", SortingRank=1) 
			@aaa:scpt (value="IF(DOMAIN().port_cons_rule_e IN (1),@HIERARCHY_HEAD,portfolio_id.name)") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Portfoliotyp, en="Portfolio Type", fr="Type de Portefeuille") 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM) 
			@aaa:TripleA (AttrMultiLanguage=true, FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_de : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Portfoliotyp, en="Portfolio Type", fr="Type de Portefeuille") 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_de) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_en : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Portfoliotyp, en="Portfolio Type", fr="Type de Portefeuille") 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_en) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
		
		/* PORTFOLIO_TYPE_DENOM */ 
		PORTFOLIO_TYPE_DENOM_fr : AAABusinessTypes:UniInfo 
			@i18n:Label (de=Portfoliotyp, en="Portfolio Type", fr="Type de Portefeuille") 
			@sql:SQLName (value=PORTFOLIO_TYPE_DENOM_fr) 
			@aaa:TripleA (FormatEltName=PORTFOLIO_TYPE_DENOM, Rank=51, ScriptDef="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
			@aaa:scpt (value="IF(DOMAIN() != NULL AND TSL_CURRENT_LANGUAGE() > 0, portfolio_id.type.DENOMINATION[TSL_CURRENT_LANGUAGE()].denom, portfolio_id.type.denom)") 
		
		/* PTF_HIER */ 
		PTF_HIER : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en="Hierarchy Structure", fr="Structure de Hiérarchie") 
			@sql:SQLName (value=PTF_HIER) 
			@aaa:TripleA (FormatEltName=PTF_HIER, Rank=49, ScriptDef="{This script generates the portfolio hierarchy structure in case of portfolio hierarchy} {ocs-39055} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
			@aaa:scpt (value="{This script generates the portfolio hierarchy structure in case of portfolio hierarchy} {ocs-39055} IF(portfolio_id.hier_port_id <> NULL, IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s%s\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, PRINTF(\"[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code) ), IF( portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.parent_port_id.name, portfolio_id.parent_port_id.parent_port_id.code, portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code), IF(portfolio_id.hier_port_id = portfolio_id.parent_port_id, PRINTF(\"%s[HIERLEV%s]%s[HIERLEV%s]\", portfolio_id.parent_port_id.name, portfolio_id.parent_port_id.code, portfolio_id.name, portfolio_id.code ), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) ))))), PRINTF(\"%s[HIERLEV%s]\", portfolio_id.name, portfolio_id.code) )") 
		
		/* PTF_HIER_STR */ 
		PTF_HIER_STR : AAABusinessTypes:UniNote 
			@i18n:Label (de=Hierarchie, en=Hierarchy, fr="Hiérarchie") 
			@sql:SQLName (value=PTF_HIER_STR) 
			@aaa:TripleA (FormatEltName=PTF_HIER_STR, Rank=50, ScriptDef="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {OCS-39566} IF( DOMAIN().dim_port_dict_id IN (600,800), IF(DOMAIN().port_cons_rule_e =2,{then detailed=>portfolio} portfolio_id.name, IF(DOMAIN().port_cons_rule_e=5, {then portfolio hierarchy if exist} @PTF_HIER, IF(DOMAIN().port_cons_rule_e IN(1,6), {then => portfolio dimension} @HIERARCHY_HEAD)) {no merge twr}){no detailed}, @PTF_HIER )") 
			@aaa:scpt (value="{This script generates the appropriate portfolio dimension hierarchy structure according to the load hierarchy and consolidation method} {OCS-39566} IF( DOMAIN().dim_port_dict_id IN (600,800), IF(DOMAIN().port_cons_rule_e =2,{then detailed=>portfolio} portfolio_id.name, IF(DOMAIN().port_cons_rule_e=5, {then portfolio hierarchy if exist} @PTF_HIER, IF(DOMAIN().port_cons_rule_e IN(1,6), {then => portfolio dimension} @HIERARCHY_HEAD)) {no merge twr}){no detailed}, @PTF_HIER )") 
		
		/* PTF_STRAT_DATE */ 
		PTF_STRAT_DATE : AAABusinessTypes:Date 
			@i18n:Label (de=Strategiedatum, en="Strategy Date", fr="Stratégie - Date") 
			@sql:SQLName (value=PTF_STRAT_DATE) 
			@aaa:TripleA (FormatEltName=PTF_STRAT_DATE, Rank=38, ScriptDef) 
			@aaa:scpt (value) 
		
		/* REF_CURRENCY */ 
		REF_CURRENCY : AAABusinessTypes:UniCode 
			@i18n:Label (de=Whrg., en=Ccy, fr=Devise) 
			@sql:SQLName (value=REF_CURRENCY) 
			@aaa:TripleA (FormatEltName=REF_CURRENCY, Rank=310, ScriptDef="SYNONYM(\"currency\", currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code") 
			@aaa:scpt (value="SYNONYM(\"currency\", currency_id, GET_APPL_PARAM(\"DS_CURRENCY_CODE\"), 1).code") 
		
		/* seqno */ 
		seqno : AAABusinessTypes:LongInt PK required 
			@sql:SQLName (value=seqno) 
			@aaa:TripleA (FormatEltName=seqno, Rank=0, ScriptDef) 
			@aaa:scpt (value) 
		
		/* THIRD_COMP_RULE */ 
		THIRD_COMP_RULE : AAAEnumerations:DomainAAAThirdCompoE 
			@i18n:Label (de=Portfolio-Kunden-Zuordnung, en="Portfolio Link Nature", fr="Nature du lien avec le portefeuille") 
			@sql:SQLName (value=THIRD_COMP_RULE) 
			@aaa:TripleA (AttrSQLName=third_compo_e, FormatEltName=THIRD_COMP_RULE, Rank=3050, ScriptDef="{ --SQLFORMAT case when domain_client_id = NULL then NULL when client_id = domain_client_id then 1 when THIRD_PARTY_OWNERSHIP_RULE != NULL then 2 end }") 
			@aaa:scpt (value="{ --SQLFORMAT case when domain_client_id = NULL then NULL when client_id = domain_client_id then 1 when THIRD_PARTY_OWNERSHIP_RULE != NULL then 2 end }") 
		
		/* THIRD_PARTY_CODE */ 
		THIRD_PARTY_CODE : AAABusinessTypes:UniCode 
			@i18n:Label (de=Kunde, en="Client Code", fr="Code du Client") 
			@sql:SQLName (value=THIRD_PARTY_CODE) 
			@aaa:TripleA (FormatEltName=THIRD_PARTY_CODE, Rank=56, ScriptDef=portfolio_id.third_id.code) 
			@aaa:scpt (value=portfolio_id.third_id.code) 
		
		/* THIRD_PARTY_OWNERSHI */ 
		THIRD_PARTY_OWNERSHIP_RULE : AAAEnumerations:PortfolioThirdCompoOwnershipRuleE 
			@i18n:Label (de="Verfügungsberechtigung", en="Ownership Rule", fr="Règle de propriété") 
			@sql:SQLName (value=THIRD_PARTY_OWNERSHIP_RULE) 
			@aaa:TripleA (AttrSQLName=ownership_rule_e, FormatEltName=THIRD_PARTY_OWNERSHI, Rank=3030, ScriptDef="{ --SQLFORMAT select max(ownership_rule_e) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
			@aaa:scpt (value="{ --SQLFORMAT select max(ownership_rule_e) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
		
		/* THIRD_PARTY_PERCT_OW */ 
		THIRD_PARTY_PERCT_OWNERSHIP : AAABusinessTypes:Number 
			@i18n:Label (de="Prozentsatz des Eigentums", en="Percentage of Ownership", fr="Pourcentage de la propriété") 
			@sql:SQLName (value=THIRD_PARTY_PERCT_OWNERSHIP) 
			@aaa:TripleA (FormatEltName=THIRD_PARTY_PERCT_OW, Rank=3040, ScriptDef="{ --SQLFORMAT select max(weight_n) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
			@aaa:scpt (value="{ --SQLFORMAT select max(weight_n) from portfolio_third_compo_vw p where p.third_id = E.domain_client_id and p.portfolio_id = E.third_party_portfolio_id }") 
		
		/* third_party_portfoli */ 
		third_party_portfolio_id : AAABusinessTypes:Id 
			@sql:SQLName (value=third_party_portfolio_id) 
			@aaa:TripleA (FormatEltName=third_party_portfoli, Rank=3010, ScriptDef=portfolio_id) 
			@aaa:scpt (value=portfolio_id) 
	} 
} 
