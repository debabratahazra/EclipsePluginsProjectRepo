<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "http://docs.oasis-open.org/dita/dtd/task.dtd" []>
<task id="InstallingPackageTAFJ">
	<title>Installing your package in TAFJ</title>
	<shortdesc>This task describes how to install the generated Jar file on your TAFJ environment.
	</shortdesc>
	<prolog>
		<author type="creator">Olivier Cevaer</author>
		<metadata>
			<keywords>
				<indexterm>packager TAFJ</indexterm>
			</keywords>
		</metadata>
	</prolog>
	<taskbody>
		<prereq>
			You must already have:
			<ul>
				<li>
					Generated your package from the packager. Please refer to the
					section
					<xref href="./PackagingChanges.dita" />
				</li>
				<li>Started your H2 instance and your webserver. </li>
			</ul>
		</prereq>
		<context>This task refers to TAFJ installation procedure that is prone to change. Please refer to TAFJ documentation
			for more details.
		</context>
		<steps>
			<step>
				<cmd>
					Manually copy all the JARs, containing compiled basic routines, available inside the JAR you can find in
					<filepath>[Project-name]-packager\target</filepath>
					folder
					to the
					<i>precompile</i>
					folder.
				</cmd>
				<info>
					For the packager default template, the JAR to copy is
					<filepath>FT_CustoSample.jar</filepath>
					you can find in R15_FT_Modelbank_1_JAVA_15.0.jar.
					<p>
						Precompile folder value
						is defined in the TAFJ properties file
						<filepath>[TAFJ-Installation]/TAFJ/Conf/[project].properties</filepath>
						file. For instance, with jboss, the precompile folder is
						<filepath>[TAFJ-Installation]/jboss\modules\com\temenos\t24\main</filepath>
					</p>
					Please note that copying a jar of existing component one overrides it. This may cause loss of classes. For
					instance; if your jar file name is
					<filepath>FT_ModelBank.jar</filepath>
					you override the existing jar that comes with T24 standard. Please consider
					<xref href="./ChangingComponentName.dita">renaming your component name.</xref>
				</info>
			</step>
			<step>
				<cmd>
					If you are running Jboss, update the file:
					<filepath>
						module.xml.
					</filepath>
					placed in this TAFJ precompile folder,
					Add Jar(s) name if not available in the list.
					For the packager default
					template, the line
					to add is:
					<codeph>
						&lt;resource-root path="FT_CustoSample.jar" /&gt; </codeph>
					.
				</cmd>
				<info>
					If you are using another application server than Jboss, please apply steps to add a new jar to the classpath.
					<p>This step needs to be done only the first time package is installed on that environment.</p>
				</info>
			</step>
			<step>
				<cmd>
					Open a
					<wintitle>CMD</wintitle>
					command window on your workstation.
				</cmd>
			</step>
			<step>
				<cmd>
					Change directory to your TAFJ installation and set required variables.
				</cmd>
				<info>
					<ul>
						<li>set JAVA_HOME=%CD%\java\jdk</li>
						<li>set TAFJ_HOME=%CD%\TAFJ</li>
						<li>set PATH=%JAVA_HOME%\bin;%TAFJ_HOME%\bin;%PATH%</li>
						<li>
							Set T24_HOME: for instance:
							<filepath>[TAFJ-Installation]/h2/UD</filepath>
						</li>
					</ul>
				</info>
			</step>
			<step>
				<cmd>
					Create following folders in $T24_HOME:
					<filepath>package
					</filepath>
					and
					<filepath>DSPackageUpdates
					</filepath>
				</cmd>
			</step>
			<step>
				<cmd>
					Remove remaining folders created during previous package installation from $T24_HOME:

					<filepath>REL.R15_FT_Modelbank_1.XML
					</filepath>
					and
					<filepath>R15_FT_Modelbank_1_JAVA_15.0
					</filepath>
				</cmd>
				<info>This doesn't apply the first time the package is installed.</info>
			</step>
			<step>
				<cmd>
					Copy the jar file generated by Design Studio in:
					<filepath>$T24_HOME/package</filepath>
				</cmd>
			</step>
			<step>
				<cmd> Start your database and web server.</cmd>
			</step>
			<step>
				<cmd>
					Execute
					<userinput>tRun.bat -cf tafj T24PackageInstaller</userinput>
					.
					This copies package content in your TAFJ installation.
				</cmd>
				<stepresult>Successful message is “Success:Update [JAR-name], Successfully copied the libraries and
					binaries.”
				</stepresult>
			</step>
			<step>
				<cmd>
					Execute
					<userinput>tRun.bat -cf tafj packageDataInstaller > YourLogFile.txt</userinput>
					.This installs the package artifacts.
				</cmd>
				<info>For solving references, for instance a screen having a new local ref field in it, you may need to run this
					command several times, creating the local field in a first run before installing the screen successfully. So,
					it is
					recommended to save the output stream to a file for analyzing installation messages.
				</info>
				<stepresult>
					Example of successful message can be seen in
					<xref href="../references/InstallerLogSample.dita"> Installer Log Sample.</xref>
				</stepresult>
			</step>
		</steps>
		<result>
			Your changes are installed on the TAFJ environment.
		</result>
	</taskbody>
	<related-links>
		<link href="./CreatingDemoPackager.dita" />
		<link href="./PackagingChanges.dita" />
	</related-links>
</task>
